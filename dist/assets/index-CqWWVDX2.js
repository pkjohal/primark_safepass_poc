(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function a(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(l){if(l.ep)return;l.ep=!0;const o=a(l);fetch(l.href,o)}})();function Py(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cd={exports:{}},Es={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o0;function $1(){if(o0)return Es;o0=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(r,l,o){var c=null;if(o!==void 0&&(c=""+o),l.key!==void 0&&(c=""+l.key),"key"in l){o={};for(var d in l)d!=="key"&&(o[d]=l[d])}else o=l;return l=o.ref,{$$typeof:t,type:r,key:c,ref:l!==void 0?l:null,props:o}}return Es.Fragment=n,Es.jsx=a,Es.jsxs=a,Es}var u0;function V1(){return u0||(u0=1,Cd.exports=$1()),Cd.exports}var p=V1(),Td={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c0;function P1(){if(c0)return je;c0=1;var t=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),v=Symbol.iterator;function b(T){return T===null||typeof T!="object"?null:(T=v&&T[v]||T["@@iterator"],typeof T=="function"?T:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,C={};function E(T,B,j){this.props=T,this.context=B,this.refs=C,this.updater=j||k}E.prototype.isReactComponent={},E.prototype.setState=function(T,B){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,B,"setState")},E.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function L(){}L.prototype=E.prototype;function R(T,B,j){this.props=T,this.context=B,this.refs=C,this.updater=j||k}var P=R.prototype=new L;P.constructor=R,N(P,E.prototype),P.isPureReactComponent=!0;var W=Array.isArray;function z(){}var Y={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function ae(T,B,j){var ie=j.ref;return{$$typeof:t,type:T,key:B,ref:ie!==void 0?ie:null,props:j}}function fe(T,B){return ae(T.type,B,T.props)}function I(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function Z(T){var B={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(j){return B[j]})}var de=/\/+/g;function se(T,B){return typeof T=="object"&&T!==null&&T.key!=null?Z(""+T.key):B.toString(36)}function K(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(z,z):(T.status="pending",T.then(function(B){T.status==="pending"&&(T.status="fulfilled",T.value=B)},function(B){T.status==="pending"&&(T.status="rejected",T.reason=B)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function M(T,B,j,ie,ee){var ce=typeof T;(ce==="undefined"||ce==="boolean")&&(T=null);var ke=!1;if(T===null)ke=!0;else switch(ce){case"bigint":case"string":case"number":ke=!0;break;case"object":switch(T.$$typeof){case t:case n:ke=!0;break;case y:return ke=T._init,M(ke(T._payload),B,j,ie,ee)}}if(ke)return ee=ee(T),ke=ie===""?"."+se(T,0):ie,W(ee)?(j="",ke!=null&&(j=ke.replace(de,"$&/")+"/"),M(ee,B,j,"",function(tt){return tt})):ee!=null&&(I(ee)&&(ee=fe(ee,j+(ee.key==null||T&&T.key===ee.key?"":(""+ee.key).replace(de,"$&/")+"/")+ke)),B.push(ee)),1;ke=0;var Ue=ie===""?".":ie+":";if(W(T))for(var re=0;re<T.length;re++)ie=T[re],ce=Ue+se(ie,re),ke+=M(ie,B,j,ce,ee);else if(re=b(T),typeof re=="function")for(T=re.call(T),re=0;!(ie=T.next()).done;)ie=ie.value,ce=Ue+se(ie,re++),ke+=M(ie,B,j,ce,ee);else if(ce==="object"){if(typeof T.then=="function")return M(K(T),B,j,ie,ee);throw B=String(T),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return ke}function J(T,B,j){if(T==null)return T;var ie=[],ee=0;return M(T,ie,"","",function(ce){return B.call(j,ce,ee++)}),ie}function ue(T){if(T._status===-1){var B=T._result;B=B(),B.then(function(j){(T._status===0||T._status===-1)&&(T._status=1,T._result=j)},function(j){(T._status===0||T._status===-1)&&(T._status=2,T._result=j)}),T._status===-1&&(T._status=0,T._result=B)}if(T._status===1)return T._result.default;throw T._result}var xe=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},A={map:J,forEach:function(T,B,j){J(T,function(){B.apply(this,arguments)},j)},count:function(T){var B=0;return J(T,function(){B++}),B},toArray:function(T){return J(T,function(B){return B})||[]},only:function(T){if(!I(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return je.Activity=x,je.Children=A,je.Component=E,je.Fragment=a,je.Profiler=l,je.PureComponent=R,je.StrictMode=r,je.Suspense=h,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,je.__COMPILER_RUNTIME={__proto__:null,c:function(T){return Y.H.useMemoCache(T)}},je.cache=function(T){return function(){return T.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(T,B,j){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var ie=N({},T.props),ee=T.key;if(B!=null)for(ce in B.key!==void 0&&(ee=""+B.key),B)!te.call(B,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&B.ref===void 0||(ie[ce]=B[ce]);var ce=arguments.length-2;if(ce===1)ie.children=j;else if(1<ce){for(var ke=Array(ce),Ue=0;Ue<ce;Ue++)ke[Ue]=arguments[Ue+2];ie.children=ke}return ae(T.type,ee,ie)},je.createContext=function(T){return T={$$typeof:c,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:o,_context:T},T},je.createElement=function(T,B,j){var ie,ee={},ce=null;if(B!=null)for(ie in B.key!==void 0&&(ce=""+B.key),B)te.call(B,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(ee[ie]=B[ie]);var ke=arguments.length-2;if(ke===1)ee.children=j;else if(1<ke){for(var Ue=Array(ke),re=0;re<ke;re++)Ue[re]=arguments[re+2];ee.children=Ue}if(T&&T.defaultProps)for(ie in ke=T.defaultProps,ke)ee[ie]===void 0&&(ee[ie]=ke[ie]);return ae(T,ce,ee)},je.createRef=function(){return{current:null}},je.forwardRef=function(T){return{$$typeof:d,render:T}},je.isValidElement=I,je.lazy=function(T){return{$$typeof:y,_payload:{_status:-1,_result:T},_init:ue}},je.memo=function(T,B){return{$$typeof:m,type:T,compare:B===void 0?null:B}},je.startTransition=function(T){var B=Y.T,j={};Y.T=j;try{var ie=T(),ee=Y.S;ee!==null&&ee(j,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(z,xe)}catch(ce){xe(ce)}finally{B!==null&&j.types!==null&&(B.types=j.types),Y.T=B}},je.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},je.use=function(T){return Y.H.use(T)},je.useActionState=function(T,B,j){return Y.H.useActionState(T,B,j)},je.useCallback=function(T,B){return Y.H.useCallback(T,B)},je.useContext=function(T){return Y.H.useContext(T)},je.useDebugValue=function(){},je.useDeferredValue=function(T,B){return Y.H.useDeferredValue(T,B)},je.useEffect=function(T,B){return Y.H.useEffect(T,B)},je.useEffectEvent=function(T){return Y.H.useEffectEvent(T)},je.useId=function(){return Y.H.useId()},je.useImperativeHandle=function(T,B,j){return Y.H.useImperativeHandle(T,B,j)},je.useInsertionEffect=function(T,B){return Y.H.useInsertionEffect(T,B)},je.useLayoutEffect=function(T,B){return Y.H.useLayoutEffect(T,B)},je.useMemo=function(T,B){return Y.H.useMemo(T,B)},je.useOptimistic=function(T,B){return Y.H.useOptimistic(T,B)},je.useReducer=function(T,B,j){return Y.H.useReducer(T,B,j)},je.useRef=function(T){return Y.H.useRef(T)},je.useState=function(T){return Y.H.useState(T)},je.useSyncExternalStore=function(T,B,j){return Y.H.useSyncExternalStore(T,B,j)},je.useTransition=function(){return Y.H.useTransition()},je.version="19.2.4",je}var d0;function zf(){return d0||(d0=1,Td.exports=P1()),Td.exports}var S=zf(),Ad={exports:{}},js={},Rd={exports:{}},Od={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f0;function G1(){return f0||(f0=1,(function(t){function n(M,J){var ue=M.length;M.push(J);e:for(;0<ue;){var xe=ue-1>>>1,A=M[xe];if(0<l(A,J))M[xe]=J,M[ue]=A,ue=xe;else break e}}function a(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var J=M[0],ue=M.pop();if(ue!==J){M[0]=ue;e:for(var xe=0,A=M.length,T=A>>>1;xe<T;){var B=2*(xe+1)-1,j=M[B],ie=B+1,ee=M[ie];if(0>l(j,ue))ie<A&&0>l(ee,j)?(M[xe]=ee,M[ie]=ue,xe=ie):(M[xe]=j,M[B]=ue,xe=B);else if(ie<A&&0>l(ee,ue))M[xe]=ee,M[ie]=ue,xe=ie;else break e}}return J}function l(M,J){var ue=M.sortIndex-J.sortIndex;return ue!==0?ue:M.id-J.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,d=c.now();t.unstable_now=function(){return c.now()-d}}var h=[],m=[],y=1,x=null,v=3,b=!1,k=!1,N=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function P(M){for(var J=a(m);J!==null;){if(J.callback===null)r(m);else if(J.startTime<=M)r(m),J.sortIndex=J.expirationTime,n(h,J);else break;J=a(m)}}function W(M){if(N=!1,P(M),!k)if(a(h)!==null)k=!0,z||(z=!0,Z());else{var J=a(m);J!==null&&K(W,J.startTime-M)}}var z=!1,Y=-1,te=5,ae=-1;function fe(){return C?!0:!(t.unstable_now()-ae<te)}function I(){if(C=!1,z){var M=t.unstable_now();ae=M;var J=!0;try{e:{k=!1,N&&(N=!1,L(Y),Y=-1),b=!0;var ue=v;try{t:{for(P(M),x=a(h);x!==null&&!(x.expirationTime>M&&fe());){var xe=x.callback;if(typeof xe=="function"){x.callback=null,v=x.priorityLevel;var A=xe(x.expirationTime<=M);if(M=t.unstable_now(),typeof A=="function"){x.callback=A,P(M),J=!0;break t}x===a(h)&&r(h),P(M)}else r(h);x=a(h)}if(x!==null)J=!0;else{var T=a(m);T!==null&&K(W,T.startTime-M),J=!1}}break e}finally{x=null,v=ue,b=!1}J=void 0}}finally{J?Z():z=!1}}}var Z;if(typeof R=="function")Z=function(){R(I)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,se=de.port2;de.port1.onmessage=I,Z=function(){se.postMessage(null)}}else Z=function(){E(I,0)};function K(M,J){Y=E(function(){M(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(M){switch(v){case 1:case 2:case 3:var J=3;break;default:J=v}var ue=v;v=J;try{return M()}finally{v=ue}},t.unstable_requestPaint=function(){C=!0},t.unstable_runWithPriority=function(M,J){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var ue=v;v=M;try{return J()}finally{v=ue}},t.unstable_scheduleCallback=function(M,J,ue){var xe=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?xe+ue:xe):ue=xe,M){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=ue+A,M={id:y++,callback:J,priorityLevel:M,startTime:ue,expirationTime:A,sortIndex:-1},ue>xe?(M.sortIndex=ue,n(m,M),a(h)===null&&M===a(m)&&(N?(L(Y),Y=-1):N=!0,K(W,ue-xe))):(M.sortIndex=A,n(h,M),k||b||(k=!0,z||(z=!0,Z()))),M},t.unstable_shouldYield=fe,t.unstable_wrapCallback=function(M){var J=v;return function(){var ue=v;v=J;try{return M.apply(this,arguments)}finally{v=ue}}}})(Od)),Od}var h0;function Y1(){return h0||(h0=1,Rd.exports=G1()),Rd.exports}var Dd={exports:{}},At={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m0;function K1(){if(m0)return At;m0=1;var t=zf();function n(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(h,m,y){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:x==null?null:""+x,children:h,containerInfo:m,implementation:y}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return At.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,At.createPortal=function(h,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(n(299));return o(h,m,null,y)},At.flushSync=function(h){var m=c.T,y=r.p;try{if(c.T=null,r.p=2,h)return h()}finally{c.T=m,r.p=y,r.d.f()}},At.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(h,m))},At.prefetchDNS=function(h){typeof h=="string"&&r.d.D(h)},At.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var y=m.as,x=d(y,m.crossOrigin),v=typeof m.integrity=="string"?m.integrity:void 0,b=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?r.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:x,integrity:v,fetchPriority:b}):y==="script"&&r.d.X(h,{crossOrigin:x,integrity:v,fetchPriority:b,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},At.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=d(m.as,m.crossOrigin);r.d.M(h,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(h)},At.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,x=d(y,m.crossOrigin);r.d.L(h,y,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},At.preloadModule=function(h,m){if(typeof h=="string")if(m){var y=d(m.as,m.crossOrigin);r.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(h)},At.requestFormReset=function(h){r.d.r(h)},At.unstable_batchedUpdates=function(h,m){return h(m)},At.useFormState=function(h,m,y){return c.H.useFormState(h,m,y)},At.useFormStatus=function(){return c.H.useHostTransitionStatus()},At.version="19.2.4",At}var p0;function F1(){if(p0)return Dd.exports;p0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Dd.exports=K1(),Dd.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g0;function X1(){if(g0)return js;g0=1;var t=Y1(),n=zf(),a=F1();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var i=e,s=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(s=i.return),e=i.return;while(e)}return i.tag===3?s:null}function c(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function d(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function h(e){if(o(e)!==e)throw Error(r(188))}function m(e){var i=e.alternate;if(!i){if(i=o(e),i===null)throw Error(r(188));return i!==e?null:e}for(var s=e,u=i;;){var f=s.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){s=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===s)return h(f),e;if(g===u)return h(f),i;g=g.sibling}throw Error(r(188))}if(s.return!==u.return)s=f,u=g;else{for(var w=!1,_=f.child;_;){if(_===s){w=!0,s=f,u=g;break}if(_===u){w=!0,u=f,s=g;break}_=_.sibling}if(!w){for(_=g.child;_;){if(_===s){w=!0,s=g,u=f;break}if(_===u){w=!0,u=g,s=f;break}_=_.sibling}if(!w)throw Error(r(189))}}if(s.alternate!==u)throw Error(r(190))}if(s.tag!==3)throw Error(r(188));return s.stateNode.current===s?e:i}function y(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=y(e),i!==null)return i;e=e.sibling}return null}var x=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),R=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),fe=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function Z(e){return e===null||typeof e!="object"?null:(e=I&&e[I]||e["@@iterator"],typeof e=="function"?e:null)}var de=Symbol.for("react.client.reference");function se(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===de?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case E:return"Profiler";case C:return"StrictMode";case W:return"Suspense";case z:return"SuspenseList";case ae:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case k:return"Portal";case R:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case P:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Y:return i=e.displayName||null,i!==null?i:se(e.type)||"Memo";case te:i=e._payload,e=e._init;try{return se(e(i))}catch{}}return null}var K=Array.isArray,M=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},xe=[],A=-1;function T(e){return{current:e}}function B(e){0>A||(e.current=xe[A],xe[A]=null,A--)}function j(e,i){A++,xe[A]=e.current,e.current=i}var ie=T(null),ee=T(null),ce=T(null),ke=T(null);function Ue(e,i){switch(j(ce,i),j(ee,e),j(ie,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?Rg(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=Rg(i),e=Og(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(ie),j(ie,e)}function re(){B(ie),B(ee),B(ce)}function tt(e){e.memoizedState!==null&&j(ke,e);var i=ie.current,s=Og(i,e.type);i!==s&&(j(ee,e),j(ie,s))}function me(e){ee.current===e&&(B(ie),B(ee)),ke.current===e&&(B(ke),ws._currentValue=ue)}var Ke,Ut;function Qt(e){if(Ke===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);Ke=i&&i[1]||"",Ut=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ke+e+Ut}var Mt=!1;function Gn(e,i){if(!e||Mt)return"";Mt=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(i){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(V){var $=V}Reflect.construct(e,[],Q)}else{try{Q.call()}catch(V){$=V}e.call(Q.prototype)}}else{try{throw Error()}catch(V){$=V}(Q=e())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(V){if(V&&$&&typeof V.stack=="string")return[V.stack,$.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),w=g[0],_=g[1];if(w&&_){var O=w.split(`
`),H=_.split(`
`);for(f=u=0;u<O.length&&!O[u].includes("DetermineComponentFrameRoot");)u++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(u===O.length||f===H.length)for(u=O.length-1,f=H.length-1;1<=u&&0<=f&&O[u]!==H[f];)f--;for(;1<=u&&0<=f;u--,f--)if(O[u]!==H[f]){if(u!==1||f!==1)do if(u--,f--,0>f||O[u]!==H[f]){var G=`
`+O[u].replace(" at new "," at ");return e.displayName&&G.includes("<anonymous>")&&(G=G.replace("<anonymous>",e.displayName)),G}while(1<=u&&0<=f);break}}}finally{Mt=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Qt(s):""}function rl(e,i){switch(e.tag){case 26:case 27:case 5:return Qt(e.type);case 16:return Qt("Lazy");case 13:return e.child!==i&&i!==null?Qt("Suspense Fallback"):Qt("Suspense");case 19:return Qt("SuspenseList");case 0:case 15:return Gn(e.type,!1);case 11:return Gn(e.type.render,!1);case 1:return Gn(e.type,!0);case 31:return Qt("Activity");default:return""}}function sl(e){try{var i="",s=null;do i+=rl(e,s),s=e,e=e.return;while(e);return i}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Sa=Object.prototype.hasOwnProperty,ka=t.unstable_scheduleCallback,Dr=t.unstable_cancelCallback,hu=t.unstable_shouldYield,mu=t.unstable_requestPaint,Dt=t.unstable_now,pu=t.unstable_getCurrentPriorityLevel,F=t.unstable_ImmediatePriority,le=t.unstable_UserBlockingPriority,Se=t.unstable_NormalPriority,Ae=t.unstable_LowPriority,He=t.unstable_IdlePriority,Jt=t.log,Yn=t.unstable_setDisableYieldValue,Lt=null,gt=null;function Bt(e){if(typeof Jt=="function"&&Yn(e),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(Lt,e)}catch{}}var Fe=Math.clz32?Math.clz32:Cb,yi=Math.log,kn=Math.LN2;function Cb(e){return e>>>=0,e===0?32:31-(yi(e)/kn|0)|0}var ll=256,ol=262144,ul=4194304;function Xi(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function cl(e,i,s){var u=e.pendingLanes;if(u===0)return 0;var f=0,g=e.suspendedLanes,w=e.pingedLanes;e=e.warmLanes;var _=u&134217727;return _!==0?(u=_&~g,u!==0?f=Xi(u):(w&=_,w!==0?f=Xi(w):s||(s=_&~e,s!==0&&(f=Xi(s))))):(_=u&~g,_!==0?f=Xi(_):w!==0?f=Xi(w):s||(s=u&~e,s!==0&&(f=Xi(s)))),f===0?0:i!==0&&i!==f&&(i&g)===0&&(g=f&-f,s=i&-i,g>=s||g===32&&(s&4194048)!==0)?i:f}function Lr(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Tb(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fh(){var e=ul;return ul<<=1,(ul&62914560)===0&&(ul=4194304),e}function gu(e){for(var i=[],s=0;31>s;s++)i.push(e);return i}function zr(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ab(e,i,s,u,f,g){var w=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var _=e.entanglements,O=e.expirationTimes,H=e.hiddenUpdates;for(s=w&~s;0<s;){var G=31-Fe(s),Q=1<<G;_[G]=0,O[G]=-1;var $=H[G];if($!==null)for(H[G]=null,G=0;G<$.length;G++){var V=$[G];V!==null&&(V.lane&=-536870913)}s&=~Q}u!==0&&hh(e,u,0),g!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=g&~(w&~i))}function hh(e,i,s){e.pendingLanes|=i,e.suspendedLanes&=~i;var u=31-Fe(i);e.entangledLanes|=i,e.entanglements[u]=e.entanglements[u]|1073741824|s&261930}function mh(e,i){var s=e.entangledLanes|=i;for(e=e.entanglements;s;){var u=31-Fe(s),f=1<<u;f&i|e[u]&i&&(e[u]|=i),s&=~f}}function ph(e,i){var s=i&-i;return s=(s&42)!==0?1:yu(s),(s&(e.suspendedLanes|i))!==0?0:s}function yu(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xu(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function gh(){var e=J.p;return e!==0?e:(e=window.event,e===void 0?32:t0(e.type))}function yh(e,i){var s=J.p;try{return J.p=e,i()}finally{J.p=s}}var xi=Math.random().toString(36).slice(2),_t="__reactFiber$"+xi,qt="__reactProps$"+xi,Ea="__reactContainer$"+xi,bu="__reactEvents$"+xi,Rb="__reactListeners$"+xi,Ob="__reactHandles$"+xi,xh="__reactResources$"+xi,Ur="__reactMarker$"+xi;function vu(e){delete e[_t],delete e[qt],delete e[bu],delete e[Rb],delete e[Ob]}function ja(e){var i=e[_t];if(i)return i;for(var s=e.parentNode;s;){if(i=s[Ea]||s[_t]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(e=qg(e);e!==null;){if(s=e[_t])return s;e=qg(e)}return i}e=s,s=e.parentNode}return null}function Na(e){if(e=e[_t]||e[Ea]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function Mr(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function Ca(e){var i=e[xh];return i||(i=e[xh]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function vt(e){e[Ur]=!0}var bh=new Set,vh={};function Qi(e,i){Ta(e,i),Ta(e+"Capture",i)}function Ta(e,i){for(vh[e]=i,e=0;e<i.length;e++)bh.add(i[e])}var Db=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wh={},_h={};function Lb(e){return Sa.call(_h,e)?!0:Sa.call(wh,e)?!1:Db.test(e)?_h[e]=!0:(wh[e]=!0,!1)}function dl(e,i,s){if(Lb(i))if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var u=i.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+s)}}function fl(e,i,s){if(s===null)e.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+s)}}function Kn(e,i,s,u){if(u===null)e.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(i,s,""+u)}}function dn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Sh(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function zb(e,i,s){var u=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,g=u.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(w){s=""+w,g.call(this,w)}}),Object.defineProperty(e,i,{enumerable:u.enumerable}),{getValue:function(){return s},setValue:function(w){s=""+w},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function wu(e){if(!e._valueTracker){var i=Sh(e)?"checked":"value";e._valueTracker=zb(e,i,""+e[i])}}function kh(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var s=i.getValue(),u="";return e&&(u=Sh(e)?e.checked?"true":"false":e.value),e=u,e!==s?(i.setValue(e),!0):!1}function hl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ub=/[\n"\\]/g;function fn(e){return e.replace(Ub,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function _u(e,i,s,u,f,g,w,_){e.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?e.type=w:e.removeAttribute("type"),i!=null?w==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+dn(i)):e.value!==""+dn(i)&&(e.value=""+dn(i)):w!=="submit"&&w!=="reset"||e.removeAttribute("value"),i!=null?Su(e,w,dn(i)):s!=null?Su(e,w,dn(s)):u!=null&&e.removeAttribute("value"),f==null&&g!=null&&(e.defaultChecked=!!g),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+dn(_):e.removeAttribute("name")}function Eh(e,i,s,u,f,g,w,_){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),i!=null||s!=null){if(!(g!=="submit"&&g!=="reset"||i!=null)){wu(e);return}s=s!=null?""+dn(s):"",i=i!=null?""+dn(i):s,_||i===e.value||(e.value=i),e.defaultValue=i}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,e.checked=_?e.checked:!!u,e.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.name=w),wu(e)}function Su(e,i,s){i==="number"&&hl(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Aa(e,i,s,u){if(e=e.options,i){i={};for(var f=0;f<s.length;f++)i["$"+s[f]]=!0;for(s=0;s<e.length;s++)f=i.hasOwnProperty("$"+e[s].value),e[s].selected!==f&&(e[s].selected=f),f&&u&&(e[s].defaultSelected=!0)}else{for(s=""+dn(s),i=null,f=0;f<e.length;f++){if(e[f].value===s){e[f].selected=!0,u&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function jh(e,i,s){if(i!=null&&(i=""+dn(i),i!==e.value&&(e.value=i),s==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=s!=null?""+dn(s):""}function Nh(e,i,s,u){if(i==null){if(u!=null){if(s!=null)throw Error(r(92));if(K(u)){if(1<u.length)throw Error(r(93));u=u[0]}s=u}s==null&&(s=""),i=s}s=dn(i),e.defaultValue=s,u=e.textContent,u===s&&u!==""&&u!==null&&(e.value=u),wu(e)}function Ra(e,i){if(i){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=i;return}}e.textContent=i}var Mb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ch(e,i,s){var u=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?u?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":u?e.setProperty(i,s):typeof s!="number"||s===0||Mb.has(i)?i==="float"?e.cssFloat=s:e[i]=(""+s).trim():e[i]=s+"px"}function Th(e,i,s){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,s!=null){for(var u in s)!s.hasOwnProperty(u)||i!=null&&i.hasOwnProperty(u)||(u.indexOf("--")===0?e.setProperty(u,""):u==="float"?e.cssFloat="":e[u]="");for(var f in i)u=i[f],i.hasOwnProperty(f)&&s[f]!==u&&Ch(e,f,u)}else for(var g in i)i.hasOwnProperty(g)&&Ch(e,g,i[g])}function ku(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),qb=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ml(e){return qb.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Fn(){}var Eu=null;function ju(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Oa=null,Da=null;function Ah(e){var i=Na(e);if(i&&(e=i.stateNode)){var s=e[qt]||null;e:switch(e=i.stateNode,i.type){case"input":if(_u(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+fn(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var u=s[i];if(u!==e&&u.form===e.form){var f=u[qt]||null;if(!f)throw Error(r(90));_u(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<s.length;i++)u=s[i],u.form===e.form&&kh(u)}break e;case"textarea":jh(e,s.value,s.defaultValue);break e;case"select":i=s.value,i!=null&&Aa(e,!!s.multiple,i,!1)}}}var Nu=!1;function Rh(e,i,s){if(Nu)return e(i,s);Nu=!0;try{var u=e(i);return u}finally{if(Nu=!1,(Oa!==null||Da!==null)&&(to(),Oa&&(i=Oa,e=Da,Da=Oa=null,Ah(i),e)))for(i=0;i<e.length;i++)Ah(e[i])}}function Br(e,i){var s=e.stateNode;if(s===null)return null;var u=s[qt]||null;if(u===null)return null;s=u[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(r(231,i,typeof s));return s}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Cu=!1;if(Xn)try{var qr={};Object.defineProperty(qr,"passive",{get:function(){Cu=!0}}),window.addEventListener("test",qr,qr),window.removeEventListener("test",qr,qr)}catch{Cu=!1}var bi=null,Tu=null,pl=null;function Oh(){if(pl)return pl;var e,i=Tu,s=i.length,u,f="value"in bi?bi.value:bi.textContent,g=f.length;for(e=0;e<s&&i[e]===f[e];e++);var w=s-e;for(u=1;u<=w&&i[s-u]===f[g-u];u++);return pl=f.slice(e,1<u?1-u:void 0)}function gl(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function yl(){return!0}function Dh(){return!1}function It(e){function i(s,u,f,g,w){this._reactName=s,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(s=e[_],this[_]=s?s(g):g[_]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?yl:Dh,this.isPropagationStopped=Dh,this}return x(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=yl)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=yl)},persist:function(){},isPersistent:yl}),i}var Ji={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},xl=It(Ji),Ir=x({},Ji,{view:0,detail:0}),Ib=It(Ir),Au,Ru,Hr,bl=x({},Ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Du,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hr&&(Hr&&e.type==="mousemove"?(Au=e.screenX-Hr.screenX,Ru=e.screenY-Hr.screenY):Ru=Au=0,Hr=e),Au)},movementY:function(e){return"movementY"in e?e.movementY:Ru}}),Lh=It(bl),Hb=x({},bl,{dataTransfer:0}),$b=It(Hb),Vb=x({},Ir,{relatedTarget:0}),Ou=It(Vb),Pb=x({},Ji,{animationName:0,elapsedTime:0,pseudoElement:0}),Gb=It(Pb),Yb=x({},Ji,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Kb=It(Yb),Fb=x({},Ji,{data:0}),zh=It(Fb),Xb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zb(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=Jb[e])?!!i[e]:!1}function Du(){return Zb}var Wb=x({},Ir,{key:function(e){if(e.key){var i=Xb[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=gl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Qb[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Du,charCode:function(e){return e.type==="keypress"?gl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ev=It(Wb),tv=x({},bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uh=It(tv),nv=x({},Ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Du}),iv=It(nv),av=x({},Ji,{propertyName:0,elapsedTime:0,pseudoElement:0}),rv=It(av),sv=x({},bl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),lv=It(sv),ov=x({},Ji,{newState:0,oldState:0}),uv=It(ov),cv=[9,13,27,32],Lu=Xn&&"CompositionEvent"in window,$r=null;Xn&&"documentMode"in document&&($r=document.documentMode);var dv=Xn&&"TextEvent"in window&&!$r,Mh=Xn&&(!Lu||$r&&8<$r&&11>=$r),Bh=" ",qh=!1;function Ih(e,i){switch(e){case"keyup":return cv.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var La=!1;function fv(e,i){switch(e){case"compositionend":return Hh(i);case"keypress":return i.which!==32?null:(qh=!0,Bh);case"textInput":return e=i.data,e===Bh&&qh?null:e;default:return null}}function hv(e,i){if(La)return e==="compositionend"||!Lu&&Ih(e,i)?(e=Oh(),pl=Tu=bi=null,La=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Mh&&i.locale!=="ko"?null:i.data;default:return null}}var mv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $h(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!mv[e.type]:i==="textarea"}function Vh(e,i,s,u){Oa?Da?Da.push(u):Da=[u]:Oa=u,i=oo(i,"onChange"),0<i.length&&(s=new xl("onChange","change",null,s,u),e.push({event:s,listeners:i}))}var Vr=null,Pr=null;function pv(e){Eg(e,0)}function vl(e){var i=Mr(e);if(kh(i))return e}function Ph(e,i){if(e==="change")return i}var Gh=!1;if(Xn){var zu;if(Xn){var Uu="oninput"in document;if(!Uu){var Yh=document.createElement("div");Yh.setAttribute("oninput","return;"),Uu=typeof Yh.oninput=="function"}zu=Uu}else zu=!1;Gh=zu&&(!document.documentMode||9<document.documentMode)}function Kh(){Vr&&(Vr.detachEvent("onpropertychange",Fh),Pr=Vr=null)}function Fh(e){if(e.propertyName==="value"&&vl(Pr)){var i=[];Vh(i,Pr,e,ju(e)),Rh(pv,i)}}function gv(e,i,s){e==="focusin"?(Kh(),Vr=i,Pr=s,Vr.attachEvent("onpropertychange",Fh)):e==="focusout"&&Kh()}function yv(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vl(Pr)}function xv(e,i){if(e==="click")return vl(i)}function bv(e,i){if(e==="input"||e==="change")return vl(i)}function vv(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var Zt=typeof Object.is=="function"?Object.is:vv;function Gr(e,i){if(Zt(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var s=Object.keys(e),u=Object.keys(i);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var f=s[u];if(!Sa.call(i,f)||!Zt(e[f],i[f]))return!1}return!0}function Xh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qh(e,i){var s=Xh(e);e=0;for(var u;s;){if(s.nodeType===3){if(u=e+s.textContent.length,e<=i&&u>=i)return{node:s,offset:i-e};e=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Xh(s)}}function Jh(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Jh(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Zh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=hl(e.document);i instanceof e.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)e=i.contentWindow;else break;i=hl(e.document)}return i}function Mu(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var wv=Xn&&"documentMode"in document&&11>=document.documentMode,za=null,Bu=null,Yr=null,qu=!1;function Wh(e,i,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;qu||za==null||za!==hl(u)||(u=za,"selectionStart"in u&&Mu(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Yr&&Gr(Yr,u)||(Yr=u,u=oo(Bu,"onSelect"),0<u.length&&(i=new xl("onSelect","select",null,i,s),e.push({event:i,listeners:u}),i.target=za)))}function Zi(e,i){var s={};return s[e.toLowerCase()]=i.toLowerCase(),s["Webkit"+e]="webkit"+i,s["Moz"+e]="moz"+i,s}var Ua={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},Iu={},em={};Xn&&(em=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function Wi(e){if(Iu[e])return Iu[e];if(!Ua[e])return e;var i=Ua[e],s;for(s in i)if(i.hasOwnProperty(s)&&s in em)return Iu[e]=i[s];return e}var tm=Wi("animationend"),nm=Wi("animationiteration"),im=Wi("animationstart"),_v=Wi("transitionrun"),Sv=Wi("transitionstart"),kv=Wi("transitioncancel"),am=Wi("transitionend"),rm=new Map,Hu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hu.push("scrollEnd");function En(e,i){rm.set(e,i),Qi(i,[e])}var wl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},hn=[],Ma=0,$u=0;function _l(){for(var e=Ma,i=$u=Ma=0;i<e;){var s=hn[i];hn[i++]=null;var u=hn[i];hn[i++]=null;var f=hn[i];hn[i++]=null;var g=hn[i];if(hn[i++]=null,u!==null&&f!==null){var w=u.pending;w===null?f.next=f:(f.next=w.next,w.next=f),u.pending=f}g!==0&&sm(s,f,g)}}function Sl(e,i,s,u){hn[Ma++]=e,hn[Ma++]=i,hn[Ma++]=s,hn[Ma++]=u,$u|=u,e.lanes|=u,e=e.alternate,e!==null&&(e.lanes|=u)}function Vu(e,i,s,u){return Sl(e,i,s,u),kl(e)}function ea(e,i){return Sl(e,null,null,i),kl(e)}function sm(e,i,s){e.lanes|=s;var u=e.alternate;u!==null&&(u.lanes|=s);for(var f=!1,g=e.return;g!==null;)g.childLanes|=s,u=g.alternate,u!==null&&(u.childLanes|=s),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(f=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,f&&i!==null&&(f=31-Fe(s),e=g.hiddenUpdates,u=e[f],u===null?e[f]=[i]:u.push(i),i.lane=s|536870912),g):null}function kl(e){if(50<ms)throw ms=0,Zc=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var Ba={};function Ev(e,i,s,u){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(e,i,s,u){return new Ev(e,i,s,u)}function Pu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qn(e,i){var s=e.alternate;return s===null?(s=Wt(e.tag,i,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=i,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,i=e.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function lm(e,i){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,i=s.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function El(e,i,s,u,f,g){var w=0;if(u=e,typeof e=="function")Pu(e)&&(w=1);else if(typeof e=="string")w=A1(e,s,ie.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ae:return e=Wt(31,s,i,f),e.elementType=ae,e.lanes=g,e;case N:return ta(s.children,f,g,i);case C:w=8,f|=24;break;case E:return e=Wt(12,s,i,f|2),e.elementType=E,e.lanes=g,e;case W:return e=Wt(13,s,i,f),e.elementType=W,e.lanes=g,e;case z:return e=Wt(19,s,i,f),e.elementType=z,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case R:w=10;break e;case L:w=9;break e;case P:w=11;break e;case Y:w=14;break e;case te:w=16,u=null;break e}w=29,s=Error(r(130,e===null?"null":typeof e,"")),u=null}return i=Wt(w,s,i,f),i.elementType=e,i.type=u,i.lanes=g,i}function ta(e,i,s,u){return e=Wt(7,e,u,i),e.lanes=s,e}function Gu(e,i,s){return e=Wt(6,e,null,i),e.lanes=s,e}function om(e){var i=Wt(18,null,null,0);return i.stateNode=e,i}function Yu(e,i,s){return i=Wt(4,e.children!==null?e.children:[],e.key,i),i.lanes=s,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var um=new WeakMap;function mn(e,i){if(typeof e=="object"&&e!==null){var s=um.get(e);return s!==void 0?s:(i={value:e,source:i,stack:sl(i)},um.set(e,i),i)}return{value:e,source:i,stack:sl(i)}}var qa=[],Ia=0,jl=null,Kr=0,pn=[],gn=0,vi=null,Dn=1,Ln="";function Jn(e,i){qa[Ia++]=Kr,qa[Ia++]=jl,jl=e,Kr=i}function cm(e,i,s){pn[gn++]=Dn,pn[gn++]=Ln,pn[gn++]=vi,vi=e;var u=Dn;e=Ln;var f=32-Fe(u)-1;u&=~(1<<f),s+=1;var g=32-Fe(i)+f;if(30<g){var w=f-f%5;g=(u&(1<<w)-1).toString(32),u>>=w,f-=w,Dn=1<<32-Fe(i)+f|s<<f|u,Ln=g+e}else Dn=1<<g|s<<f|u,Ln=e}function Ku(e){e.return!==null&&(Jn(e,1),cm(e,1,0))}function Fu(e){for(;e===jl;)jl=qa[--Ia],qa[Ia]=null,Kr=qa[--Ia],qa[Ia]=null;for(;e===vi;)vi=pn[--gn],pn[gn]=null,Ln=pn[--gn],pn[gn]=null,Dn=pn[--gn],pn[gn]=null}function dm(e,i){pn[gn++]=Dn,pn[gn++]=Ln,pn[gn++]=vi,Dn=i.id,Ln=i.overflow,vi=e}var St=null,We=null,ze=!1,wi=null,yn=!1,Xu=Error(r(519));function _i(e){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fr(mn(i,e)),Xu}function fm(e){var i=e.stateNode,s=e.type,u=e.memoizedProps;switch(i[_t]=e,i[qt]=u,s){case"dialog":Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":case"embed":Oe("load",i);break;case"video":case"audio":for(s=0;s<gs.length;s++)Oe(gs[s],i);break;case"source":Oe("error",i);break;case"img":case"image":case"link":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"input":Oe("invalid",i),Eh(i,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Oe("invalid",i);break;case"textarea":Oe("invalid",i),Nh(i,u.value,u.defaultValue,u.children)}s=u.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||u.suppressHydrationWarning===!0||Tg(i.textContent,s)?(u.popover!=null&&(Oe("beforetoggle",i),Oe("toggle",i)),u.onScroll!=null&&Oe("scroll",i),u.onScrollEnd!=null&&Oe("scrollend",i),u.onClick!=null&&(i.onclick=Fn),i=!0):i=!1,i||_i(e,!0)}function hm(e){for(St=e.return;St;)switch(St.tag){case 5:case 31:case 13:yn=!1;return;case 27:case 3:yn=!0;return;default:St=St.return}}function Ha(e){if(e!==St)return!1;if(!ze)return hm(e),ze=!0,!1;var i=e.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||hd(e.type,e.memoizedProps)),s=!s),s&&We&&_i(e),hm(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));We=Bg(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));We=Bg(e)}else i===27?(i=We,Ui(e.type)?(e=xd,xd=null,We=e):We=i):We=St?bn(e.stateNode.nextSibling):null;return!0}function na(){We=St=null,ze=!1}function Qu(){var e=wi;return e!==null&&(Pt===null?Pt=e:Pt.push.apply(Pt,e),wi=null),e}function Fr(e){wi===null?wi=[e]:wi.push(e)}var Ju=T(null),ia=null,Zn=null;function Si(e,i,s){j(Ju,i._currentValue),i._currentValue=s}function Wn(e){e._currentValue=Ju.current,B(Ju)}function Zu(e,i,s){for(;e!==null;){var u=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,u!==null&&(u.childLanes|=i)):u!==null&&(u.childLanes&i)!==i&&(u.childLanes|=i),e===s)break;e=e.return}}function Wu(e,i,s,u){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var g=f.dependencies;if(g!==null){var w=f.child;g=g.firstContext;e:for(;g!==null;){var _=g;g=f;for(var O=0;O<i.length;O++)if(_.context===i[O]){g.lanes|=s,_=g.alternate,_!==null&&(_.lanes|=s),Zu(g.return,s,e),u||(w=null);break e}g=_.next}}else if(f.tag===18){if(w=f.return,w===null)throw Error(r(341));w.lanes|=s,g=w.alternate,g!==null&&(g.lanes|=s),Zu(w,s,e),w=null}else w=f.child;if(w!==null)w.return=f;else for(w=f;w!==null;){if(w===e){w=null;break}if(f=w.sibling,f!==null){f.return=w.return,w=f;break}w=w.return}f=w}}function $a(e,i,s,u){e=null;for(var f=i,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var w=f.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var _=f.type;Zt(f.pendingProps.value,w.value)||(e!==null?e.push(_):e=[_])}}else if(f===ke.current){if(w=f.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(ws):e=[ws])}f=f.return}e!==null&&Wu(i,e,s,u),i.flags|=262144}function Nl(e){for(e=e.firstContext;e!==null;){if(!Zt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function aa(e){ia=e,Zn=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function kt(e){return mm(ia,e)}function Cl(e,i){return ia===null&&aa(e),mm(e,i)}function mm(e,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},Zn===null){if(e===null)throw Error(r(308));Zn=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Zn=Zn.next=i;return s}var jv=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(s,u){e.push(u)}};this.abort=function(){i.aborted=!0,e.forEach(function(s){return s()})}},Nv=t.unstable_scheduleCallback,Cv=t.unstable_NormalPriority,ut={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ec(){return{controller:new jv,data:new Map,refCount:0}}function Xr(e){e.refCount--,e.refCount===0&&Nv(Cv,function(){e.controller.abort()})}var Qr=null,tc=0,Va=0,Pa=null;function Tv(e,i){if(Qr===null){var s=Qr=[];tc=0,Va=ad(),Pa={status:"pending",value:void 0,then:function(u){s.push(u)}}}return tc++,i.then(pm,pm),i}function pm(){if(--tc===0&&Qr!==null){Pa!==null&&(Pa.status="fulfilled");var e=Qr;Qr=null,Va=0,Pa=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function Av(e,i){var s=[],u={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return e.then(function(){u.status="fulfilled",u.value=i;for(var f=0;f<s.length;f++)(0,s[f])(i)},function(f){for(u.status="rejected",u.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),u}var gm=M.S;M.S=function(e,i){Wp=Dt(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&Tv(e,i),gm!==null&&gm(e,i)};var ra=T(null);function nc(){var e=ra.current;return e!==null?e:Xe.pooledCache}function Tl(e,i){i===null?j(ra,ra.current):j(ra,i.pool)}function ym(){var e=nc();return e===null?null:{parent:ut._currentValue,pool:e}}var Ga=Error(r(460)),ic=Error(r(474)),Al=Error(r(542)),Rl={then:function(){}};function xm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function bm(e,i,s){switch(s=e[s],s===void 0?e.push(i):s!==i&&(i.then(Fn,Fn),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,wm(e),e;default:if(typeof i.status=="string")i.then(Fn,Fn);else{if(e=Xe,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(u){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=u}},function(u){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=u}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,wm(e),e}throw la=i,Ga}}function sa(e){try{var i=e._init;return i(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(la=s,Ga):s}}var la=null;function vm(){if(la===null)throw Error(r(459));var e=la;return la=null,e}function wm(e){if(e===Ga||e===Al)throw Error(r(483))}var Ya=null,Jr=0;function Ol(e){var i=Jr;return Jr+=1,Ya===null&&(Ya=[]),bm(Ya,e,i)}function Zr(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function Dl(e,i){throw i.$$typeof===v?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function _m(e){function i(U,D){if(e){var q=U.deletions;q===null?(U.deletions=[D],U.flags|=16):q.push(D)}}function s(U,D){if(!e)return null;for(;D!==null;)i(U,D),D=D.sibling;return null}function u(U){for(var D=new Map;U!==null;)U.key!==null?D.set(U.key,U):D.set(U.index,U),U=U.sibling;return D}function f(U,D){return U=Qn(U,D),U.index=0,U.sibling=null,U}function g(U,D,q){return U.index=q,e?(q=U.alternate,q!==null?(q=q.index,q<D?(U.flags|=67108866,D):q):(U.flags|=67108866,D)):(U.flags|=1048576,D)}function w(U){return e&&U.alternate===null&&(U.flags|=67108866),U}function _(U,D,q,X){return D===null||D.tag!==6?(D=Gu(q,U.mode,X),D.return=U,D):(D=f(D,q),D.return=U,D)}function O(U,D,q,X){var ye=q.type;return ye===N?G(U,D,q.props.children,X,q.key):D!==null&&(D.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===te&&sa(ye)===D.type)?(D=f(D,q.props),Zr(D,q),D.return=U,D):(D=El(q.type,q.key,q.props,null,U.mode,X),Zr(D,q),D.return=U,D)}function H(U,D,q,X){return D===null||D.tag!==4||D.stateNode.containerInfo!==q.containerInfo||D.stateNode.implementation!==q.implementation?(D=Yu(q,U.mode,X),D.return=U,D):(D=f(D,q.children||[]),D.return=U,D)}function G(U,D,q,X,ye){return D===null||D.tag!==7?(D=ta(q,U.mode,X,ye),D.return=U,D):(D=f(D,q),D.return=U,D)}function Q(U,D,q){if(typeof D=="string"&&D!==""||typeof D=="number"||typeof D=="bigint")return D=Gu(""+D,U.mode,q),D.return=U,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case b:return q=El(D.type,D.key,D.props,null,U.mode,q),Zr(q,D),q.return=U,q;case k:return D=Yu(D,U.mode,q),D.return=U,D;case te:return D=sa(D),Q(U,D,q)}if(K(D)||Z(D))return D=ta(D,U.mode,q,null),D.return=U,D;if(typeof D.then=="function")return Q(U,Ol(D),q);if(D.$$typeof===R)return Q(U,Cl(U,D),q);Dl(U,D)}return null}function $(U,D,q,X){var ye=D!==null?D.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return ye!==null?null:_(U,D,""+q,X);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case b:return q.key===ye?O(U,D,q,X):null;case k:return q.key===ye?H(U,D,q,X):null;case te:return q=sa(q),$(U,D,q,X)}if(K(q)||Z(q))return ye!==null?null:G(U,D,q,X,null);if(typeof q.then=="function")return $(U,D,Ol(q),X);if(q.$$typeof===R)return $(U,D,Cl(U,q),X);Dl(U,q)}return null}function V(U,D,q,X,ye){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return U=U.get(q)||null,_(D,U,""+X,ye);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case b:return U=U.get(X.key===null?q:X.key)||null,O(D,U,X,ye);case k:return U=U.get(X.key===null?q:X.key)||null,H(D,U,X,ye);case te:return X=sa(X),V(U,D,q,X,ye)}if(K(X)||Z(X))return U=U.get(q)||null,G(D,U,X,ye,null);if(typeof X.then=="function")return V(U,D,q,Ol(X),ye);if(X.$$typeof===R)return V(U,D,q,Cl(D,X),ye);Dl(D,X)}return null}function he(U,D,q,X){for(var ye=null,Me=null,pe=D,Ce=D=0,Le=null;pe!==null&&Ce<q.length;Ce++){pe.index>Ce?(Le=pe,pe=null):Le=pe.sibling;var Be=$(U,pe,q[Ce],X);if(Be===null){pe===null&&(pe=Le);break}e&&pe&&Be.alternate===null&&i(U,pe),D=g(Be,D,Ce),Me===null?ye=Be:Me.sibling=Be,Me=Be,pe=Le}if(Ce===q.length)return s(U,pe),ze&&Jn(U,Ce),ye;if(pe===null){for(;Ce<q.length;Ce++)pe=Q(U,q[Ce],X),pe!==null&&(D=g(pe,D,Ce),Me===null?ye=pe:Me.sibling=pe,Me=pe);return ze&&Jn(U,Ce),ye}for(pe=u(pe);Ce<q.length;Ce++)Le=V(pe,U,Ce,q[Ce],X),Le!==null&&(e&&Le.alternate!==null&&pe.delete(Le.key===null?Ce:Le.key),D=g(Le,D,Ce),Me===null?ye=Le:Me.sibling=Le,Me=Le);return e&&pe.forEach(function(Hi){return i(U,Hi)}),ze&&Jn(U,Ce),ye}function be(U,D,q,X){if(q==null)throw Error(r(151));for(var ye=null,Me=null,pe=D,Ce=D=0,Le=null,Be=q.next();pe!==null&&!Be.done;Ce++,Be=q.next()){pe.index>Ce?(Le=pe,pe=null):Le=pe.sibling;var Hi=$(U,pe,Be.value,X);if(Hi===null){pe===null&&(pe=Le);break}e&&pe&&Hi.alternate===null&&i(U,pe),D=g(Hi,D,Ce),Me===null?ye=Hi:Me.sibling=Hi,Me=Hi,pe=Le}if(Be.done)return s(U,pe),ze&&Jn(U,Ce),ye;if(pe===null){for(;!Be.done;Ce++,Be=q.next())Be=Q(U,Be.value,X),Be!==null&&(D=g(Be,D,Ce),Me===null?ye=Be:Me.sibling=Be,Me=Be);return ze&&Jn(U,Ce),ye}for(pe=u(pe);!Be.done;Ce++,Be=q.next())Be=V(pe,U,Ce,Be.value,X),Be!==null&&(e&&Be.alternate!==null&&pe.delete(Be.key===null?Ce:Be.key),D=g(Be,D,Ce),Me===null?ye=Be:Me.sibling=Be,Me=Be);return e&&pe.forEach(function(H1){return i(U,H1)}),ze&&Jn(U,Ce),ye}function Ye(U,D,q,X){if(typeof q=="object"&&q!==null&&q.type===N&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case b:e:{for(var ye=q.key;D!==null;){if(D.key===ye){if(ye=q.type,ye===N){if(D.tag===7){s(U,D.sibling),X=f(D,q.props.children),X.return=U,U=X;break e}}else if(D.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===te&&sa(ye)===D.type){s(U,D.sibling),X=f(D,q.props),Zr(X,q),X.return=U,U=X;break e}s(U,D);break}else i(U,D);D=D.sibling}q.type===N?(X=ta(q.props.children,U.mode,X,q.key),X.return=U,U=X):(X=El(q.type,q.key,q.props,null,U.mode,X),Zr(X,q),X.return=U,U=X)}return w(U);case k:e:{for(ye=q.key;D!==null;){if(D.key===ye)if(D.tag===4&&D.stateNode.containerInfo===q.containerInfo&&D.stateNode.implementation===q.implementation){s(U,D.sibling),X=f(D,q.children||[]),X.return=U,U=X;break e}else{s(U,D);break}else i(U,D);D=D.sibling}X=Yu(q,U.mode,X),X.return=U,U=X}return w(U);case te:return q=sa(q),Ye(U,D,q,X)}if(K(q))return he(U,D,q,X);if(Z(q)){if(ye=Z(q),typeof ye!="function")throw Error(r(150));return q=ye.call(q),be(U,D,q,X)}if(typeof q.then=="function")return Ye(U,D,Ol(q),X);if(q.$$typeof===R)return Ye(U,D,Cl(U,q),X);Dl(U,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,D!==null&&D.tag===6?(s(U,D.sibling),X=f(D,q),X.return=U,U=X):(s(U,D),X=Gu(q,U.mode,X),X.return=U,U=X),w(U)):s(U,D)}return function(U,D,q,X){try{Jr=0;var ye=Ye(U,D,q,X);return Ya=null,ye}catch(pe){if(pe===Ga||pe===Al)throw pe;var Me=Wt(29,pe,null,U.mode);return Me.lanes=X,Me.return=U,Me}finally{}}}var oa=_m(!0),Sm=_m(!1),ki=!1;function ac(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rc(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ei(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ji(e,i,s){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,(qe&2)!==0){var f=u.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),u.pending=i,i=kl(e),sm(e,null,s),i}return Sl(e,u,i,s),kl(e)}function Wr(e,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var u=i.lanes;u&=e.pendingLanes,s|=u,i.lanes=s,mh(e,s)}}function sc(e,i){var s=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var f=null,g=null;if(s=s.firstBaseUpdate,s!==null){do{var w={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};g===null?f=g=w:g=g.next=w,s=s.next}while(s!==null);g===null?f=g=i:g=g.next=i}else f=g=i;s={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=i:e.next=i,s.lastBaseUpdate=i}var lc=!1;function es(){if(lc){var e=Pa;if(e!==null)throw e}}function ts(e,i,s,u){lc=!1;var f=e.updateQueue;ki=!1;var g=f.firstBaseUpdate,w=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var O=_,H=O.next;O.next=null,w===null?g=H:w.next=H,w=O;var G=e.alternate;G!==null&&(G=G.updateQueue,_=G.lastBaseUpdate,_!==w&&(_===null?G.firstBaseUpdate=H:_.next=H,G.lastBaseUpdate=O))}if(g!==null){var Q=f.baseState;w=0,G=H=O=null,_=g;do{var $=_.lane&-536870913,V=$!==_.lane;if(V?(De&$)===$:(u&$)===$){$!==0&&$===Va&&(lc=!0),G!==null&&(G=G.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var he=e,be=_;$=i;var Ye=s;switch(be.tag){case 1:if(he=be.payload,typeof he=="function"){Q=he.call(Ye,Q,$);break e}Q=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=be.payload,$=typeof he=="function"?he.call(Ye,Q,$):he,$==null)break e;Q=x({},Q,$);break e;case 2:ki=!0}}$=_.callback,$!==null&&(e.flags|=64,V&&(e.flags|=8192),V=f.callbacks,V===null?f.callbacks=[$]:V.push($))}else V={lane:$,tag:_.tag,payload:_.payload,callback:_.callback,next:null},G===null?(H=G=V,O=Q):G=G.next=V,w|=$;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;V=_,_=V.next,V.next=null,f.lastBaseUpdate=V,f.shared.pending=null}}while(!0);G===null&&(O=Q),f.baseState=O,f.firstBaseUpdate=H,f.lastBaseUpdate=G,g===null&&(f.shared.lanes=0),Ri|=w,e.lanes=w,e.memoizedState=Q}}function km(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function Em(e,i){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)km(s[e],i)}var Ka=T(null),Ll=T(0);function jm(e,i){e=oi,j(Ll,e),j(Ka,i),oi=e|i.baseLanes}function oc(){j(Ll,oi),j(Ka,Ka.current)}function uc(){oi=Ll.current,B(Ka),B(Ll)}var en=T(null),xn=null;function Ni(e){var i=e.alternate;j(lt,lt.current&1),j(en,e),xn===null&&(i===null||Ka.current!==null||i.memoizedState!==null)&&(xn=e)}function cc(e){j(lt,lt.current),j(en,e),xn===null&&(xn=e)}function Nm(e){e.tag===22?(j(lt,lt.current),j(en,e),xn===null&&(xn=e)):Ci()}function Ci(){j(lt,lt.current),j(en,en.current)}function tn(e){B(en),xn===e&&(xn=null),B(lt)}var lt=T(0);function zl(e){for(var i=e;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||gd(s)||yd(s)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var ei=0,Ne=null,Pe=null,ct=null,Ul=!1,Fa=!1,ua=!1,Ml=0,ns=0,Xa=null,Rv=0;function at(){throw Error(r(321))}function dc(e,i){if(i===null)return!1;for(var s=0;s<i.length&&s<e.length;s++)if(!Zt(e[s],i[s]))return!1;return!0}function fc(e,i,s,u,f,g){return ei=g,Ne=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,M.H=e===null||e.memoizedState===null?cp:Nc,ua=!1,g=s(u,f),ua=!1,Fa&&(g=Tm(i,s,u,f)),Cm(e),g}function Cm(e){M.H=rs;var i=Pe!==null&&Pe.next!==null;if(ei=0,ct=Pe=Ne=null,Ul=!1,ns=0,Xa=null,i)throw Error(r(300));e===null||dt||(e=e.dependencies,e!==null&&Nl(e)&&(dt=!0))}function Tm(e,i,s,u){Ne=e;var f=0;do{if(Fa&&(Xa=null),ns=0,Fa=!1,25<=f)throw Error(r(301));if(f+=1,ct=Pe=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}M.H=dp,g=i(s,u)}while(Fa);return g}function Ov(){var e=M.H,i=e.useState()[0];return i=typeof i.then=="function"?is(i):i,e=e.useState()[0],(Pe!==null?Pe.memoizedState:null)!==e&&(Ne.flags|=1024),i}function hc(){var e=Ml!==0;return Ml=0,e}function mc(e,i,s){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~s}function pc(e){if(Ul){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Ul=!1}ei=0,ct=Pe=Ne=null,Fa=!1,ns=Ml=0,Xa=null}function zt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Ne.memoizedState=ct=e:ct=ct.next=e,ct}function ot(){if(Pe===null){var e=Ne.alternate;e=e!==null?e.memoizedState:null}else e=Pe.next;var i=ct===null?Ne.memoizedState:ct.next;if(i!==null)ct=i,Pe=e;else{if(e===null)throw Ne.alternate===null?Error(r(467)):Error(r(310));Pe=e,e={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},ct===null?Ne.memoizedState=ct=e:ct=ct.next=e}return ct}function Bl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function is(e){var i=ns;return ns+=1,Xa===null&&(Xa=[]),e=bm(Xa,e,i),i=Ne,(ct===null?i.memoizedState:ct.next)===null&&(i=i.alternate,M.H=i===null||i.memoizedState===null?cp:Nc),e}function ql(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return is(e);if(e.$$typeof===R)return kt(e)}throw Error(r(438,String(e)))}function gc(e){var i=null,s=Ne.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var u=Ne.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(i={data:u.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=Bl(),Ne.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(e),u=0;u<e;u++)s[u]=fe;return i.index++,s}function ti(e,i){return typeof i=="function"?i(e):i}function Il(e){var i=ot();return yc(i,Pe,e)}function yc(e,i,s){var u=e.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=s;var f=e.baseQueue,g=u.pending;if(g!==null){if(f!==null){var w=f.next;f.next=g.next,g.next=w}i.baseQueue=f=g,u.pending=null}if(g=e.baseState,f===null)e.memoizedState=g;else{i=f.next;var _=w=null,O=null,H=i,G=!1;do{var Q=H.lane&-536870913;if(Q!==H.lane?(De&Q)===Q:(ei&Q)===Q){var $=H.revertLane;if($===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),Q===Va&&(G=!0);else if((ei&$)===$){H=H.next,$===Va&&(G=!0);continue}else Q={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(_=O=Q,w=g):O=O.next=Q,Ne.lanes|=$,Ri|=$;Q=H.action,ua&&s(g,Q),g=H.hasEagerState?H.eagerState:s(g,Q)}else $={lane:Q,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(_=O=$,w=g):O=O.next=$,Ne.lanes|=Q,Ri|=Q;H=H.next}while(H!==null&&H!==i);if(O===null?w=g:O.next=_,!Zt(g,e.memoizedState)&&(dt=!0,G&&(s=Pa,s!==null)))throw s;e.memoizedState=g,e.baseState=w,e.baseQueue=O,u.lastRenderedState=g}return f===null&&(u.lanes=0),[e.memoizedState,u.dispatch]}function xc(e){var i=ot(),s=i.queue;if(s===null)throw Error(r(311));s.lastRenderedReducer=e;var u=s.dispatch,f=s.pending,g=i.memoizedState;if(f!==null){s.pending=null;var w=f=f.next;do g=e(g,w.action),w=w.next;while(w!==f);Zt(g,i.memoizedState)||(dt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),s.lastRenderedState=g}return[g,u]}function Am(e,i,s){var u=Ne,f=ot(),g=ze;if(g){if(s===void 0)throw Error(r(407));s=s()}else s=i();var w=!Zt((Pe||f).memoizedState,s);if(w&&(f.memoizedState=s,dt=!0),f=f.queue,wc(Dm.bind(null,u,f,e),[e]),f.getSnapshot!==i||w||ct!==null&&ct.memoizedState.tag&1){if(u.flags|=2048,Qa(9,{destroy:void 0},Om.bind(null,u,f,s,i),null),Xe===null)throw Error(r(349));g||(ei&127)!==0||Rm(u,i,s)}return s}function Rm(e,i,s){e.flags|=16384,e={getSnapshot:i,value:s},i=Ne.updateQueue,i===null?(i=Bl(),Ne.updateQueue=i,i.stores=[e]):(s=i.stores,s===null?i.stores=[e]:s.push(e))}function Om(e,i,s,u){i.value=s,i.getSnapshot=u,Lm(i)&&zm(e)}function Dm(e,i,s){return s(function(){Lm(i)&&zm(e)})}function Lm(e){var i=e.getSnapshot;e=e.value;try{var s=i();return!Zt(e,s)}catch{return!0}}function zm(e){var i=ea(e,2);i!==null&&Gt(i,e,2)}function bc(e){var i=zt();if(typeof e=="function"){var s=e;if(e=s(),ua){Bt(!0);try{s()}finally{Bt(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:e},i}function Um(e,i,s,u){return e.baseState=s,yc(e,Pe,typeof u=="function"?u:ti)}function Dv(e,i,s,u,f){if(Vl(e))throw Error(r(485));if(e=i.action,e!==null){var g={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};M.T!==null?s(!0):g.isTransition=!1,u(g),s=i.pending,s===null?(g.next=i.pending=g,Mm(i,g)):(g.next=s.next,i.pending=s.next=g)}}function Mm(e,i){var s=i.action,u=i.payload,f=e.state;if(i.isTransition){var g=M.T,w={};M.T=w;try{var _=s(f,u),O=M.S;O!==null&&O(w,_),Bm(e,i,_)}catch(H){vc(e,i,H)}finally{g!==null&&w.types!==null&&(g.types=w.types),M.T=g}}else try{g=s(f,u),Bm(e,i,g)}catch(H){vc(e,i,H)}}function Bm(e,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(u){qm(e,i,u)},function(u){return vc(e,i,u)}):qm(e,i,s)}function qm(e,i,s){i.status="fulfilled",i.value=s,Im(i),e.state=s,i=e.pending,i!==null&&(s=i.next,s===i?e.pending=null:(s=s.next,i.next=s,Mm(e,s)))}function vc(e,i,s){var u=e.pending;if(e.pending=null,u!==null){u=u.next;do i.status="rejected",i.reason=s,Im(i),i=i.next;while(i!==u)}e.action=null}function Im(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function Hm(e,i){return i}function $m(e,i){if(ze){var s=Xe.formState;if(s!==null){e:{var u=Ne;if(ze){if(We){t:{for(var f=We,g=yn;f.nodeType!==8;){if(!g){f=null;break t}if(f=bn(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){We=bn(f.nextSibling),u=f.data==="F!";break e}}_i(u)}u=!1}u&&(i=s[0])}}return s=zt(),s.memoizedState=s.baseState=i,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hm,lastRenderedState:i},s.queue=u,s=lp.bind(null,Ne,u),u.dispatch=s,u=bc(!1),g=jc.bind(null,Ne,!1,u.queue),u=zt(),f={state:i,dispatch:null,action:e,pending:null},u.queue=f,s=Dv.bind(null,Ne,f,g,s),f.dispatch=s,u.memoizedState=e,[i,s,!1]}function Vm(e){var i=ot();return Pm(i,Pe,e)}function Pm(e,i,s){if(i=yc(e,i,Hm)[0],e=Il(ti)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var u=is(i)}catch(w){throw w===Ga?Al:w}else u=i;i=ot();var f=i.queue,g=f.dispatch;return s!==i.memoizedState&&(Ne.flags|=2048,Qa(9,{destroy:void 0},Lv.bind(null,f,s),null)),[u,g,e]}function Lv(e,i){e.action=i}function Gm(e){var i=ot(),s=Pe;if(s!==null)return Pm(i,s,e);ot(),i=i.memoizedState,s=ot();var u=s.queue.dispatch;return s.memoizedState=e,[i,u,!1]}function Qa(e,i,s,u){return e={tag:e,create:s,deps:u,inst:i,next:null},i=Ne.updateQueue,i===null&&(i=Bl(),Ne.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=e.next=e:(u=s.next,s.next=e,e.next=u,i.lastEffect=e),e}function Ym(){return ot().memoizedState}function Hl(e,i,s,u){var f=zt();Ne.flags|=e,f.memoizedState=Qa(1|i,{destroy:void 0},s,u===void 0?null:u)}function $l(e,i,s,u){var f=ot();u=u===void 0?null:u;var g=f.memoizedState.inst;Pe!==null&&u!==null&&dc(u,Pe.memoizedState.deps)?f.memoizedState=Qa(i,g,s,u):(Ne.flags|=e,f.memoizedState=Qa(1|i,g,s,u))}function Km(e,i){Hl(8390656,8,e,i)}function wc(e,i){$l(2048,8,e,i)}function zv(e){Ne.flags|=4;var i=Ne.updateQueue;if(i===null)i=Bl(),Ne.updateQueue=i,i.events=[e];else{var s=i.events;s===null?i.events=[e]:s.push(e)}}function Fm(e){var i=ot().memoizedState;return zv({ref:i,nextImpl:e}),function(){if((qe&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Xm(e,i){return $l(4,2,e,i)}function Qm(e,i){return $l(4,4,e,i)}function Jm(e,i){if(typeof i=="function"){e=e();var s=i(e);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Zm(e,i,s){s=s!=null?s.concat([e]):null,$l(4,4,Jm.bind(null,i,e),s)}function _c(){}function Wm(e,i){var s=ot();i=i===void 0?null:i;var u=s.memoizedState;return i!==null&&dc(i,u[1])?u[0]:(s.memoizedState=[e,i],e)}function ep(e,i){var s=ot();i=i===void 0?null:i;var u=s.memoizedState;if(i!==null&&dc(i,u[1]))return u[0];if(u=e(),ua){Bt(!0);try{e()}finally{Bt(!1)}}return s.memoizedState=[u,i],u}function Sc(e,i,s){return s===void 0||(ei&1073741824)!==0&&(De&261930)===0?e.memoizedState=i:(e.memoizedState=s,e=tg(),Ne.lanes|=e,Ri|=e,s)}function tp(e,i,s,u){return Zt(s,i)?s:Ka.current!==null?(e=Sc(e,s,u),Zt(e,i)||(dt=!0),e):(ei&42)===0||(ei&1073741824)!==0&&(De&261930)===0?(dt=!0,e.memoizedState=s):(e=tg(),Ne.lanes|=e,Ri|=e,i)}function np(e,i,s,u,f){var g=J.p;J.p=g!==0&&8>g?g:8;var w=M.T,_={};M.T=_,jc(e,!1,i,s);try{var O=f(),H=M.S;if(H!==null&&H(_,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var G=Av(O,u);as(e,i,G,rn(e))}else as(e,i,u,rn(e))}catch(Q){as(e,i,{then:function(){},status:"rejected",reason:Q},rn())}finally{J.p=g,w!==null&&_.types!==null&&(w.types=_.types),M.T=w}}function Uv(){}function kc(e,i,s,u){if(e.tag!==5)throw Error(r(476));var f=ip(e).queue;np(e,f,i,ue,s===null?Uv:function(){return ap(e),s(u)})}function ip(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:ue},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ti,lastRenderedState:s},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function ap(e){var i=ip(e);i.next===null&&(i=e.alternate.memoizedState),as(e,i.next.queue,{},rn())}function Ec(){return kt(ws)}function rp(){return ot().memoizedState}function sp(){return ot().memoizedState}function Mv(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var s=rn();e=Ei(s);var u=ji(i,e,s);u!==null&&(Gt(u,i,s),Wr(u,i,s)),i={cache:ec()},e.payload=i;return}i=i.return}}function Bv(e,i,s){var u=rn();s={lane:u,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Vl(e)?op(i,s):(s=Vu(e,i,s,u),s!==null&&(Gt(s,e,u),up(s,i,u)))}function lp(e,i,s){var u=rn();as(e,i,s,u)}function as(e,i,s,u){var f={lane:u,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Vl(e))op(i,f);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var w=i.lastRenderedState,_=g(w,s);if(f.hasEagerState=!0,f.eagerState=_,Zt(_,w))return Sl(e,i,f,0),Xe===null&&_l(),!1}catch{}finally{}if(s=Vu(e,i,f,u),s!==null)return Gt(s,e,u),up(s,i,u),!0}return!1}function jc(e,i,s,u){if(u={lane:2,revertLane:ad(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Vl(e)){if(i)throw Error(r(479))}else i=Vu(e,s,u,2),i!==null&&Gt(i,e,2)}function Vl(e){var i=e.alternate;return e===Ne||i!==null&&i===Ne}function op(e,i){Fa=Ul=!0;var s=e.pending;s===null?i.next=i:(i.next=s.next,s.next=i),e.pending=i}function up(e,i,s){if((s&4194048)!==0){var u=i.lanes;u&=e.pendingLanes,s|=u,i.lanes=s,mh(e,s)}}var rs={readContext:kt,use:ql,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useLayoutEffect:at,useInsertionEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useSyncExternalStore:at,useId:at,useHostTransitionStatus:at,useFormState:at,useActionState:at,useOptimistic:at,useMemoCache:at,useCacheRefresh:at};rs.useEffectEvent=at;var cp={readContext:kt,use:ql,useCallback:function(e,i){return zt().memoizedState=[e,i===void 0?null:i],e},useContext:kt,useEffect:Km,useImperativeHandle:function(e,i,s){s=s!=null?s.concat([e]):null,Hl(4194308,4,Jm.bind(null,i,e),s)},useLayoutEffect:function(e,i){return Hl(4194308,4,e,i)},useInsertionEffect:function(e,i){Hl(4,2,e,i)},useMemo:function(e,i){var s=zt();i=i===void 0?null:i;var u=e();if(ua){Bt(!0);try{e()}finally{Bt(!1)}}return s.memoizedState=[u,i],u},useReducer:function(e,i,s){var u=zt();if(s!==void 0){var f=s(i);if(ua){Bt(!0);try{s(i)}finally{Bt(!1)}}}else f=i;return u.memoizedState=u.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},u.queue=e,e=e.dispatch=Bv.bind(null,Ne,e),[u.memoizedState,e]},useRef:function(e){var i=zt();return e={current:e},i.memoizedState=e},useState:function(e){e=bc(e);var i=e.queue,s=lp.bind(null,Ne,i);return i.dispatch=s,[e.memoizedState,s]},useDebugValue:_c,useDeferredValue:function(e,i){var s=zt();return Sc(s,e,i)},useTransition:function(){var e=bc(!1);return e=np.bind(null,Ne,e.queue,!0,!1),zt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,s){var u=Ne,f=zt();if(ze){if(s===void 0)throw Error(r(407));s=s()}else{if(s=i(),Xe===null)throw Error(r(349));(De&127)!==0||Rm(u,i,s)}f.memoizedState=s;var g={value:s,getSnapshot:i};return f.queue=g,Km(Dm.bind(null,u,g,e),[e]),u.flags|=2048,Qa(9,{destroy:void 0},Om.bind(null,u,g,s,i),null),s},useId:function(){var e=zt(),i=Xe.identifierPrefix;if(ze){var s=Ln,u=Dn;s=(u&~(1<<32-Fe(u)-1)).toString(32)+s,i="_"+i+"R_"+s,s=Ml++,0<s&&(i+="H"+s.toString(32)),i+="_"}else s=Rv++,i="_"+i+"r_"+s.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Ec,useFormState:$m,useActionState:$m,useOptimistic:function(e){var i=zt();i.memoizedState=i.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=jc.bind(null,Ne,!0,s),s.dispatch=i,[e,i]},useMemoCache:gc,useCacheRefresh:function(){return zt().memoizedState=Mv.bind(null,Ne)},useEffectEvent:function(e){var i=zt(),s={impl:e};return i.memoizedState=s,function(){if((qe&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}},Nc={readContext:kt,use:ql,useCallback:Wm,useContext:kt,useEffect:wc,useImperativeHandle:Zm,useInsertionEffect:Xm,useLayoutEffect:Qm,useMemo:ep,useReducer:Il,useRef:Ym,useState:function(){return Il(ti)},useDebugValue:_c,useDeferredValue:function(e,i){var s=ot();return tp(s,Pe.memoizedState,e,i)},useTransition:function(){var e=Il(ti)[0],i=ot().memoizedState;return[typeof e=="boolean"?e:is(e),i]},useSyncExternalStore:Am,useId:rp,useHostTransitionStatus:Ec,useFormState:Vm,useActionState:Vm,useOptimistic:function(e,i){var s=ot();return Um(s,Pe,e,i)},useMemoCache:gc,useCacheRefresh:sp};Nc.useEffectEvent=Fm;var dp={readContext:kt,use:ql,useCallback:Wm,useContext:kt,useEffect:wc,useImperativeHandle:Zm,useInsertionEffect:Xm,useLayoutEffect:Qm,useMemo:ep,useReducer:xc,useRef:Ym,useState:function(){return xc(ti)},useDebugValue:_c,useDeferredValue:function(e,i){var s=ot();return Pe===null?Sc(s,e,i):tp(s,Pe.memoizedState,e,i)},useTransition:function(){var e=xc(ti)[0],i=ot().memoizedState;return[typeof e=="boolean"?e:is(e),i]},useSyncExternalStore:Am,useId:rp,useHostTransitionStatus:Ec,useFormState:Gm,useActionState:Gm,useOptimistic:function(e,i){var s=ot();return Pe!==null?Um(s,Pe,e,i):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:gc,useCacheRefresh:sp};dp.useEffectEvent=Fm;function Cc(e,i,s,u){i=e.memoizedState,s=s(u,i),s=s==null?i:x({},i,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Tc={enqueueSetState:function(e,i,s){e=e._reactInternals;var u=rn(),f=Ei(u);f.payload=i,s!=null&&(f.callback=s),i=ji(e,f,u),i!==null&&(Gt(i,e,u),Wr(i,e,u))},enqueueReplaceState:function(e,i,s){e=e._reactInternals;var u=rn(),f=Ei(u);f.tag=1,f.payload=i,s!=null&&(f.callback=s),i=ji(e,f,u),i!==null&&(Gt(i,e,u),Wr(i,e,u))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var s=rn(),u=Ei(s);u.tag=2,i!=null&&(u.callback=i),i=ji(e,u,s),i!==null&&(Gt(i,e,s),Wr(i,e,s))}};function fp(e,i,s,u,f,g,w){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,g,w):i.prototype&&i.prototype.isPureReactComponent?!Gr(s,u)||!Gr(f,g):!0}function hp(e,i,s,u){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,u),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,u),i.state!==e&&Tc.enqueueReplaceState(i,i.state,null)}function ca(e,i){var s=i;if("ref"in i){s={};for(var u in i)u!=="ref"&&(s[u]=i[u])}if(e=e.defaultProps){s===i&&(s=x({},s));for(var f in e)s[f]===void 0&&(s[f]=e[f])}return s}function mp(e){wl(e)}function pp(e){console.error(e)}function gp(e){wl(e)}function Pl(e,i){try{var s=e.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(u){setTimeout(function(){throw u})}}function yp(e,i,s){try{var u=e.onCaughtError;u(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Ac(e,i,s){return s=Ei(s),s.tag=3,s.payload={element:null},s.callback=function(){Pl(e,i)},s}function xp(e){return e=Ei(e),e.tag=3,e}function bp(e,i,s,u){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;e.payload=function(){return f(g)},e.callback=function(){yp(i,s,u)}}var w=s.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(e.callback=function(){yp(i,s,u),typeof f!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var _=u.stack;this.componentDidCatch(u.value,{componentStack:_!==null?_:""})})}function qv(e,i,s,u,f){if(s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(i=s.alternate,i!==null&&$a(i,s,f,!0),s=en.current,s!==null){switch(s.tag){case 31:case 13:return xn===null?no():s.alternate===null&&rt===0&&(rt=3),s.flags&=-257,s.flags|=65536,s.lanes=f,u===Rl?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([u]):i.add(u),td(e,u,f)),!1;case 22:return s.flags|=65536,u===Rl?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([u])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([u]):s.add(u)),td(e,u,f)),!1}throw Error(r(435,s.tag))}return td(e,u,f),no(),!1}if(ze)return i=en.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,u!==Xu&&(e=Error(r(422),{cause:u}),Fr(mn(e,s)))):(u!==Xu&&(i=Error(r(423),{cause:u}),Fr(mn(i,s))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,u=mn(u,s),f=Ac(e.stateNode,u,f),sc(e,f),rt!==4&&(rt=2)),!1;var g=Error(r(520),{cause:u});if(g=mn(g,s),hs===null?hs=[g]:hs.push(g),rt!==4&&(rt=2),i===null)return!0;u=mn(u,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,e=f&-f,s.lanes|=e,e=Ac(s.stateNode,u,e),sc(s,e),!1;case 1:if(i=s.type,g=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Oi===null||!Oi.has(g))))return s.flags|=65536,f&=-f,s.lanes|=f,f=xp(f),bp(f,e,s,u),sc(s,f),!1}s=s.return}while(s!==null);return!1}var Rc=Error(r(461)),dt=!1;function Et(e,i,s,u){i.child=e===null?Sm(i,null,s,u):oa(i,e.child,s,u)}function vp(e,i,s,u,f){s=s.render;var g=i.ref;if("ref"in u){var w={};for(var _ in u)_!=="ref"&&(w[_]=u[_])}else w=u;return aa(i),u=fc(e,i,s,w,g,f),_=hc(),e!==null&&!dt?(mc(e,i,f),ni(e,i,f)):(ze&&_&&Ku(i),i.flags|=1,Et(e,i,u,f),i.child)}function wp(e,i,s,u,f){if(e===null){var g=s.type;return typeof g=="function"&&!Pu(g)&&g.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=g,_p(e,i,g,u,f)):(e=El(s.type,null,u,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(g=e.child,!qc(e,f)){var w=g.memoizedProps;if(s=s.compare,s=s!==null?s:Gr,s(w,u)&&e.ref===i.ref)return ni(e,i,f)}return i.flags|=1,e=Qn(g,u),e.ref=i.ref,e.return=i,i.child=e}function _p(e,i,s,u,f){if(e!==null){var g=e.memoizedProps;if(Gr(g,u)&&e.ref===i.ref)if(dt=!1,i.pendingProps=u=g,qc(e,f))(e.flags&131072)!==0&&(dt=!0);else return i.lanes=e.lanes,ni(e,i,f)}return Oc(e,i,s,u,f)}function Sp(e,i,s,u){var f=u.children,g=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((i.flags&128)!==0){if(g=g!==null?g.baseLanes|s:s,e!==null){for(u=i.child=e.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~g}else u=0,i.child=null;return kp(e,i,g,s,u)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&Tl(i,g!==null?g.cachePool:null),g!==null?jm(i,g):oc(),Nm(i);else return u=i.lanes=536870912,kp(e,i,g!==null?g.baseLanes|s:s,s,u)}else g!==null?(Tl(i,g.cachePool),jm(i,g),Ci(),i.memoizedState=null):(e!==null&&Tl(i,null),oc(),Ci());return Et(e,i,f,s),i.child}function ss(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function kp(e,i,s,u,f){var g=nc();return g=g===null?null:{parent:ut._currentValue,pool:g},i.memoizedState={baseLanes:s,cachePool:g},e!==null&&Tl(i,null),oc(),Nm(i),e!==null&&$a(e,i,u,!0),i.childLanes=f,null}function Gl(e,i){return i=Kl({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function Ep(e,i,s){return oa(i,e.child,null,s),e=Gl(i,i.pendingProps),e.flags|=2,tn(i),i.memoizedState=null,e}function Iv(e,i,s){var u=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(ze){if(u.mode==="hidden")return e=Gl(i,u),i.lanes=536870912,ss(null,e);if(cc(i),(e=We)?(e=Mg(e,yn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:vi!==null?{id:Dn,overflow:Ln}:null,retryLane:536870912,hydrationErrors:null},s=om(e),s.return=i,i.child=s,St=i,We=null)):e=null,e===null)throw _i(i);return i.lanes=536870912,null}return Gl(i,u)}var g=e.memoizedState;if(g!==null){var w=g.dehydrated;if(cc(i),f)if(i.flags&256)i.flags&=-257,i=Ep(e,i,s);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(r(558));else if(dt||$a(e,i,s,!1),f=(s&e.childLanes)!==0,dt||f){if(u=Xe,u!==null&&(w=ph(u,s),w!==0&&w!==g.retryLane))throw g.retryLane=w,ea(e,w),Gt(u,e,w),Rc;no(),i=Ep(e,i,s)}else e=g.treeContext,We=bn(w.nextSibling),St=i,ze=!0,wi=null,yn=!1,e!==null&&dm(i,e),i=Gl(i,u),i.flags|=4096;return i}return e=Qn(e.child,{mode:u.mode,children:u.children}),e.ref=i.ref,i.child=e,e.return=i,e}function Yl(e,i){var s=i.ref;if(s===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(r(284));(e===null||e.ref!==s)&&(i.flags|=4194816)}}function Oc(e,i,s,u,f){return aa(i),s=fc(e,i,s,u,void 0,f),u=hc(),e!==null&&!dt?(mc(e,i,f),ni(e,i,f)):(ze&&u&&Ku(i),i.flags|=1,Et(e,i,s,f),i.child)}function jp(e,i,s,u,f,g){return aa(i),i.updateQueue=null,s=Tm(i,u,s,f),Cm(e),u=hc(),e!==null&&!dt?(mc(e,i,g),ni(e,i,g)):(ze&&u&&Ku(i),i.flags|=1,Et(e,i,s,g),i.child)}function Np(e,i,s,u,f){if(aa(i),i.stateNode===null){var g=Ba,w=s.contextType;typeof w=="object"&&w!==null&&(g=kt(w)),g=new s(u,g),i.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Tc,i.stateNode=g,g._reactInternals=i,g=i.stateNode,g.props=u,g.state=i.memoizedState,g.refs={},ac(i),w=s.contextType,g.context=typeof w=="object"&&w!==null?kt(w):Ba,g.state=i.memoizedState,w=s.getDerivedStateFromProps,typeof w=="function"&&(Cc(i,s,w,u),g.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&Tc.enqueueReplaceState(g,g.state,null),ts(i,u,g,f),es(),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!0}else if(e===null){g=i.stateNode;var _=i.memoizedProps,O=ca(s,_);g.props=O;var H=g.context,G=s.contextType;w=Ba,typeof G=="object"&&G!==null&&(w=kt(G));var Q=s.getDerivedStateFromProps;G=typeof Q=="function"||typeof g.getSnapshotBeforeUpdate=="function",_=i.pendingProps!==_,G||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(_||H!==w)&&hp(i,g,u,w),ki=!1;var $=i.memoizedState;g.state=$,ts(i,u,g,f),es(),H=i.memoizedState,_||$!==H||ki?(typeof Q=="function"&&(Cc(i,s,Q,u),H=i.memoizedState),(O=ki||fp(i,s,O,u,$,H,w))?(G||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(i.flags|=4194308)):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=u,i.memoizedState=H),g.props=u,g.state=H,g.context=w,u=O):(typeof g.componentDidMount=="function"&&(i.flags|=4194308),u=!1)}else{g=i.stateNode,rc(e,i),w=i.memoizedProps,G=ca(s,w),g.props=G,Q=i.pendingProps,$=g.context,H=s.contextType,O=Ba,typeof H=="object"&&H!==null&&(O=kt(H)),_=s.getDerivedStateFromProps,(H=typeof _=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==Q||$!==O)&&hp(i,g,u,O),ki=!1,$=i.memoizedState,g.state=$,ts(i,u,g,f),es();var V=i.memoizedState;w!==Q||$!==V||ki||e!==null&&e.dependencies!==null&&Nl(e.dependencies)?(typeof _=="function"&&(Cc(i,s,_,u),V=i.memoizedState),(G=ki||fp(i,s,G,u,$,V,O)||e!==null&&e.dependencies!==null&&Nl(e.dependencies))?(H||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,V,O),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,V,O)),typeof g.componentDidUpdate=="function"&&(i.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(i.flags|=1024),i.memoizedProps=u,i.memoizedState=V),g.props=u,g.state=V,g.context=O,u=G):(typeof g.componentDidUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(i.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(i.flags|=1024),u=!1)}return g=u,Yl(e,i),u=(i.flags&128)!==0,g||u?(g=i.stateNode,s=u&&typeof s.getDerivedStateFromError!="function"?null:g.render(),i.flags|=1,e!==null&&u?(i.child=oa(i,e.child,null,f),i.child=oa(i,null,s,f)):Et(e,i,s,f),i.memoizedState=g.state,e=i.child):e=ni(e,i,f),e}function Cp(e,i,s,u){return na(),i.flags|=256,Et(e,i,s,u),i.child}var Dc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lc(e){return{baseLanes:e,cachePool:ym()}}function zc(e,i,s){return e=e!==null?e.childLanes&~s:0,i&&(e|=an),e}function Tp(e,i,s){var u=i.pendingProps,f=!1,g=(i.flags&128)!==0,w;if((w=g)||(w=e!==null&&e.memoizedState===null?!1:(lt.current&2)!==0),w&&(f=!0,i.flags&=-129),w=(i.flags&32)!==0,i.flags&=-33,e===null){if(ze){if(f?Ni(i):Ci(),(e=We)?(e=Mg(e,yn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:vi!==null?{id:Dn,overflow:Ln}:null,retryLane:536870912,hydrationErrors:null},s=om(e),s.return=i,i.child=s,St=i,We=null)):e=null,e===null)throw _i(i);return yd(e)?i.lanes=32:i.lanes=536870912,null}var _=u.children;return u=u.fallback,f?(Ci(),f=i.mode,_=Kl({mode:"hidden",children:_},f),u=ta(u,f,s,null),_.return=i,u.return=i,_.sibling=u,i.child=_,u=i.child,u.memoizedState=Lc(s),u.childLanes=zc(e,w,s),i.memoizedState=Dc,ss(null,u)):(Ni(i),Uc(i,_))}var O=e.memoizedState;if(O!==null&&(_=O.dehydrated,_!==null)){if(g)i.flags&256?(Ni(i),i.flags&=-257,i=Mc(e,i,s)):i.memoizedState!==null?(Ci(),i.child=e.child,i.flags|=128,i=null):(Ci(),_=u.fallback,f=i.mode,u=Kl({mode:"visible",children:u.children},f),_=ta(_,f,s,null),_.flags|=2,u.return=i,_.return=i,u.sibling=_,i.child=u,oa(i,e.child,null,s),u=i.child,u.memoizedState=Lc(s),u.childLanes=zc(e,w,s),i.memoizedState=Dc,i=ss(null,u));else if(Ni(i),yd(_)){if(w=_.nextSibling&&_.nextSibling.dataset,w)var H=w.dgst;w=H,u=Error(r(419)),u.stack="",u.digest=w,Fr({value:u,source:null,stack:null}),i=Mc(e,i,s)}else if(dt||$a(e,i,s,!1),w=(s&e.childLanes)!==0,dt||w){if(w=Xe,w!==null&&(u=ph(w,s),u!==0&&u!==O.retryLane))throw O.retryLane=u,ea(e,u),Gt(w,e,u),Rc;gd(_)||no(),i=Mc(e,i,s)}else gd(_)?(i.flags|=192,i.child=e.child,i=null):(e=O.treeContext,We=bn(_.nextSibling),St=i,ze=!0,wi=null,yn=!1,e!==null&&dm(i,e),i=Uc(i,u.children),i.flags|=4096);return i}return f?(Ci(),_=u.fallback,f=i.mode,O=e.child,H=O.sibling,u=Qn(O,{mode:"hidden",children:u.children}),u.subtreeFlags=O.subtreeFlags&65011712,H!==null?_=Qn(H,_):(_=ta(_,f,s,null),_.flags|=2),_.return=i,u.return=i,u.sibling=_,i.child=u,ss(null,u),u=i.child,_=e.child.memoizedState,_===null?_=Lc(s):(f=_.cachePool,f!==null?(O=ut._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=ym(),_={baseLanes:_.baseLanes|s,cachePool:f}),u.memoizedState=_,u.childLanes=zc(e,w,s),i.memoizedState=Dc,ss(e.child,u)):(Ni(i),s=e.child,e=s.sibling,s=Qn(s,{mode:"visible",children:u.children}),s.return=i,s.sibling=null,e!==null&&(w=i.deletions,w===null?(i.deletions=[e],i.flags|=16):w.push(e)),i.child=s,i.memoizedState=null,s)}function Uc(e,i){return i=Kl({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function Kl(e,i){return e=Wt(22,e,null,i),e.lanes=0,e}function Mc(e,i,s){return oa(i,e.child,null,s),e=Uc(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function Ap(e,i,s){e.lanes|=i;var u=e.alternate;u!==null&&(u.lanes|=i),Zu(e.return,i,s)}function Bc(e,i,s,u,f,g){var w=e.memoizedState;w===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:f,treeForkCount:g}:(w.isBackwards=i,w.rendering=null,w.renderingStartTime=0,w.last=u,w.tail=s,w.tailMode=f,w.treeForkCount=g)}function Rp(e,i,s){var u=i.pendingProps,f=u.revealOrder,g=u.tail;u=u.children;var w=lt.current,_=(w&2)!==0;if(_?(w=w&1|2,i.flags|=128):w&=1,j(lt,w),Et(e,i,u,s),u=ze?Kr:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ap(e,s,i);else if(e.tag===19)Ap(e,s,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break e;for(;e.sibling===null;){if(e.return===null||e.return===i)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(s=i.child,f=null;s!==null;)e=s.alternate,e!==null&&zl(e)===null&&(f=s),s=s.sibling;s=f,s===null?(f=i.child,i.child=null):(f=s.sibling,s.sibling=null),Bc(i,!1,f,s,g,u);break;case"backwards":case"unstable_legacy-backwards":for(s=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&zl(e)===null){i.child=f;break}e=f.sibling,f.sibling=s,s=f,f=e}Bc(i,!0,s,null,g,u);break;case"together":Bc(i,!1,null,null,void 0,u);break;default:i.memoizedState=null}return i.child}function ni(e,i,s){if(e!==null&&(i.dependencies=e.dependencies),Ri|=i.lanes,(s&i.childLanes)===0)if(e!==null){if($a(e,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,s=Qn(e,e.pendingProps),i.child=s,s.return=i;e.sibling!==null;)e=e.sibling,s=s.sibling=Qn(e,e.pendingProps),s.return=i;s.sibling=null}return i.child}function qc(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&Nl(e)))}function Hv(e,i,s){switch(i.tag){case 3:Ue(i,i.stateNode.containerInfo),Si(i,ut,e.memoizedState.cache),na();break;case 27:case 5:tt(i);break;case 4:Ue(i,i.stateNode.containerInfo);break;case 10:Si(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,cc(i),null;break;case 13:var u=i.memoizedState;if(u!==null)return u.dehydrated!==null?(Ni(i),i.flags|=128,null):(s&i.child.childLanes)!==0?Tp(e,i,s):(Ni(i),e=ni(e,i,s),e!==null?e.sibling:null);Ni(i);break;case 19:var f=(e.flags&128)!==0;if(u=(s&i.childLanes)!==0,u||($a(e,i,s,!1),u=(s&i.childLanes)!==0),f){if(u)return Rp(e,i,s);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),j(lt,lt.current),u)break;return null;case 22:return i.lanes=0,Sp(e,i,s,i.pendingProps);case 24:Si(i,ut,e.memoizedState.cache)}return ni(e,i,s)}function Op(e,i,s){if(e!==null)if(e.memoizedProps!==i.pendingProps)dt=!0;else{if(!qc(e,s)&&(i.flags&128)===0)return dt=!1,Hv(e,i,s);dt=(e.flags&131072)!==0}else dt=!1,ze&&(i.flags&1048576)!==0&&cm(i,Kr,i.index);switch(i.lanes=0,i.tag){case 16:e:{var u=i.pendingProps;if(e=sa(i.elementType),i.type=e,typeof e=="function")Pu(e)?(u=ca(e,u),i.tag=1,i=Np(null,i,e,u,s)):(i.tag=0,i=Oc(null,i,e,u,s));else{if(e!=null){var f=e.$$typeof;if(f===P){i.tag=11,i=vp(null,i,e,u,s);break e}else if(f===Y){i.tag=14,i=wp(null,i,e,u,s);break e}}throw i=se(e)||e,Error(r(306,i,""))}}return i;case 0:return Oc(e,i,i.type,i.pendingProps,s);case 1:return u=i.type,f=ca(u,i.pendingProps),Np(e,i,u,f,s);case 3:e:{if(Ue(i,i.stateNode.containerInfo),e===null)throw Error(r(387));u=i.pendingProps;var g=i.memoizedState;f=g.element,rc(e,i),ts(i,u,null,s);var w=i.memoizedState;if(u=w.cache,Si(i,ut,u),u!==g.cache&&Wu(i,[ut],s,!0),es(),u=w.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:w.cache},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){i=Cp(e,i,u,s);break e}else if(u!==f){f=mn(Error(r(424)),i),Fr(f),i=Cp(e,i,u,s);break e}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(We=bn(e.firstChild),St=i,ze=!0,wi=null,yn=!0,s=Sm(i,null,u,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(na(),u===f){i=ni(e,i,s);break e}Et(e,i,u,s)}i=i.child}return i;case 26:return Yl(e,i),e===null?(s=Vg(i.type,null,i.pendingProps,null))?i.memoizedState=s:ze||(s=i.type,e=i.pendingProps,u=uo(ce.current).createElement(s),u[_t]=i,u[qt]=e,jt(u,s,e),vt(u),i.stateNode=u):i.memoizedState=Vg(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return tt(i),e===null&&ze&&(u=i.stateNode=Ig(i.type,i.pendingProps,ce.current),St=i,yn=!0,f=We,Ui(i.type)?(xd=f,We=bn(u.firstChild)):We=f),Et(e,i,i.pendingProps.children,s),Yl(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&ze&&((f=u=We)&&(u=y1(u,i.type,i.pendingProps,yn),u!==null?(i.stateNode=u,St=i,We=bn(u.firstChild),yn=!1,f=!0):f=!1),f||_i(i)),tt(i),f=i.type,g=i.pendingProps,w=e!==null?e.memoizedProps:null,u=g.children,hd(f,g)?u=null:w!==null&&hd(f,w)&&(i.flags|=32),i.memoizedState!==null&&(f=fc(e,i,Ov,null,null,s),ws._currentValue=f),Yl(e,i),Et(e,i,u,s),i.child;case 6:return e===null&&ze&&((e=s=We)&&(s=x1(s,i.pendingProps,yn),s!==null?(i.stateNode=s,St=i,We=null,e=!0):e=!1),e||_i(i)),null;case 13:return Tp(e,i,s);case 4:return Ue(i,i.stateNode.containerInfo),u=i.pendingProps,e===null?i.child=oa(i,null,u,s):Et(e,i,u,s),i.child;case 11:return vp(e,i,i.type,i.pendingProps,s);case 7:return Et(e,i,i.pendingProps,s),i.child;case 8:return Et(e,i,i.pendingProps.children,s),i.child;case 12:return Et(e,i,i.pendingProps.children,s),i.child;case 10:return u=i.pendingProps,Si(i,i.type,u.value),Et(e,i,u.children,s),i.child;case 9:return f=i.type._context,u=i.pendingProps.children,aa(i),f=kt(f),u=u(f),i.flags|=1,Et(e,i,u,s),i.child;case 14:return wp(e,i,i.type,i.pendingProps,s);case 15:return _p(e,i,i.type,i.pendingProps,s);case 19:return Rp(e,i,s);case 31:return Iv(e,i,s);case 22:return Sp(e,i,s,i.pendingProps);case 24:return aa(i),u=kt(ut),e===null?(f=nc(),f===null&&(f=Xe,g=ec(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=s),f=g),i.memoizedState={parent:u,cache:f},ac(i),Si(i,ut,f)):((e.lanes&s)!==0&&(rc(e,i),ts(i,null,null,s),es()),f=e.memoizedState,g=i.memoizedState,f.parent!==u?(f={parent:u,cache:u},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Si(i,ut,u)):(u=g.cache,Si(i,ut,u),u!==f.cache&&Wu(i,[ut],s,!0))),Et(e,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function ii(e){e.flags|=4}function Ic(e,i,s,u,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(rg())e.flags|=8192;else throw la=Rl,ic}else e.flags&=-16777217}function Dp(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Fg(i))if(rg())e.flags|=8192;else throw la=Rl,ic}function Fl(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?fh():536870912,e.lanes|=i,er|=i)}function ls(e,i){if(!ze)switch(e.tailMode){case"hidden":i=e.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function et(e){var i=e.alternate!==null&&e.alternate.child===e.child,s=0,u=0;if(i)for(var f=e.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)s|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=u,e.childLanes=s,i}function $v(e,i,s){var u=i.pendingProps;switch(Fu(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(i),null;case 1:return et(i),null;case 3:return s=i.stateNode,u=null,e!==null&&(u=e.memoizedState.cache),i.memoizedState.cache!==u&&(i.flags|=2048),Wn(ut),re(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ha(i)?ii(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Qu())),et(i),null;case 26:var f=i.type,g=i.memoizedState;return e===null?(ii(i),g!==null?(et(i),Dp(i,g)):(et(i),Ic(i,f,null,u,s))):g?g!==e.memoizedState?(ii(i),et(i),Dp(i,g)):(et(i),i.flags&=-16777217):(e=e.memoizedProps,e!==u&&ii(i),et(i),Ic(i,f,e,u,s)),null;case 27:if(me(i),s=ce.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==u&&ii(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return et(i),null}e=ie.current,Ha(i)?fm(i):(e=Ig(f,u,s),i.stateNode=e,ii(i))}return et(i),null;case 5:if(me(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==u&&ii(i);else{if(!u){if(i.stateNode===null)throw Error(r(166));return et(i),null}if(g=ie.current,Ha(i))fm(i);else{var w=uo(ce.current);switch(g){case 1:g=w.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=w.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=w.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=w.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof u.is=="string"?w.createElement("select",{is:u.is}):w.createElement("select"),u.multiple?g.multiple=!0:u.size&&(g.size=u.size);break;default:g=typeof u.is=="string"?w.createElement(f,{is:u.is}):w.createElement(f)}}g[_t]=i,g[qt]=u;e:for(w=i.child;w!==null;){if(w.tag===5||w.tag===6)g.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===i)break e;for(;w.sibling===null;){if(w.return===null||w.return===i)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}i.stateNode=g;e:switch(jt(g,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&ii(i)}}return et(i),Ic(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,s),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==u&&ii(i);else{if(typeof u!="string"&&i.stateNode===null)throw Error(r(166));if(e=ce.current,Ha(i)){if(e=i.stateNode,s=i.memoizedProps,u=null,f=St,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}e[_t]=i,e=!!(e.nodeValue===s||u!==null&&u.suppressHydrationWarning===!0||Tg(e.nodeValue,s)),e||_i(i,!0)}else e=uo(e).createTextNode(u),e[_t]=i,i.stateNode=e}return et(i),null;case 31:if(s=i.memoizedState,e===null||e.memoizedState!==null){if(u=Ha(i),s!==null){if(e===null){if(!u)throw Error(r(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[_t]=i}else na(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;et(i),e=!1}else s=Qu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return i.flags&256?(tn(i),i):(tn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return et(i),null;case 13:if(u=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Ha(i),u!==null&&u.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[_t]=i}else na(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;et(i),f=!1}else f=Qu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(tn(i),i):(tn(i),null)}return tn(i),(i.flags&128)!==0?(i.lanes=s,i):(s=u!==null,e=e!==null&&e.memoizedState!==null,s&&(u=i.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),g=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)),s!==e&&s&&(i.child.flags|=8192),Fl(i,i.updateQueue),et(i),null);case 4:return re(),e===null&&od(i.stateNode.containerInfo),et(i),null;case 10:return Wn(i.type),et(i),null;case 19:if(B(lt),u=i.memoizedState,u===null)return et(i),null;if(f=(i.flags&128)!==0,g=u.rendering,g===null)if(f)ls(u,!1);else{if(rt!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(g=zl(e),g!==null){for(i.flags|=128,ls(u,!1),e=g.updateQueue,i.updateQueue=e,Fl(i,e),i.subtreeFlags=0,e=s,s=i.child;s!==null;)lm(s,e),s=s.sibling;return j(lt,lt.current&1|2),ze&&Jn(i,u.treeForkCount),i.child}e=e.sibling}u.tail!==null&&Dt()>Wl&&(i.flags|=128,f=!0,ls(u,!1),i.lanes=4194304)}else{if(!f)if(e=zl(g),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,Fl(i,e),ls(u,!0),u.tail===null&&u.tailMode==="hidden"&&!g.alternate&&!ze)return et(i),null}else 2*Dt()-u.renderingStartTime>Wl&&s!==536870912&&(i.flags|=128,f=!0,ls(u,!1),i.lanes=4194304);u.isBackwards?(g.sibling=i.child,i.child=g):(e=u.last,e!==null?e.sibling=g:i.child=g,u.last=g)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=Dt(),e.sibling=null,s=lt.current,j(lt,f?s&1|2:s&1),ze&&Jn(i,u.treeForkCount),e):(et(i),null);case 22:case 23:return tn(i),uc(),u=i.memoizedState!==null,e!==null?e.memoizedState!==null!==u&&(i.flags|=8192):u&&(i.flags|=8192),u?(s&536870912)!==0&&(i.flags&128)===0&&(et(i),i.subtreeFlags&6&&(i.flags|=8192)):et(i),s=i.updateQueue,s!==null&&Fl(i,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),u=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(u=i.memoizedState.cachePool.pool),u!==s&&(i.flags|=2048),e!==null&&B(ra),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),Wn(ut),et(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function Vv(e,i){switch(Fu(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return Wn(ut),re(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return me(i),null;case 31:if(i.memoizedState!==null){if(tn(i),i.alternate===null)throw Error(r(340));na()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(tn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));na()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return B(lt),null;case 4:return re(),null;case 10:return Wn(i.type),null;case 22:case 23:return tn(i),uc(),e!==null&&B(ra),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return Wn(ut),null;case 25:return null;default:return null}}function Lp(e,i){switch(Fu(i),i.tag){case 3:Wn(ut),re();break;case 26:case 27:case 5:me(i);break;case 4:re();break;case 31:i.memoizedState!==null&&tn(i);break;case 13:tn(i);break;case 19:B(lt);break;case 10:Wn(i.type);break;case 22:case 23:tn(i),uc(),e!==null&&B(ra);break;case 24:Wn(ut)}}function os(e,i){try{var s=i.updateQueue,u=s!==null?s.lastEffect:null;if(u!==null){var f=u.next;s=f;do{if((s.tag&e)===e){u=void 0;var g=s.create,w=s.inst;u=g(),w.destroy=u}s=s.next}while(s!==f)}}catch(_){Ve(i,i.return,_)}}function Ti(e,i,s){try{var u=i.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&e)===e){var w=u.inst,_=w.destroy;if(_!==void 0){w.destroy=void 0,f=i;var O=s,H=_;try{H()}catch(G){Ve(f,O,G)}}}u=u.next}while(u!==g)}}catch(G){Ve(i,i.return,G)}}function zp(e){var i=e.updateQueue;if(i!==null){var s=e.stateNode;try{Em(i,s)}catch(u){Ve(e,e.return,u)}}}function Up(e,i,s){s.props=ca(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(u){Ve(e,i,u)}}function us(e,i){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var u=e.stateNode;break;case 30:u=e.stateNode;break;default:u=e.stateNode}typeof s=="function"?e.refCleanup=s(u):s.current=u}}catch(f){Ve(e,i,f)}}function zn(e,i){var s=e.ref,u=e.refCleanup;if(s!==null)if(typeof u=="function")try{u()}catch(f){Ve(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){Ve(e,i,f)}else s.current=null}function Mp(e){var i=e.type,s=e.memoizedProps,u=e.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&u.focus();break e;case"img":s.src?u.src=s.src:s.srcSet&&(u.srcset=s.srcSet)}}catch(f){Ve(e,e.return,f)}}function Hc(e,i,s){try{var u=e.stateNode;d1(u,e.type,s,i),u[qt]=i}catch(f){Ve(e,e.return,f)}}function Bp(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Ui(e.type)||e.tag===4}function $c(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Bp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Ui(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vc(e,i,s){var u=e.tag;if(u===5||u===6)e=e.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(e),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Fn));else if(u!==4&&(u===27&&Ui(e.type)&&(s=e.stateNode,i=null),e=e.child,e!==null))for(Vc(e,i,s),e=e.sibling;e!==null;)Vc(e,i,s),e=e.sibling}function Xl(e,i,s){var u=e.tag;if(u===5||u===6)e=e.stateNode,i?s.insertBefore(e,i):s.appendChild(e);else if(u!==4&&(u===27&&Ui(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Xl(e,i,s),e=e.sibling;e!==null;)Xl(e,i,s),e=e.sibling}function qp(e){var i=e.stateNode,s=e.memoizedProps;try{for(var u=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);jt(i,u,s),i[_t]=e,i[qt]=s}catch(g){Ve(e,e.return,g)}}var ai=!1,ft=!1,Pc=!1,Ip=typeof WeakSet=="function"?WeakSet:Set,wt=null;function Pv(e,i){if(e=e.containerInfo,dd=yo,e=Zh(e),Mu(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{s.nodeType,g.nodeType}catch{s=null;break e}var w=0,_=-1,O=-1,H=0,G=0,Q=e,$=null;t:for(;;){for(var V;Q!==s||f!==0&&Q.nodeType!==3||(_=w+f),Q!==g||u!==0&&Q.nodeType!==3||(O=w+u),Q.nodeType===3&&(w+=Q.nodeValue.length),(V=Q.firstChild)!==null;)$=Q,Q=V;for(;;){if(Q===e)break t;if($===s&&++H===f&&(_=w),$===g&&++G===u&&(O=w),(V=Q.nextSibling)!==null)break;Q=$,$=Q.parentNode}Q=V}s=_===-1||O===-1?null:{start:_,end:O}}else s=null}s=s||{start:0,end:0}}else s=null;for(fd={focusedElem:e,selectionRange:s},yo=!1,wt=i;wt!==null;)if(i=wt,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,wt=e;else for(;wt!==null;){switch(i=wt,g=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)f=e[s],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,s=i,f=g.memoizedProps,g=g.memoizedState,u=s.stateNode;try{var he=ca(s.type,f);e=u.getSnapshotBeforeUpdate(he,g),u.__reactInternalSnapshotBeforeUpdate=e}catch(be){Ve(s,s.return,be)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,s=e.nodeType,s===9)pd(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":pd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,wt=e;break}wt=i.return}}function Hp(e,i,s){var u=s.flags;switch(s.tag){case 0:case 11:case 15:si(e,s),u&4&&os(5,s);break;case 1:if(si(e,s),u&4)if(e=s.stateNode,i===null)try{e.componentDidMount()}catch(w){Ve(s,s.return,w)}else{var f=ca(s.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(w){Ve(s,s.return,w)}}u&64&&zp(s),u&512&&us(s,s.return);break;case 3:if(si(e,s),u&64&&(e=s.updateQueue,e!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{Em(e,i)}catch(w){Ve(s,s.return,w)}}break;case 27:i===null&&u&4&&qp(s);case 26:case 5:si(e,s),i===null&&u&4&&Mp(s),u&512&&us(s,s.return);break;case 12:si(e,s);break;case 31:si(e,s),u&4&&Pp(e,s);break;case 13:si(e,s),u&4&&Gp(e,s),u&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Wv.bind(null,s),b1(e,s))));break;case 22:if(u=s.memoizedState!==null||ai,!u){i=i!==null&&i.memoizedState!==null||ft,f=ai;var g=ft;ai=u,(ft=i)&&!g?li(e,s,(s.subtreeFlags&8772)!==0):si(e,s),ai=f,ft=g}break;case 30:break;default:si(e,s)}}function $p(e){var i=e.alternate;i!==null&&(e.alternate=null,$p(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&vu(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var nt=null,Ht=!1;function ri(e,i,s){for(s=s.child;s!==null;)Vp(e,i,s),s=s.sibling}function Vp(e,i,s){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(Lt,s)}catch{}switch(s.tag){case 26:ft||zn(s,i),ri(e,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:ft||zn(s,i);var u=nt,f=Ht;Ui(s.type)&&(nt=s.stateNode,Ht=!1),ri(e,i,s),xs(s.stateNode),nt=u,Ht=f;break;case 5:ft||zn(s,i);case 6:if(u=nt,f=Ht,nt=null,ri(e,i,s),nt=u,Ht=f,nt!==null)if(Ht)try{(nt.nodeType===9?nt.body:nt.nodeName==="HTML"?nt.ownerDocument.body:nt).removeChild(s.stateNode)}catch(g){Ve(s,i,g)}else try{nt.removeChild(s.stateNode)}catch(g){Ve(s,i,g)}break;case 18:nt!==null&&(Ht?(e=nt,zg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),or(e)):zg(nt,s.stateNode));break;case 4:u=nt,f=Ht,nt=s.stateNode.containerInfo,Ht=!0,ri(e,i,s),nt=u,Ht=f;break;case 0:case 11:case 14:case 15:Ti(2,s,i),ft||Ti(4,s,i),ri(e,i,s);break;case 1:ft||(zn(s,i),u=s.stateNode,typeof u.componentWillUnmount=="function"&&Up(s,i,u)),ri(e,i,s);break;case 21:ri(e,i,s);break;case 22:ft=(u=ft)||s.memoizedState!==null,ri(e,i,s),ft=u;break;default:ri(e,i,s)}}function Pp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{or(e)}catch(s){Ve(i,i.return,s)}}}function Gp(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{or(e)}catch(s){Ve(i,i.return,s)}}function Gv(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new Ip),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new Ip),i;default:throw Error(r(435,e.tag))}}function Ql(e,i){var s=Gv(e);i.forEach(function(u){if(!s.has(u)){s.add(u);var f=e1.bind(null,e,u);u.then(f,f)}})}function $t(e,i){var s=i.deletions;if(s!==null)for(var u=0;u<s.length;u++){var f=s[u],g=e,w=i,_=w;e:for(;_!==null;){switch(_.tag){case 27:if(Ui(_.type)){nt=_.stateNode,Ht=!1;break e}break;case 5:nt=_.stateNode,Ht=!1;break e;case 3:case 4:nt=_.stateNode.containerInfo,Ht=!0;break e}_=_.return}if(nt===null)throw Error(r(160));Vp(g,w,f),nt=null,Ht=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Yp(i,e),i=i.sibling}var jn=null;function Yp(e,i){var s=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:$t(i,e),Vt(e),u&4&&(Ti(3,e,e.return),os(3,e),Ti(5,e,e.return));break;case 1:$t(i,e),Vt(e),u&512&&(ft||s===null||zn(s,s.return)),u&64&&ai&&(e=e.updateQueue,e!==null&&(u=e.callbacks,u!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?u:s.concat(u))));break;case 26:var f=jn;if($t(i,e),Vt(e),u&512&&(ft||s===null||zn(s,s.return)),u&4){var g=s!==null?s.memoizedState:null;if(u=e.memoizedState,s===null)if(u===null)if(e.stateNode===null){e:{u=e.type,s=e.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Ur]||g[_t]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),jt(g,u,s),g[_t]=e,vt(g),u=g;break e;case"link":var w=Yg("link","href",f).get(u+(s.href||""));if(w){for(var _=0;_<w.length;_++)if(g=w[_],g.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&g.getAttribute("rel")===(s.rel==null?null:s.rel)&&g.getAttribute("title")===(s.title==null?null:s.title)&&g.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){w.splice(_,1);break t}}g=f.createElement(u),jt(g,u,s),f.head.appendChild(g);break;case"meta":if(w=Yg("meta","content",f).get(u+(s.content||""))){for(_=0;_<w.length;_++)if(g=w[_],g.getAttribute("content")===(s.content==null?null:""+s.content)&&g.getAttribute("name")===(s.name==null?null:s.name)&&g.getAttribute("property")===(s.property==null?null:s.property)&&g.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&g.getAttribute("charset")===(s.charSet==null?null:s.charSet)){w.splice(_,1);break t}}g=f.createElement(u),jt(g,u,s),f.head.appendChild(g);break;default:throw Error(r(468,u))}g[_t]=e,vt(g),u=g}e.stateNode=u}else Kg(f,e.type,e.stateNode);else e.stateNode=Gg(f,u,e.memoizedProps);else g!==u?(g===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):g.count--,u===null?Kg(f,e.type,e.stateNode):Gg(f,u,e.memoizedProps)):u===null&&e.stateNode!==null&&Hc(e,e.memoizedProps,s.memoizedProps)}break;case 27:$t(i,e),Vt(e),u&512&&(ft||s===null||zn(s,s.return)),s!==null&&u&4&&Hc(e,e.memoizedProps,s.memoizedProps);break;case 5:if($t(i,e),Vt(e),u&512&&(ft||s===null||zn(s,s.return)),e.flags&32){f=e.stateNode;try{Ra(f,"")}catch(he){Ve(e,e.return,he)}}u&4&&e.stateNode!=null&&(f=e.memoizedProps,Hc(e,f,s!==null?s.memoizedProps:f)),u&1024&&(Pc=!0);break;case 6:if($t(i,e),Vt(e),u&4){if(e.stateNode===null)throw Error(r(162));u=e.memoizedProps,s=e.stateNode;try{s.nodeValue=u}catch(he){Ve(e,e.return,he)}}break;case 3:if(ho=null,f=jn,jn=co(i.containerInfo),$t(i,e),jn=f,Vt(e),u&4&&s!==null&&s.memoizedState.isDehydrated)try{or(i.containerInfo)}catch(he){Ve(e,e.return,he)}Pc&&(Pc=!1,Kp(e));break;case 4:u=jn,jn=co(e.stateNode.containerInfo),$t(i,e),Vt(e),jn=u;break;case 12:$t(i,e),Vt(e);break;case 31:$t(i,e),Vt(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,Ql(e,u)));break;case 13:$t(i,e),Vt(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Zl=Dt()),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,Ql(e,u)));break;case 22:f=e.memoizedState!==null;var O=s!==null&&s.memoizedState!==null,H=ai,G=ft;if(ai=H||f,ft=G||O,$t(i,e),ft=G,ai=H,Vt(e),u&8192)e:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(s===null||O||ai||ft||da(e)),s=null,i=e;;){if(i.tag===5||i.tag===26){if(s===null){O=s=i;try{if(g=O.stateNode,f)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{_=O.stateNode;var Q=O.memoizedProps.style,$=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;_.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(he){Ve(O,O.return,he)}}}else if(i.tag===6){if(s===null){O=i;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(he){Ve(O,O.return,he)}}}else if(i.tag===18){if(s===null){O=i;try{var V=O.stateNode;f?Ug(V,!0):Ug(O.stateNode,!1)}catch(he){Ve(O,O.return,he)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}u&4&&(u=e.updateQueue,u!==null&&(s=u.retryQueue,s!==null&&(u.retryQueue=null,Ql(e,s))));break;case 19:$t(i,e),Vt(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,Ql(e,u)));break;case 30:break;case 21:break;default:$t(i,e),Vt(e)}}function Vt(e){var i=e.flags;if(i&2){try{for(var s,u=e.return;u!==null;){if(Bp(u)){s=u;break}u=u.return}if(s==null)throw Error(r(160));switch(s.tag){case 27:var f=s.stateNode,g=$c(e);Xl(e,g,f);break;case 5:var w=s.stateNode;s.flags&32&&(Ra(w,""),s.flags&=-33);var _=$c(e);Xl(e,_,w);break;case 3:case 4:var O=s.stateNode.containerInfo,H=$c(e);Vc(e,H,O);break;default:throw Error(r(161))}}catch(G){Ve(e,e.return,G)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function Kp(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;Kp(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function si(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Hp(e,i.alternate,i),i=i.sibling}function da(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Ti(4,i,i.return),da(i);break;case 1:zn(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&Up(i,i.return,s),da(i);break;case 27:xs(i.stateNode);case 26:case 5:zn(i,i.return),da(i);break;case 22:i.memoizedState===null&&da(i);break;case 30:da(i);break;default:da(i)}e=e.sibling}}function li(e,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var u=i.alternate,f=e,g=i,w=g.flags;switch(g.tag){case 0:case 11:case 15:li(f,g,s),os(4,g);break;case 1:if(li(f,g,s),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){Ve(u,u.return,H)}if(u=g,f=u.updateQueue,f!==null){var _=u.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)km(O[f],_)}catch(H){Ve(u,u.return,H)}}s&&w&64&&zp(g),us(g,g.return);break;case 27:qp(g);case 26:case 5:li(f,g,s),s&&u===null&&w&4&&Mp(g),us(g,g.return);break;case 12:li(f,g,s);break;case 31:li(f,g,s),s&&w&4&&Pp(f,g);break;case 13:li(f,g,s),s&&w&4&&Gp(f,g);break;case 22:g.memoizedState===null&&li(f,g,s),us(g,g.return);break;case 30:break;default:li(f,g,s)}i=i.sibling}}function Gc(e,i){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Xr(s))}function Yc(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Xr(e))}function Nn(e,i,s,u){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Fp(e,i,s,u),i=i.sibling}function Fp(e,i,s,u){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Nn(e,i,s,u),f&2048&&os(9,i);break;case 1:Nn(e,i,s,u);break;case 3:Nn(e,i,s,u),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&Xr(e)));break;case 12:if(f&2048){Nn(e,i,s,u),e=i.stateNode;try{var g=i.memoizedProps,w=g.id,_=g.onPostCommit;typeof _=="function"&&_(w,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){Ve(i,i.return,O)}}else Nn(e,i,s,u);break;case 31:Nn(e,i,s,u);break;case 13:Nn(e,i,s,u);break;case 23:break;case 22:g=i.stateNode,w=i.alternate,i.memoizedState!==null?g._visibility&2?Nn(e,i,s,u):cs(e,i):g._visibility&2?Nn(e,i,s,u):(g._visibility|=2,Ja(e,i,s,u,(i.subtreeFlags&10256)!==0||!1)),f&2048&&Gc(w,i);break;case 24:Nn(e,i,s,u),f&2048&&Yc(i.alternate,i);break;default:Nn(e,i,s,u)}}function Ja(e,i,s,u,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var g=e,w=i,_=s,O=u,H=w.flags;switch(w.tag){case 0:case 11:case 15:Ja(g,w,_,O,f),os(8,w);break;case 23:break;case 22:var G=w.stateNode;w.memoizedState!==null?G._visibility&2?Ja(g,w,_,O,f):cs(g,w):(G._visibility|=2,Ja(g,w,_,O,f)),f&&H&2048&&Gc(w.alternate,w);break;case 24:Ja(g,w,_,O,f),f&&H&2048&&Yc(w.alternate,w);break;default:Ja(g,w,_,O,f)}i=i.sibling}}function cs(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=e,u=i,f=u.flags;switch(u.tag){case 22:cs(s,u),f&2048&&Gc(u.alternate,u);break;case 24:cs(s,u),f&2048&&Yc(u.alternate,u);break;default:cs(s,u)}i=i.sibling}}var ds=8192;function Za(e,i,s){if(e.subtreeFlags&ds)for(e=e.child;e!==null;)Xp(e,i,s),e=e.sibling}function Xp(e,i,s){switch(e.tag){case 26:Za(e,i,s),e.flags&ds&&e.memoizedState!==null&&R1(s,jn,e.memoizedState,e.memoizedProps);break;case 5:Za(e,i,s);break;case 3:case 4:var u=jn;jn=co(e.stateNode.containerInfo),Za(e,i,s),jn=u;break;case 22:e.memoizedState===null&&(u=e.alternate,u!==null&&u.memoizedState!==null?(u=ds,ds=16777216,Za(e,i,s),ds=u):Za(e,i,s));break;default:Za(e,i,s)}}function Qp(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function fs(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var u=i[s];wt=u,Zp(u,e)}Qp(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Jp(e),e=e.sibling}function Jp(e){switch(e.tag){case 0:case 11:case 15:fs(e),e.flags&2048&&Ti(9,e,e.return);break;case 3:fs(e);break;case 12:fs(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Jl(e)):fs(e);break;default:fs(e)}}function Jl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var u=i[s];wt=u,Zp(u,e)}Qp(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Ti(8,i,i.return),Jl(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,Jl(i));break;default:Jl(i)}e=e.sibling}}function Zp(e,i){for(;wt!==null;){var s=wt;switch(s.tag){case 0:case 11:case 15:Ti(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var u=s.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Xr(s.memoizedState.cache)}if(u=s.child,u!==null)u.return=s,wt=u;else e:for(s=e;wt!==null;){u=wt;var f=u.sibling,g=u.return;if($p(u),u===s){wt=null;break e}if(f!==null){f.return=g,wt=f;break e}wt=g}}}var Yv={getCacheForType:function(e){var i=kt(ut),s=i.data.get(e);return s===void 0&&(s=e(),i.data.set(e,s)),s},cacheSignal:function(){return kt(ut).controller.signal}},Kv=typeof WeakMap=="function"?WeakMap:Map,qe=0,Xe=null,Re=null,De=0,$e=0,nn=null,Ai=!1,Wa=!1,Kc=!1,oi=0,rt=0,Ri=0,fa=0,Fc=0,an=0,er=0,hs=null,Pt=null,Xc=!1,Zl=0,Wp=0,Wl=1/0,eo=null,Oi=null,yt=0,Di=null,tr=null,ui=0,Qc=0,Jc=null,eg=null,ms=0,Zc=null;function rn(){return(qe&2)!==0&&De!==0?De&-De:M.T!==null?ad():gh()}function tg(){if(an===0)if((De&536870912)===0||ze){var e=ol;ol<<=1,(ol&3932160)===0&&(ol=262144),an=e}else an=536870912;return e=en.current,e!==null&&(e.flags|=32),an}function Gt(e,i,s){(e===Xe&&($e===2||$e===9)||e.cancelPendingCommit!==null)&&(nr(e,0),Li(e,De,an,!1)),zr(e,s),((qe&2)===0||e!==Xe)&&(e===Xe&&((qe&2)===0&&(fa|=s),rt===4&&Li(e,De,an,!1)),Un(e))}function ng(e,i,s){if((qe&6)!==0)throw Error(r(327));var u=!s&&(i&127)===0&&(i&e.expiredLanes)===0||Lr(e,i),f=u?Qv(e,i):ed(e,i,!0),g=u;do{if(f===0){Wa&&!u&&Li(e,i,0,!1);break}else{if(s=e.current.alternate,g&&!Fv(s)){f=ed(e,i,!1),g=!1;continue}if(f===2){if(g=i,e.errorRecoveryDisabledLanes&g)var w=0;else w=e.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){i=w;e:{var _=e;f=hs;var O=_.current.memoizedState.isDehydrated;if(O&&(nr(_,w).flags|=256),w=ed(_,w,!1),w!==2){if(Kc&&!O){_.errorRecoveryDisabledLanes|=g,fa|=g,f=4;break e}g=Pt,Pt=f,g!==null&&(Pt===null?Pt=g:Pt.push.apply(Pt,g))}f=w}if(g=!1,f!==2)continue}}if(f===1){nr(e,0),Li(e,i,0,!0);break}e:{switch(u=e,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Li(u,i,an,!Ai);break e;case 2:Pt=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=Zl+300-Dt(),10<f)){if(Li(u,i,an,!Ai),cl(u,0,!0)!==0)break e;ui=i,u.timeoutHandle=Dg(ig.bind(null,u,s,Pt,eo,Xc,i,an,fa,er,Ai,g,"Throttled",-0,0),f);break e}ig(u,s,Pt,eo,Xc,i,an,fa,er,Ai,g,null,-0,0)}}break}while(!0);Un(e)}function ig(e,i,s,u,f,g,w,_,O,H,G,Q,$,V){if(e.timeoutHandle=-1,Q=i.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Fn},Xp(i,g,Q);var he=(g&62914560)===g?Zl-Dt():(g&4194048)===g?Wp-Dt():0;if(he=O1(Q,he),he!==null){ui=g,e.cancelPendingCommit=he(dg.bind(null,e,i,g,s,u,f,w,_,O,G,Q,null,$,V)),Li(e,g,w,!H);return}}dg(e,i,g,s,u,f,w,_,O)}function Fv(e){for(var i=e;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var u=0;u<s.length;u++){var f=s[u],g=f.getSnapshot;f=f.value;try{if(!Zt(g(),f))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Li(e,i,s,u){i&=~Fc,i&=~fa,e.suspendedLanes|=i,e.pingedLanes&=~i,u&&(e.warmLanes|=i),u=e.expirationTimes;for(var f=i;0<f;){var g=31-Fe(f),w=1<<g;u[g]=-1,f&=~w}s!==0&&hh(e,s,i)}function to(){return(qe&6)===0?(ps(0),!1):!0}function Wc(){if(Re!==null){if($e===0)var e=Re.return;else e=Re,Zn=ia=null,pc(e),Ya=null,Jr=0,e=Re;for(;e!==null;)Lp(e.alternate,e),e=e.return;Re=null}}function nr(e,i){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,m1(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),ui=0,Wc(),Xe=e,Re=s=Qn(e.current,null),De=i,$e=0,nn=null,Ai=!1,Wa=Lr(e,i),Kc=!1,er=an=Fc=fa=Ri=rt=0,Pt=hs=null,Xc=!1,(i&8)!==0&&(i|=i&32);var u=e.entangledLanes;if(u!==0)for(e=e.entanglements,u&=i;0<u;){var f=31-Fe(u),g=1<<f;i|=e[f],u&=~g}return oi=i,_l(),s}function ag(e,i){Ne=null,M.H=rs,i===Ga||i===Al?(i=vm(),$e=3):i===ic?(i=vm(),$e=4):$e=i===Rc?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,nn=i,Re===null&&(rt=1,Pl(e,mn(i,e.current)))}function rg(){var e=en.current;return e===null?!0:(De&4194048)===De?xn===null:(De&62914560)===De||(De&536870912)!==0?e===xn:!1}function sg(){var e=M.H;return M.H=rs,e===null?rs:e}function lg(){var e=M.A;return M.A=Yv,e}function no(){rt=4,Ai||(De&4194048)!==De&&en.current!==null||(Wa=!0),(Ri&134217727)===0&&(fa&134217727)===0||Xe===null||Li(Xe,De,an,!1)}function ed(e,i,s){var u=qe;qe|=2;var f=sg(),g=lg();(Xe!==e||De!==i)&&(eo=null,nr(e,i)),i=!1;var w=rt;e:do try{if($e!==0&&Re!==null){var _=Re,O=nn;switch($e){case 8:Wc(),w=6;break e;case 3:case 2:case 9:case 6:en.current===null&&(i=!0);var H=$e;if($e=0,nn=null,ir(e,_,O,H),s&&Wa){w=0;break e}break;default:H=$e,$e=0,nn=null,ir(e,_,O,H)}}Xv(),w=rt;break}catch(G){ag(e,G)}while(!0);return i&&e.shellSuspendCounter++,Zn=ia=null,qe=u,M.H=f,M.A=g,Re===null&&(Xe=null,De=0,_l()),w}function Xv(){for(;Re!==null;)og(Re)}function Qv(e,i){var s=qe;qe|=2;var u=sg(),f=lg();Xe!==e||De!==i?(eo=null,Wl=Dt()+500,nr(e,i)):Wa=Lr(e,i);e:do try{if($e!==0&&Re!==null){i=Re;var g=nn;t:switch($e){case 1:$e=0,nn=null,ir(e,i,g,1);break;case 2:case 9:if(xm(g)){$e=0,nn=null,ug(i);break}i=function(){$e!==2&&$e!==9||Xe!==e||($e=7),Un(e)},g.then(i,i);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:xm(g)?($e=0,nn=null,ug(i)):($e=0,nn=null,ir(e,i,g,7));break;case 5:var w=null;switch(Re.tag){case 26:w=Re.memoizedState;case 5:case 27:var _=Re;if(w?Fg(w):_.stateNode.complete){$e=0,nn=null;var O=_.sibling;if(O!==null)Re=O;else{var H=_.return;H!==null?(Re=H,io(H)):Re=null}break t}}$e=0,nn=null,ir(e,i,g,5);break;case 6:$e=0,nn=null,ir(e,i,g,6);break;case 8:Wc(),rt=6;break e;default:throw Error(r(462))}}Jv();break}catch(G){ag(e,G)}while(!0);return Zn=ia=null,M.H=u,M.A=f,qe=s,Re!==null?0:(Xe=null,De=0,_l(),rt)}function Jv(){for(;Re!==null&&!hu();)og(Re)}function og(e){var i=Op(e.alternate,e,oi);e.memoizedProps=e.pendingProps,i===null?io(e):Re=i}function ug(e){var i=e,s=i.alternate;switch(i.tag){case 15:case 0:i=jp(s,i,i.pendingProps,i.type,void 0,De);break;case 11:i=jp(s,i,i.pendingProps,i.type.render,i.ref,De);break;case 5:pc(i);default:Lp(s,i),i=Re=lm(i,oi),i=Op(s,i,oi)}e.memoizedProps=e.pendingProps,i===null?io(e):Re=i}function ir(e,i,s,u){Zn=ia=null,pc(i),Ya=null,Jr=0;var f=i.return;try{if(qv(e,f,i,s,De)){rt=1,Pl(e,mn(s,e.current)),Re=null;return}}catch(g){if(f!==null)throw Re=f,g;rt=1,Pl(e,mn(s,e.current)),Re=null;return}i.flags&32768?(ze||u===1?e=!0:Wa||(De&536870912)!==0?e=!1:(Ai=e=!0,(u===2||u===9||u===3||u===6)&&(u=en.current,u!==null&&u.tag===13&&(u.flags|=16384))),cg(i,e)):io(i)}function io(e){var i=e;do{if((i.flags&32768)!==0){cg(i,Ai);return}e=i.return;var s=$v(i.alternate,i,oi);if(s!==null){Re=s;return}if(i=i.sibling,i!==null){Re=i;return}Re=i=e}while(i!==null);rt===0&&(rt=5)}function cg(e,i){do{var s=Vv(e.alternate,e);if(s!==null){s.flags&=32767,Re=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(e=e.sibling,e!==null)){Re=e;return}Re=e=s}while(e!==null);rt=6,Re=null}function dg(e,i,s,u,f,g,w,_,O){e.cancelPendingCommit=null;do ao();while(yt!==0);if((qe&6)!==0)throw Error(r(327));if(i!==null){if(i===e.current)throw Error(r(177));if(g=i.lanes|i.childLanes,g|=$u,Ab(e,s,g,w,_,O),e===Xe&&(Re=Xe=null,De=0),tr=i,Di=e,ui=s,Qc=g,Jc=f,eg=u,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,t1(Se,function(){return gg(),null})):(e.callbackNode=null,e.callbackPriority=0),u=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||u){u=M.T,M.T=null,f=J.p,J.p=2,w=qe,qe|=4;try{Pv(e,i,s)}finally{qe=w,J.p=f,M.T=u}}yt=1,fg(),hg(),mg()}}function fg(){if(yt===1){yt=0;var e=Di,i=tr,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=M.T,M.T=null;var u=J.p;J.p=2;var f=qe;qe|=4;try{Yp(i,e);var g=fd,w=Zh(e.containerInfo),_=g.focusedElem,O=g.selectionRange;if(w!==_&&_&&_.ownerDocument&&Jh(_.ownerDocument.documentElement,_)){if(O!==null&&Mu(_)){var H=O.start,G=O.end;if(G===void 0&&(G=H),"selectionStart"in _)_.selectionStart=H,_.selectionEnd=Math.min(G,_.value.length);else{var Q=_.ownerDocument||document,$=Q&&Q.defaultView||window;if($.getSelection){var V=$.getSelection(),he=_.textContent.length,be=Math.min(O.start,he),Ye=O.end===void 0?be:Math.min(O.end,he);!V.extend&&be>Ye&&(w=Ye,Ye=be,be=w);var U=Qh(_,be),D=Qh(_,Ye);if(U&&D&&(V.rangeCount!==1||V.anchorNode!==U.node||V.anchorOffset!==U.offset||V.focusNode!==D.node||V.focusOffset!==D.offset)){var q=Q.createRange();q.setStart(U.node,U.offset),V.removeAllRanges(),be>Ye?(V.addRange(q),V.extend(D.node,D.offset)):(q.setEnd(D.node,D.offset),V.addRange(q))}}}}for(Q=[],V=_;V=V.parentNode;)V.nodeType===1&&Q.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<Q.length;_++){var X=Q[_];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}yo=!!dd,fd=dd=null}finally{qe=f,J.p=u,M.T=s}}e.current=i,yt=2}}function hg(){if(yt===2){yt=0;var e=Di,i=tr,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=M.T,M.T=null;var u=J.p;J.p=2;var f=qe;qe|=4;try{Hp(e,i.alternate,i)}finally{qe=f,J.p=u,M.T=s}}yt=3}}function mg(){if(yt===4||yt===3){yt=0,mu();var e=Di,i=tr,s=ui,u=eg;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?yt=5:(yt=0,tr=Di=null,pg(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Oi=null),xu(s),i=i.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(Lt,i,void 0,(i.current.flags&128)===128)}catch{}if(u!==null){i=M.T,f=J.p,J.p=2,M.T=null;try{for(var g=e.onRecoverableError,w=0;w<u.length;w++){var _=u[w];g(_.value,{componentStack:_.stack})}}finally{M.T=i,J.p=f}}(ui&3)!==0&&ao(),Un(e),f=e.pendingLanes,(s&261930)!==0&&(f&42)!==0?e===Zc?ms++:(ms=0,Zc=e):ms=0,ps(0)}}function pg(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,Xr(i)))}function ao(){return fg(),hg(),mg(),gg()}function gg(){if(yt!==5)return!1;var e=Di,i=Qc;Qc=0;var s=xu(ui),u=M.T,f=J.p;try{J.p=32>s?32:s,M.T=null,s=Jc,Jc=null;var g=Di,w=ui;if(yt=0,tr=Di=null,ui=0,(qe&6)!==0)throw Error(r(331));var _=qe;if(qe|=4,Jp(g.current),Fp(g,g.current,w,s),qe=_,ps(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(Lt,g)}catch{}return!0}finally{J.p=f,M.T=u,pg(e,i)}}function yg(e,i,s){i=mn(s,i),i=Ac(e.stateNode,i,2),e=ji(e,i,2),e!==null&&(zr(e,2),Un(e))}function Ve(e,i,s){if(e.tag===3)yg(e,e,s);else for(;i!==null;){if(i.tag===3){yg(i,e,s);break}else if(i.tag===1){var u=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Oi===null||!Oi.has(u))){e=mn(s,e),s=xp(2),u=ji(i,s,2),u!==null&&(bp(s,u,i,e),zr(u,2),Un(u));break}}i=i.return}}function td(e,i,s){var u=e.pingCache;if(u===null){u=e.pingCache=new Kv;var f=new Set;u.set(i,f)}else f=u.get(i),f===void 0&&(f=new Set,u.set(i,f));f.has(s)||(Kc=!0,f.add(s),e=Zv.bind(null,e,i,s),i.then(e,e))}function Zv(e,i,s){var u=e.pingCache;u!==null&&u.delete(i),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Xe===e&&(De&s)===s&&(rt===4||rt===3&&(De&62914560)===De&&300>Dt()-Zl?(qe&2)===0&&nr(e,0):Fc|=s,er===De&&(er=0)),Un(e)}function xg(e,i){i===0&&(i=fh()),e=ea(e,i),e!==null&&(zr(e,i),Un(e))}function Wv(e){var i=e.memoizedState,s=0;i!==null&&(s=i.retryLane),xg(e,s)}function e1(e,i){var s=0;switch(e.tag){case 31:case 13:var u=e.stateNode,f=e.memoizedState;f!==null&&(s=f.retryLane);break;case 19:u=e.stateNode;break;case 22:u=e.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(i),xg(e,s)}function t1(e,i){return ka(e,i)}var ro=null,ar=null,nd=!1,so=!1,id=!1,zi=0;function Un(e){e!==ar&&e.next===null&&(ar===null?ro=ar=e:ar=ar.next=e),so=!0,nd||(nd=!0,i1())}function ps(e,i){if(!id&&so){id=!0;do for(var s=!1,u=ro;u!==null;){if(e!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var w=u.suspendedLanes,_=u.pingedLanes;g=(1<<31-Fe(42|e)+1)-1,g&=f&~(w&~_),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(s=!0,_g(u,g))}else g=De,g=cl(u,u===Xe?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||Lr(u,g)||(s=!0,_g(u,g));u=u.next}while(s);id=!1}}function n1(){bg()}function bg(){so=nd=!1;var e=0;zi!==0&&h1()&&(e=zi);for(var i=Dt(),s=null,u=ro;u!==null;){var f=u.next,g=vg(u,i);g===0?(u.next=null,s===null?ro=f:s.next=f,f===null&&(ar=s)):(s=u,(e!==0||(g&3)!==0)&&(so=!0)),u=f}yt!==0&&yt!==5||ps(e),zi!==0&&(zi=0)}function vg(e,i){for(var s=e.suspendedLanes,u=e.pingedLanes,f=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var w=31-Fe(g),_=1<<w,O=f[w];O===-1?((_&s)===0||(_&u)!==0)&&(f[w]=Tb(_,i)):O<=i&&(e.expiredLanes|=_),g&=~_}if(i=Xe,s=De,s=cl(e,e===i?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u=e.callbackNode,s===0||e===i&&($e===2||$e===9)||e.cancelPendingCommit!==null)return u!==null&&u!==null&&Dr(u),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Lr(e,s)){if(i=s&-s,i===e.callbackPriority)return i;switch(u!==null&&Dr(u),xu(s)){case 2:case 8:s=le;break;case 32:s=Se;break;case 268435456:s=He;break;default:s=Se}return u=wg.bind(null,e),s=ka(s,u),e.callbackPriority=i,e.callbackNode=s,i}return u!==null&&u!==null&&Dr(u),e.callbackPriority=2,e.callbackNode=null,2}function wg(e,i){if(yt!==0&&yt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(ao()&&e.callbackNode!==s)return null;var u=De;return u=cl(e,e===Xe?u:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u===0?null:(ng(e,u,i),vg(e,Dt()),e.callbackNode!=null&&e.callbackNode===s?wg.bind(null,e):null)}function _g(e,i){if(ao())return null;ng(e,i,!0)}function i1(){p1(function(){(qe&6)!==0?ka(F,n1):bg()})}function ad(){if(zi===0){var e=Va;e===0&&(e=ll,ll<<=1,(ll&261888)===0&&(ll=256)),zi=e}return zi}function Sg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:ml(""+e)}function kg(e,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,e.id&&s.setAttribute("form",e.id),i.parentNode.insertBefore(s,i),e=new FormData(e),s.parentNode.removeChild(s),e}function a1(e,i,s,u,f){if(i==="submit"&&s&&s.stateNode===f){var g=Sg((f[qt]||null).action),w=u.submitter;w&&(i=(i=w[qt]||null)?Sg(i.formAction):w.getAttribute("formAction"),i!==null&&(g=i,w=null));var _=new xl("action","action",null,u,f);e.push({event:_,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(zi!==0){var O=w?kg(f,w):new FormData(f);kc(s,{pending:!0,data:O,method:f.method,action:g},null,O)}}else typeof g=="function"&&(_.preventDefault(),O=w?kg(f,w):new FormData(f),kc(s,{pending:!0,data:O,method:f.method,action:g},g,O))},currentTarget:f}]})}}for(var rd=0;rd<Hu.length;rd++){var sd=Hu[rd],r1=sd.toLowerCase(),s1=sd[0].toUpperCase()+sd.slice(1);En(r1,"on"+s1)}En(tm,"onAnimationEnd"),En(nm,"onAnimationIteration"),En(im,"onAnimationStart"),En("dblclick","onDoubleClick"),En("focusin","onFocus"),En("focusout","onBlur"),En(_v,"onTransitionRun"),En(Sv,"onTransitionStart"),En(kv,"onTransitionCancel"),En(am,"onTransitionEnd"),Ta("onMouseEnter",["mouseout","mouseover"]),Ta("onMouseLeave",["mouseout","mouseover"]),Ta("onPointerEnter",["pointerout","pointerover"]),Ta("onPointerLeave",["pointerout","pointerover"]),Qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),l1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gs));function Eg(e,i){i=(i&4)!==0;for(var s=0;s<e.length;s++){var u=e[s],f=u.event;u=u.listeners;e:{var g=void 0;if(i)for(var w=u.length-1;0<=w;w--){var _=u[w],O=_.instance,H=_.currentTarget;if(_=_.listener,O!==g&&f.isPropagationStopped())break e;g=_,f.currentTarget=H;try{g(f)}catch(G){wl(G)}f.currentTarget=null,g=O}else for(w=0;w<u.length;w++){if(_=u[w],O=_.instance,H=_.currentTarget,_=_.listener,O!==g&&f.isPropagationStopped())break e;g=_,f.currentTarget=H;try{g(f)}catch(G){wl(G)}f.currentTarget=null,g=O}}}}function Oe(e,i){var s=i[bu];s===void 0&&(s=i[bu]=new Set);var u=e+"__bubble";s.has(u)||(jg(i,e,2,!1),s.add(u))}function ld(e,i,s){var u=0;i&&(u|=4),jg(s,e,u,i)}var lo="_reactListening"+Math.random().toString(36).slice(2);function od(e){if(!e[lo]){e[lo]=!0,bh.forEach(function(s){s!=="selectionchange"&&(l1.has(s)||ld(s,!1,e),ld(s,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[lo]||(i[lo]=!0,ld("selectionchange",!1,i))}}function jg(e,i,s,u){switch(t0(i)){case 2:var f=z1;break;case 8:f=U1;break;default:f=Sd}s=f.bind(null,i,s,e),f=void 0,!Cu||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),u?f!==void 0?e.addEventListener(i,s,{capture:!0,passive:f}):e.addEventListener(i,s,!0):f!==void 0?e.addEventListener(i,s,{passive:f}):e.addEventListener(i,s,!1)}function ud(e,i,s,u,f){var g=u;if((i&1)===0&&(i&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var _=u.stateNode.containerInfo;if(_===f)break;if(w===4)for(w=u.return;w!==null;){var O=w.tag;if((O===3||O===4)&&w.stateNode.containerInfo===f)return;w=w.return}for(;_!==null;){if(w=ja(_),w===null)return;if(O=w.tag,O===5||O===6||O===26||O===27){u=g=w;continue e}_=_.parentNode}}u=u.return}Rh(function(){var H=g,G=ju(s),Q=[];e:{var $=rm.get(e);if($!==void 0){var V=xl,he=e;switch(e){case"keypress":if(gl(s)===0)break e;case"keydown":case"keyup":V=ev;break;case"focusin":he="focus",V=Ou;break;case"focusout":he="blur",V=Ou;break;case"beforeblur":case"afterblur":V=Ou;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Lh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=$b;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=iv;break;case tm:case nm:case im:V=Gb;break;case am:V=rv;break;case"scroll":case"scrollend":V=Ib;break;case"wheel":V=lv;break;case"copy":case"cut":case"paste":V=Kb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=Uh;break;case"toggle":case"beforetoggle":V=uv}var be=(i&4)!==0,Ye=!be&&(e==="scroll"||e==="scrollend"),U=be?$!==null?$+"Capture":null:$;be=[];for(var D=H,q;D!==null;){var X=D;if(q=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||q===null||U===null||(X=Br(D,U),X!=null&&be.push(ys(D,X,q))),Ye)break;D=D.return}0<be.length&&($=new V($,he,null,s,G),Q.push({event:$,listeners:be}))}}if((i&7)===0){e:{if($=e==="mouseover"||e==="pointerover",V=e==="mouseout"||e==="pointerout",$&&s!==Eu&&(he=s.relatedTarget||s.fromElement)&&(ja(he)||he[Ea]))break e;if((V||$)&&($=G.window===G?G:($=G.ownerDocument)?$.defaultView||$.parentWindow:window,V?(he=s.relatedTarget||s.toElement,V=H,he=he?ja(he):null,he!==null&&(Ye=o(he),be=he.tag,he!==Ye||be!==5&&be!==27&&be!==6)&&(he=null)):(V=null,he=H),V!==he)){if(be=Lh,X="onMouseLeave",U="onMouseEnter",D="mouse",(e==="pointerout"||e==="pointerover")&&(be=Uh,X="onPointerLeave",U="onPointerEnter",D="pointer"),Ye=V==null?$:Mr(V),q=he==null?$:Mr(he),$=new be(X,D+"leave",V,s,G),$.target=Ye,$.relatedTarget=q,X=null,ja(G)===H&&(be=new be(U,D+"enter",he,s,G),be.target=q,be.relatedTarget=Ye,X=be),Ye=X,V&&he)t:{for(be=o1,U=V,D=he,q=0,X=U;X;X=be(X))q++;X=0;for(var ye=D;ye;ye=be(ye))X++;for(;0<q-X;)U=be(U),q--;for(;0<X-q;)D=be(D),X--;for(;q--;){if(U===D||D!==null&&U===D.alternate){be=U;break t}U=be(U),D=be(D)}be=null}else be=null;V!==null&&Ng(Q,$,V,be,!1),he!==null&&Ye!==null&&Ng(Q,Ye,he,be,!0)}}e:{if($=H?Mr(H):window,V=$.nodeName&&$.nodeName.toLowerCase(),V==="select"||V==="input"&&$.type==="file")var Me=Ph;else if($h($))if(Gh)Me=bv;else{Me=yv;var pe=gv}else V=$.nodeName,!V||V.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?H&&ku(H.elementType)&&(Me=Ph):Me=xv;if(Me&&(Me=Me(e,H))){Vh(Q,Me,s,G);break e}pe&&pe(e,$,H),e==="focusout"&&H&&$.type==="number"&&H.memoizedProps.value!=null&&Su($,"number",$.value)}switch(pe=H?Mr(H):window,e){case"focusin":($h(pe)||pe.contentEditable==="true")&&(za=pe,Bu=H,Yr=null);break;case"focusout":Yr=Bu=za=null;break;case"mousedown":qu=!0;break;case"contextmenu":case"mouseup":case"dragend":qu=!1,Wh(Q,s,G);break;case"selectionchange":if(wv)break;case"keydown":case"keyup":Wh(Q,s,G)}var Ce;if(Lu)e:{switch(e){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else La?Ih(e,s)&&(Le="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Le="onCompositionStart");Le&&(Mh&&s.locale!=="ko"&&(La||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&La&&(Ce=Oh()):(bi=G,Tu="value"in bi?bi.value:bi.textContent,La=!0)),pe=oo(H,Le),0<pe.length&&(Le=new zh(Le,e,null,s,G),Q.push({event:Le,listeners:pe}),Ce?Le.data=Ce:(Ce=Hh(s),Ce!==null&&(Le.data=Ce)))),(Ce=dv?fv(e,s):hv(e,s))&&(Le=oo(H,"onBeforeInput"),0<Le.length&&(pe=new zh("onBeforeInput","beforeinput",null,s,G),Q.push({event:pe,listeners:Le}),pe.data=Ce)),a1(Q,e,H,s,G)}Eg(Q,i)})}function ys(e,i,s){return{instance:e,listener:i,currentTarget:s}}function oo(e,i){for(var s=i+"Capture",u=[];e!==null;){var f=e,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Br(e,s),f!=null&&u.unshift(ys(e,f,g)),f=Br(e,i),f!=null&&u.push(ys(e,f,g))),e.tag===3)return u;e=e.return}return[]}function o1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ng(e,i,s,u,f){for(var g=i._reactName,w=[];s!==null&&s!==u;){var _=s,O=_.alternate,H=_.stateNode;if(_=_.tag,O!==null&&O===u)break;_!==5&&_!==26&&_!==27||H===null||(O=H,f?(H=Br(s,g),H!=null&&w.unshift(ys(s,H,O))):f||(H=Br(s,g),H!=null&&w.push(ys(s,H,O)))),s=s.return}w.length!==0&&e.push({event:i,listeners:w})}var u1=/\r\n?/g,c1=/\u0000|\uFFFD/g;function Cg(e){return(typeof e=="string"?e:""+e).replace(u1,`
`).replace(c1,"")}function Tg(e,i){return i=Cg(i),Cg(e)===i}function Ge(e,i,s,u,f,g){switch(s){case"children":typeof u=="string"?i==="body"||i==="textarea"&&u===""||Ra(e,u):(typeof u=="number"||typeof u=="bigint")&&i!=="body"&&Ra(e,""+u);break;case"className":fl(e,"class",u);break;case"tabIndex":fl(e,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":fl(e,s,u);break;case"style":Th(e,u,g);break;case"data":if(i!=="object"){fl(e,"data",u);break}case"src":case"href":if(u===""&&(i!=="a"||s!=="href")){e.removeAttribute(s);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(s);break}u=ml(""+u),e.setAttribute(s,u);break;case"action":case"formAction":if(typeof u=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(s==="formAction"?(i!=="input"&&Ge(e,i,"name",f.name,f,null),Ge(e,i,"formEncType",f.formEncType,f,null),Ge(e,i,"formMethod",f.formMethod,f,null),Ge(e,i,"formTarget",f.formTarget,f,null)):(Ge(e,i,"encType",f.encType,f,null),Ge(e,i,"method",f.method,f,null),Ge(e,i,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(s);break}u=ml(""+u),e.setAttribute(s,u);break;case"onClick":u!=null&&(e.onclick=Fn);break;case"onScroll":u!=null&&Oe("scroll",e);break;case"onScrollEnd":u!=null&&Oe("scrollend",e);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(s=u.__html,s!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=s}}break;case"multiple":e.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":e.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){e.removeAttribute("xlink:href");break}s=ml(""+u),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(s,""+u):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":u===!0?e.setAttribute(s,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(s,u):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?e.setAttribute(s,u):e.removeAttribute(s);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?e.removeAttribute(s):e.setAttribute(s,u);break;case"popover":Oe("beforetoggle",e),Oe("toggle",e),dl(e,"popover",u);break;case"xlinkActuate":Kn(e,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Kn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Kn(e,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Kn(e,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Kn(e,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Kn(e,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Kn(e,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Kn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Kn(e,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":dl(e,"is",u);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Bb.get(s)||s,dl(e,s,u))}}function cd(e,i,s,u,f,g){switch(s){case"style":Th(e,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(s=u.__html,s!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=s}}break;case"children":typeof u=="string"?Ra(e,u):(typeof u=="number"||typeof u=="bigint")&&Ra(e,""+u);break;case"onScroll":u!=null&&Oe("scroll",e);break;case"onScrollEnd":u!=null&&Oe("scrollend",e);break;case"onClick":u!=null&&(e.onclick=Fn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vh.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),i=s.slice(2,f?s.length-7:void 0),g=e[qt]||null,g=g!=null?g[s]:null,typeof g=="function"&&e.removeEventListener(i,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(i,u,f);break e}s in e?e[s]=u:u===!0?e.setAttribute(s,""):dl(e,s,u)}}}function jt(e,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",e),Oe("load",e);var u=!1,f=!1,g;for(g in s)if(s.hasOwnProperty(g)){var w=s[g];if(w!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ge(e,i,g,w,s,null)}}f&&Ge(e,i,"srcSet",s.srcSet,s,null),u&&Ge(e,i,"src",s.src,s,null);return;case"input":Oe("invalid",e);var _=g=w=f=null,O=null,H=null;for(u in s)if(s.hasOwnProperty(u)){var G=s[u];if(G!=null)switch(u){case"name":f=G;break;case"type":w=G;break;case"checked":O=G;break;case"defaultChecked":H=G;break;case"value":g=G;break;case"defaultValue":_=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:Ge(e,i,u,G,s,null)}}Eh(e,g,_,O,H,w,f,!1);return;case"select":Oe("invalid",e),u=w=g=null;for(f in s)if(s.hasOwnProperty(f)&&(_=s[f],_!=null))switch(f){case"value":g=_;break;case"defaultValue":w=_;break;case"multiple":u=_;default:Ge(e,i,f,_,s,null)}i=g,s=w,e.multiple=!!u,i!=null?Aa(e,!!u,i,!1):s!=null&&Aa(e,!!u,s,!0);return;case"textarea":Oe("invalid",e),g=f=u=null;for(w in s)if(s.hasOwnProperty(w)&&(_=s[w],_!=null))switch(w){case"value":u=_;break;case"defaultValue":f=_;break;case"children":g=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(r(91));break;default:Ge(e,i,w,_,s,null)}Nh(e,u,f,g);return;case"option":for(O in s)if(s.hasOwnProperty(O)&&(u=s[O],u!=null))switch(O){case"selected":e.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Ge(e,i,O,u,s,null)}return;case"dialog":Oe("beforetoggle",e),Oe("toggle",e),Oe("cancel",e),Oe("close",e);break;case"iframe":case"object":Oe("load",e);break;case"video":case"audio":for(u=0;u<gs.length;u++)Oe(gs[u],e);break;case"image":Oe("error",e),Oe("load",e);break;case"details":Oe("toggle",e);break;case"embed":case"source":case"link":Oe("error",e),Oe("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in s)if(s.hasOwnProperty(H)&&(u=s[H],u!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Ge(e,i,H,u,s,null)}return;default:if(ku(i)){for(G in s)s.hasOwnProperty(G)&&(u=s[G],u!==void 0&&cd(e,i,G,u,s,void 0));return}}for(_ in s)s.hasOwnProperty(_)&&(u=s[_],u!=null&&Ge(e,i,_,u,s,null))}function d1(e,i,s,u){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,w=null,_=null,O=null,H=null,G=null;for(V in s){var Q=s[V];if(s.hasOwnProperty(V)&&Q!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":O=Q;default:u.hasOwnProperty(V)||Ge(e,i,V,null,u,Q)}}for(var $ in u){var V=u[$];if(Q=s[$],u.hasOwnProperty($)&&(V!=null||Q!=null))switch($){case"type":g=V;break;case"name":f=V;break;case"checked":H=V;break;case"defaultChecked":G=V;break;case"value":w=V;break;case"defaultValue":_=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(r(137,i));break;default:V!==Q&&Ge(e,i,$,V,u,Q)}}_u(e,w,_,O,H,G,g,f);return;case"select":V=w=_=$=null;for(g in s)if(O=s[g],s.hasOwnProperty(g)&&O!=null)switch(g){case"value":break;case"multiple":V=O;default:u.hasOwnProperty(g)||Ge(e,i,g,null,u,O)}for(f in u)if(g=u[f],O=s[f],u.hasOwnProperty(f)&&(g!=null||O!=null))switch(f){case"value":$=g;break;case"defaultValue":_=g;break;case"multiple":w=g;default:g!==O&&Ge(e,i,f,g,u,O)}i=_,s=w,u=V,$!=null?Aa(e,!!s,$,!1):!!u!=!!s&&(i!=null?Aa(e,!!s,i,!0):Aa(e,!!s,s?[]:"",!1));return;case"textarea":V=$=null;for(_ in s)if(f=s[_],s.hasOwnProperty(_)&&f!=null&&!u.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:Ge(e,i,_,null,u,f)}for(w in u)if(f=u[w],g=s[w],u.hasOwnProperty(w)&&(f!=null||g!=null))switch(w){case"value":$=f;break;case"defaultValue":V=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&Ge(e,i,w,f,u,g)}jh(e,$,V);return;case"option":for(var he in s)if($=s[he],s.hasOwnProperty(he)&&$!=null&&!u.hasOwnProperty(he))switch(he){case"selected":e.selected=!1;break;default:Ge(e,i,he,null,u,$)}for(O in u)if($=u[O],V=s[O],u.hasOwnProperty(O)&&$!==V&&($!=null||V!=null))switch(O){case"selected":e.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:Ge(e,i,O,$,u,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in s)$=s[be],s.hasOwnProperty(be)&&$!=null&&!u.hasOwnProperty(be)&&Ge(e,i,be,null,u,$);for(H in u)if($=u[H],V=s[H],u.hasOwnProperty(H)&&$!==V&&($!=null||V!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,i));break;default:Ge(e,i,H,$,u,V)}return;default:if(ku(i)){for(var Ye in s)$=s[Ye],s.hasOwnProperty(Ye)&&$!==void 0&&!u.hasOwnProperty(Ye)&&cd(e,i,Ye,void 0,u,$);for(G in u)$=u[G],V=s[G],!u.hasOwnProperty(G)||$===V||$===void 0&&V===void 0||cd(e,i,G,$,u,V);return}}for(var U in s)$=s[U],s.hasOwnProperty(U)&&$!=null&&!u.hasOwnProperty(U)&&Ge(e,i,U,null,u,$);for(Q in u)$=u[Q],V=s[Q],!u.hasOwnProperty(Q)||$===V||$==null&&V==null||Ge(e,i,Q,$,u,V)}function Ag(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function f1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,s=performance.getEntriesByType("resource"),u=0;u<s.length;u++){var f=s[u],g=f.transferSize,w=f.initiatorType,_=f.duration;if(g&&_&&Ag(w)){for(w=0,_=f.responseEnd,u+=1;u<s.length;u++){var O=s[u],H=O.startTime;if(H>_)break;var G=O.transferSize,Q=O.initiatorType;G&&Ag(Q)&&(O=O.responseEnd,w+=G*(O<_?1:(_-H)/(O-H)))}if(--u,i+=8*(g+w)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var dd=null,fd=null;function uo(e){return e.nodeType===9?e:e.ownerDocument}function Rg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Og(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function hd(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var md=null;function h1(){var e=window.event;return e&&e.type==="popstate"?e===md?!1:(md=e,!0):(md=null,!1)}var Dg=typeof setTimeout=="function"?setTimeout:void 0,m1=typeof clearTimeout=="function"?clearTimeout:void 0,Lg=typeof Promise=="function"?Promise:void 0,p1=typeof queueMicrotask=="function"?queueMicrotask:typeof Lg<"u"?function(e){return Lg.resolve(null).then(e).catch(g1)}:Dg;function g1(e){setTimeout(function(){throw e})}function Ui(e){return e==="head"}function zg(e,i){var s=i,u=0;do{var f=s.nextSibling;if(e.removeChild(s),f&&f.nodeType===8)if(s=f.data,s==="/$"||s==="/&"){if(u===0){e.removeChild(f),or(i);return}u--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")u++;else if(s==="html")xs(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,xs(s);for(var g=s.firstChild;g;){var w=g.nextSibling,_=g.nodeName;g[Ur]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&g.rel.toLowerCase()==="stylesheet"||s.removeChild(g),g=w}}else s==="body"&&xs(e.ownerDocument.body);s=f}while(s);or(i)}function Ug(e,i){var s=e;e=0;do{var u=s.nextSibling;if(s.nodeType===1?i?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(i?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),u&&u.nodeType===8)if(s=u.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=u}while(s)}function pd(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":pd(s),vu(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function y1(e,i,s,u){for(;e.nodeType===1;){var f=s;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!u&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(u){if(!e[Ur])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=bn(e.nextSibling),e===null)break}return null}function x1(e,i,s){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=bn(e.nextSibling),e===null))return null;return e}function Mg(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=bn(e.nextSibling),e===null))return null;return e}function gd(e){return e.data==="$?"||e.data==="$~"}function yd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function b1(e,i){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||s.readyState!=="loading")i();else{var u=function(){i(),s.removeEventListener("DOMContentLoaded",u)};s.addEventListener("DOMContentLoaded",u),e._reactRetry=u}}function bn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var xd=null;function Bg(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(i===0)return bn(e.nextSibling);i--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||i++}e=e.nextSibling}return null}function qg(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(i===0)return e;i--}else s!=="/$"&&s!=="/&"||i++}e=e.previousSibling}return null}function Ig(e,i,s){switch(i=uo(s),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function xs(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);vu(e)}var vn=new Map,Hg=new Set;function co(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ci=J.d;J.d={f:v1,r:w1,D:_1,C:S1,L:k1,m:E1,X:N1,S:j1,M:C1};function v1(){var e=ci.f(),i=to();return e||i}function w1(e){var i=Na(e);i!==null&&i.tag===5&&i.type==="form"?ap(i):ci.r(e)}var rr=typeof document>"u"?null:document;function $g(e,i,s){var u=rr;if(u&&typeof i=="string"&&i){var f=fn(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),Hg.has(f)||(Hg.add(f),e={rel:e,crossOrigin:s,href:i},u.querySelector(f)===null&&(i=u.createElement("link"),jt(i,"link",e),vt(i),u.head.appendChild(i)))}}function _1(e){ci.D(e),$g("dns-prefetch",e,null)}function S1(e,i){ci.C(e,i),$g("preconnect",e,i)}function k1(e,i,s){ci.L(e,i,s);var u=rr;if(u&&e&&i){var f='link[rel="preload"][as="'+fn(i)+'"]';i==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+fn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+fn(s.imageSizes)+'"]')):f+='[href="'+fn(e)+'"]';var g=f;switch(i){case"style":g=sr(e);break;case"script":g=lr(e)}vn.has(g)||(e=x({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:e,as:i},s),vn.set(g,e),u.querySelector(f)!==null||i==="style"&&u.querySelector(bs(g))||i==="script"&&u.querySelector(vs(g))||(i=u.createElement("link"),jt(i,"link",e),vt(i),u.head.appendChild(i)))}}function E1(e,i){ci.m(e,i);var s=rr;if(s&&e){var u=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+fn(u)+'"][href="'+fn(e)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=lr(e)}if(!vn.has(g)&&(e=x({rel:"modulepreload",href:e},i),vn.set(g,e),s.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(vs(g)))return}u=s.createElement("link"),jt(u,"link",e),vt(u),s.head.appendChild(u)}}}function j1(e,i,s){ci.S(e,i,s);var u=rr;if(u&&e){var f=Ca(u).hoistableStyles,g=sr(e);i=i||"default";var w=f.get(g);if(!w){var _={loading:0,preload:null};if(w=u.querySelector(bs(g)))_.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":i},s),(s=vn.get(g))&&bd(e,s);var O=w=u.createElement("link");vt(O),jt(O,"link",e),O._p=new Promise(function(H,G){O.onload=H,O.onerror=G}),O.addEventListener("load",function(){_.loading|=1}),O.addEventListener("error",function(){_.loading|=2}),_.loading|=4,fo(w,i,u)}w={type:"stylesheet",instance:w,count:1,state:_},f.set(g,w)}}}function N1(e,i){ci.X(e,i);var s=rr;if(s&&e){var u=Ca(s).hoistableScripts,f=lr(e),g=u.get(f);g||(g=s.querySelector(vs(f)),g||(e=x({src:e,async:!0},i),(i=vn.get(f))&&vd(e,i),g=s.createElement("script"),vt(g),jt(g,"link",e),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function C1(e,i){ci.M(e,i);var s=rr;if(s&&e){var u=Ca(s).hoistableScripts,f=lr(e),g=u.get(f);g||(g=s.querySelector(vs(f)),g||(e=x({src:e,async:!0,type:"module"},i),(i=vn.get(f))&&vd(e,i),g=s.createElement("script"),vt(g),jt(g,"link",e),s.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function Vg(e,i,s,u){var f=(f=ce.current)?co(f):null;if(!f)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=sr(s.href),s=Ca(f).hoistableStyles,u=s.get(i),u||(u={type:"style",instance:null,count:0,state:null},s.set(i,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=sr(s.href);var g=Ca(f).hoistableStyles,w=g.get(e);if(w||(f=f.ownerDocument||f,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,w),(g=f.querySelector(bs(e)))&&!g._p&&(w.instance=g,w.state.loading=5),vn.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},vn.set(e,s),g||T1(f,e,s,w.state))),i&&u===null)throw Error(r(528,""));return w}if(i&&u!==null)throw Error(r(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=lr(s),s=Ca(f).hoistableScripts,u=s.get(i),u||(u={type:"script",instance:null,count:0,state:null},s.set(i,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function sr(e){return'href="'+fn(e)+'"'}function bs(e){return'link[rel="stylesheet"]['+e+"]"}function Pg(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function T1(e,i,s,u){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?u.loading=1:(i=e.createElement("link"),u.preload=i,i.addEventListener("load",function(){return u.loading|=1}),i.addEventListener("error",function(){return u.loading|=2}),jt(i,"link",s),vt(i),e.head.appendChild(i))}function lr(e){return'[src="'+fn(e)+'"]'}function vs(e){return"script[async]"+e}function Gg(e,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var u=e.querySelector('style[data-href~="'+fn(s.href)+'"]');if(u)return i.instance=u,vt(u),u;var f=x({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return u=(e.ownerDocument||e).createElement("style"),vt(u),jt(u,"style",f),fo(u,s.precedence,e),i.instance=u;case"stylesheet":f=sr(s.href);var g=e.querySelector(bs(f));if(g)return i.state.loading|=4,i.instance=g,vt(g),g;u=Pg(s),(f=vn.get(f))&&bd(u,f),g=(e.ownerDocument||e).createElement("link"),vt(g);var w=g;return w._p=new Promise(function(_,O){w.onload=_,w.onerror=O}),jt(g,"link",u),i.state.loading|=4,fo(g,s.precedence,e),i.instance=g;case"script":return g=lr(s.src),(f=e.querySelector(vs(g)))?(i.instance=f,vt(f),f):(u=s,(f=vn.get(g))&&(u=x({},s),vd(u,f)),e=e.ownerDocument||e,f=e.createElement("script"),vt(f),jt(f,"link",u),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(u=i.instance,i.state.loading|=4,fo(u,s.precedence,e));return i.instance}function fo(e,i,s){for(var u=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,w=0;w<u.length;w++){var _=u[w];if(_.dataset.precedence===i)g=_;else if(g!==f)break}g?g.parentNode.insertBefore(e,g.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(e,i.firstChild))}function bd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function vd(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var ho=null;function Yg(e,i,s){if(ho===null){var u=new Map,f=ho=new Map;f.set(s,u)}else f=ho,u=f.get(s),u||(u=new Map,f.set(s,u));if(u.has(e))return u;for(u.set(e,null),s=s.getElementsByTagName(e),f=0;f<s.length;f++){var g=s[f];if(!(g[Ur]||g[_t]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(i)||"";w=e+w;var _=u.get(w);_?_.push(g):u.set(w,[g])}}return u}function Kg(e,i,s){e=e.ownerDocument||e,e.head.insertBefore(s,i==="title"?e.querySelector("head > title"):null)}function A1(e,i,s){if(s===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Fg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function R1(e,i,s,u){if(s.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=sr(u.href),g=i.querySelector(bs(f));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=mo.bind(e),i.then(e,e)),s.state.loading|=4,s.instance=g,vt(g);return}g=i.ownerDocument||i,u=Pg(u),(f=vn.get(f))&&bd(u,f),g=g.createElement("link"),vt(g);var w=g;w._p=new Promise(function(_,O){w.onload=_,w.onerror=O}),jt(g,"link",u),s.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=mo.bind(e),i.addEventListener("load",s),i.addEventListener("error",s))}}var wd=0;function O1(e,i){return e.stylesheets&&e.count===0&&go(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var u=setTimeout(function(){if(e.stylesheets&&go(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+i);0<e.imgBytes&&wd===0&&(wd=62500*f1());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&go(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>wd?50:800)+i);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function mo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)go(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var po=null;function go(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,po=new Map,i.forEach(D1,e),po=null,mo.call(e))}function D1(e,i){if(!(i.state.loading&4)){var s=po.get(e);if(s)var u=s.get(null);else{s=new Map,po.set(e,s);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var w=f[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(s.set(w.dataset.precedence,w),u=w)}u&&s.set(null,u)}f=i.instance,w=f.getAttribute("data-precedence"),g=s.get(w)||u,g===u&&s.set(null,f),s.set(w,f),this.count++,u=mo.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var ws={$$typeof:R,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function L1(e,i,s,u,f,g,w,_,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gu(0),this.hiddenUpdates=gu(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Xg(e,i,s,u,f,g,w,_,O,H,G,Q){return e=new L1(e,i,s,w,O,H,G,Q,_),i=1,g===!0&&(i|=24),g=Wt(3,null,null,i),e.current=g,g.stateNode=e,i=ec(),i.refCount++,e.pooledCache=i,i.refCount++,g.memoizedState={element:u,isDehydrated:s,cache:i},ac(g),e}function Qg(e){return e?(e=Ba,e):Ba}function Jg(e,i,s,u,f,g){f=Qg(f),u.context===null?u.context=f:u.pendingContext=f,u=Ei(i),u.payload={element:s},g=g===void 0?null:g,g!==null&&(u.callback=g),s=ji(e,u,i),s!==null&&(Gt(s,e,i),Wr(s,e,i))}function Zg(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<i?s:i}}function _d(e,i){Zg(e,i),(e=e.alternate)&&Zg(e,i)}function Wg(e){if(e.tag===13||e.tag===31){var i=ea(e,67108864);i!==null&&Gt(i,e,67108864),_d(e,67108864)}}function e0(e){if(e.tag===13||e.tag===31){var i=rn();i=yu(i);var s=ea(e,i);s!==null&&Gt(s,e,i),_d(e,i)}}var yo=!0;function z1(e,i,s,u){var f=M.T;M.T=null;var g=J.p;try{J.p=2,Sd(e,i,s,u)}finally{J.p=g,M.T=f}}function U1(e,i,s,u){var f=M.T;M.T=null;var g=J.p;try{J.p=8,Sd(e,i,s,u)}finally{J.p=g,M.T=f}}function Sd(e,i,s,u){if(yo){var f=kd(u);if(f===null)ud(e,i,u,xo,s),n0(e,u);else if(B1(f,e,i,s,u))u.stopPropagation();else if(n0(e,u),i&4&&-1<M1.indexOf(e)){for(;f!==null;){var g=Na(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=Xi(g.pendingLanes);if(w!==0){var _=g;for(_.pendingLanes|=2,_.entangledLanes|=2;w;){var O=1<<31-Fe(w);_.entanglements[1]|=O,w&=~O}Un(g),(qe&6)===0&&(Wl=Dt()+500,ps(0))}}break;case 31:case 13:_=ea(g,2),_!==null&&Gt(_,g,2),to(),_d(g,2)}if(g=kd(u),g===null&&ud(e,i,u,xo,s),g===f)break;f=g}f!==null&&u.stopPropagation()}else ud(e,i,u,null,s)}}function kd(e){return e=ju(e),Ed(e)}var xo=null;function Ed(e){if(xo=null,e=ja(e),e!==null){var i=o(e);if(i===null)e=null;else{var s=i.tag;if(s===13){if(e=c(i),e!==null)return e;e=null}else if(s===31){if(e=d(i),e!==null)return e;e=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return xo=e,null}function t0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pu()){case F:return 2;case le:return 8;case Se:case Ae:return 32;case He:return 268435456;default:return 32}default:return 32}}var jd=!1,Mi=null,Bi=null,qi=null,_s=new Map,Ss=new Map,Ii=[],M1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function n0(e,i){switch(e){case"focusin":case"focusout":Mi=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":qi=null;break;case"pointerover":case"pointerout":_s.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(i.pointerId)}}function ks(e,i,s,u,f,g){return e===null||e.nativeEvent!==g?(e={blockedOn:i,domEventName:s,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},i!==null&&(i=Na(i),i!==null&&Wg(i)),e):(e.eventSystemFlags|=u,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function B1(e,i,s,u,f){switch(i){case"focusin":return Mi=ks(Mi,e,i,s,u,f),!0;case"dragenter":return Bi=ks(Bi,e,i,s,u,f),!0;case"mouseover":return qi=ks(qi,e,i,s,u,f),!0;case"pointerover":var g=f.pointerId;return _s.set(g,ks(_s.get(g)||null,e,i,s,u,f)),!0;case"gotpointercapture":return g=f.pointerId,Ss.set(g,ks(Ss.get(g)||null,e,i,s,u,f)),!0}return!1}function i0(e){var i=ja(e.target);if(i!==null){var s=o(i);if(s!==null){if(i=s.tag,i===13){if(i=c(s),i!==null){e.blockedOn=i,yh(e.priority,function(){e0(s)});return}}else if(i===31){if(i=d(s),i!==null){e.blockedOn=i,yh(e.priority,function(){e0(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bo(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var s=kd(e.nativeEvent);if(s===null){s=e.nativeEvent;var u=new s.constructor(s.type,s);Eu=u,s.target.dispatchEvent(u),Eu=null}else return i=Na(s),i!==null&&Wg(i),e.blockedOn=s,!1;i.shift()}return!0}function a0(e,i,s){bo(e)&&s.delete(i)}function q1(){jd=!1,Mi!==null&&bo(Mi)&&(Mi=null),Bi!==null&&bo(Bi)&&(Bi=null),qi!==null&&bo(qi)&&(qi=null),_s.forEach(a0),Ss.forEach(a0)}function vo(e,i){e.blockedOn===i&&(e.blockedOn=null,jd||(jd=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,q1)))}var wo=null;function r0(e){wo!==e&&(wo=e,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){wo===e&&(wo=null);for(var i=0;i<e.length;i+=3){var s=e[i],u=e[i+1],f=e[i+2];if(typeof u!="function"){if(Ed(u||s)===null)continue;break}var g=Na(s);g!==null&&(e.splice(i,3),i-=3,kc(g,{pending:!0,data:f,method:s.method,action:u},u,f))}}))}function or(e){function i(O){return vo(O,e)}Mi!==null&&vo(Mi,e),Bi!==null&&vo(Bi,e),qi!==null&&vo(qi,e),_s.forEach(i),Ss.forEach(i);for(var s=0;s<Ii.length;s++){var u=Ii[s];u.blockedOn===e&&(u.blockedOn=null)}for(;0<Ii.length&&(s=Ii[0],s.blockedOn===null);)i0(s),s.blockedOn===null&&Ii.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(u=0;u<s.length;u+=3){var f=s[u],g=s[u+1],w=f[qt]||null;if(typeof g=="function")w||r0(s);else if(w){var _=null;if(g&&g.hasAttribute("formAction")){if(f=g,w=g[qt]||null)_=w.formAction;else if(Ed(f)!==null)continue}else _=w.action;typeof _=="function"?s[u+1]=_:(s.splice(u,3),u-=3),r0(s)}}}function s0(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(w){return f=w})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),u||setTimeout(s,20)}function s(){if(!u&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(s,100),function(){u=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Nd(e){this._internalRoot=e}_o.prototype.render=Nd.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var s=i.current,u=rn();Jg(s,u,e,i,null,null)},_o.prototype.unmount=Nd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Jg(e.current,2,null,e,null,null),to(),i[Ea]=null}};function _o(e){this._internalRoot=e}_o.prototype.unstable_scheduleHydration=function(e){if(e){var i=gh();e={blockedOn:null,target:e,priority:i};for(var s=0;s<Ii.length&&i!==0&&i<Ii[s].priority;s++);Ii.splice(s,0,e),s===0&&i0(e)}};var l0=n.version;if(l0!=="19.2.4")throw Error(r(527,l0,"19.2.4"));J.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=m(i),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var I1={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var So=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!So.isDisabled&&So.supportsFiber)try{Lt=So.inject(I1),gt=So}catch{}}return js.createRoot=function(e,i){if(!l(e))throw Error(r(299));var s=!1,u="",f=mp,g=pp,w=gp;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(g=i.onCaughtError),i.onRecoverableError!==void 0&&(w=i.onRecoverableError)),i=Xg(e,1,!1,null,null,s,u,null,f,g,w,s0),e[Ea]=i.current,od(e),new Nd(i)},js.hydrateRoot=function(e,i,s){if(!l(e))throw Error(r(299));var u=!1,f="",g=mp,w=pp,_=gp,O=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(w=s.onCaughtError),s.onRecoverableError!==void 0&&(_=s.onRecoverableError),s.formState!==void 0&&(O=s.formState)),i=Xg(e,1,!0,i,s??null,u,f,O,g,w,_,s0),i.context=Qg(null),s=i.current,u=rn(),u=yu(u),f=Ei(u),f.callback=null,ji(s,f,u),s=u,i.current.lanes=s,zr(i,s),Un(i),e[Ea]=i.current,od(e),new _o(i)},js.version="19.2.4",js}var y0;function Q1(){if(y0)return Ad.exports;y0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}return t(),Ad.exports=X1(),Ad.exports}var J1=Q1();/**
 * react-router v7.13.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var x0="popstate";function b0(t){return typeof t=="object"&&t!=null&&"pathname"in t&&"search"in t&&"hash"in t&&"state"in t&&"key"in t}function Z1(t={}){function n(r,l){var m;let o=(m=l.state)==null?void 0:m.masked,{pathname:c,search:d,hash:h}=o||r.location;return lf("",{pathname:c,search:d,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default",o?{pathname:r.location.pathname,search:r.location.search,hash:r.location.hash}:void 0)}function a(r,l){return typeof l=="string"?l:Is(l)}return ew(n,a,null,t)}function it(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function _n(t,n){if(!t){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function W1(){return Math.random().toString(36).substring(2,10)}function v0(t,n){return{usr:t.state,key:t.key,idx:n,masked:t.unstable_mask?{pathname:t.pathname,search:t.search,hash:t.hash}:void 0}}function lf(t,n,a=null,r,l){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof n=="string"?jr(n):n,state:a,key:n&&n.key||r||W1(),unstable_mask:l}}function Is({pathname:t="/",search:n="",hash:a=""}){return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function jr(t){let n={};if(t){let a=t.indexOf("#");a>=0&&(n.hash=t.substring(a),t=t.substring(0,a));let r=t.indexOf("?");r>=0&&(n.search=t.substring(r),t=t.substring(0,r)),t&&(n.pathname=t)}return n}function ew(t,n,a,r={}){let{window:l=document.defaultView,v5Compat:o=!1}=r,c=l.history,d="POP",h=null,m=y();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function y(){return(c.state||{idx:null}).idx}function x(){d="POP";let C=y(),E=C==null?null:C-m;m=C,h&&h({action:d,location:N.location,delta:E})}function v(C,E){d="PUSH";let L=b0(C)?C:lf(N.location,C,E);m=y()+1;let R=v0(L,m),P=N.createHref(L.unstable_mask||L);try{c.pushState(R,"",P)}catch(W){if(W instanceof DOMException&&W.name==="DataCloneError")throw W;l.location.assign(P)}o&&h&&h({action:d,location:N.location,delta:1})}function b(C,E){d="REPLACE";let L=b0(C)?C:lf(N.location,C,E);m=y();let R=v0(L,m),P=N.createHref(L.unstable_mask||L);c.replaceState(R,"",P),o&&h&&h({action:d,location:N.location,delta:0})}function k(C){return tw(C)}let N={get action(){return d},get location(){return t(l,c)},listen(C){if(h)throw new Error("A history only accepts one active listener");return l.addEventListener(x0,x),h=C,()=>{l.removeEventListener(x0,x),h=null}},createHref(C){return n(l,C)},createURL:k,encodeLocation(C){let E=k(C);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:b,go(C){return c.go(C)}};return N}function tw(t,n=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),it(a,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Is(t);return r=r.replace(/ $/,"%20"),!n&&r.startsWith("//")&&(r=a+r),new URL(r,a)}function Gy(t,n,a="/"){return nw(t,n,a,!1)}function nw(t,n,a,r){let l=typeof n=="string"?jr(n):n,o=mi(l.pathname||"/",a);if(o==null)return null;let c=Yy(t);iw(c);let d=null;for(let h=0;d==null&&h<c.length;++h){let m=mw(o);d=fw(c[h],m,r)}return d}function Yy(t,n=[],a=[],r="",l=!1){let o=(c,d,h=l,m)=>{let y={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&h)return;it(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let x=In([r,y.relativePath]),v=a.concat(y);c.children&&c.children.length>0&&(it(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),Yy(c.children,n,v,x,h)),!(c.path==null&&!c.index)&&n.push({path:x,score:cw(x,c.index),routesMeta:v})};return t.forEach((c,d)=>{var h;if(c.path===""||!((h=c.path)!=null&&h.includes("?")))o(c,d);else for(let m of Ky(c.path))o(c,d,!0,m)}),n}function Ky(t){let n=t.split("/");if(n.length===0)return[];let[a,...r]=n,l=a.endsWith("?"),o=a.replace(/\?$/,"");if(r.length===0)return l?[o,""]:[o];let c=Ky(r.join("/")),d=[];return d.push(...c.map(h=>h===""?o:[o,h].join("/"))),l&&d.push(...c),d.map(h=>t.startsWith("/")&&h===""?"/":h)}function iw(t){t.sort((n,a)=>n.score!==a.score?a.score-n.score:dw(n.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}var aw=/^:[\w-]+$/,rw=3,sw=2,lw=1,ow=10,uw=-2,w0=t=>t==="*";function cw(t,n){let a=t.split("/"),r=a.length;return a.some(w0)&&(r+=uw),n&&(r+=sw),a.filter(l=>!w0(l)).reduce((l,o)=>l+(aw.test(o)?rw:o===""?lw:ow),r)}function dw(t,n){return t.length===n.length&&t.slice(0,-1).every((r,l)=>r===n[l])?t[t.length-1]-n[n.length-1]:0}function fw(t,n,a=!1){let{routesMeta:r}=t,l={},o="/",c=[];for(let d=0;d<r.length;++d){let h=r[d],m=d===r.length-1,y=o==="/"?n:n.slice(o.length)||"/",x=Po({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},y),v=h.route;if(!x&&m&&a&&!r[r.length-1].route.index&&(x=Po({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},y)),!x)return null;Object.assign(l,x.params),c.push({params:l,pathname:In([o,x.pathname]),pathnameBase:xw(In([o,x.pathnameBase])),route:v}),x.pathnameBase!=="/"&&(o=In([o,x.pathnameBase]))}return c}function Po(t,n){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,r]=hw(t.path,t.caseSensitive,t.end),l=n.match(a);if(!l)return null;let o=l[0],c=o.replace(/(.)\/+$/,"$1"),d=l.slice(1);return{params:r.reduce((m,{paramName:y,isOptional:x},v)=>{if(y==="*"){let k=d[v]||"";c=o.slice(0,o.length-k.length).replace(/(.)\/+$/,"$1")}const b=d[v];return x&&!b?m[y]=void 0:m[y]=(b||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:c,pattern:t}}function hw(t,n=!1,a=!0){_n(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,h,m,y)=>{if(r.push({paramName:d,isOptional:h!=null}),h){let x=y.charAt(m+c.length);return x&&x!=="/"?"/([^\\/]*)":"(?:/([^\\/]*))?"}return"/([^\\/]+)"}).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(r.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,n?void 0:"i"),r]}function mw(t){try{return t.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return _n(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),t}}function mi(t,n){if(n==="/")return t;if(!t.toLowerCase().startsWith(n.toLowerCase()))return null;let a=n.endsWith("/")?n.length-1:n.length,r=t.charAt(a);return r&&r!=="/"?null:t.slice(a)||"/"}var pw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function gw(t,n="/"){let{pathname:a,search:r="",hash:l=""}=typeof t=="string"?jr(t):t,o;return a?(a=a.replace(/\/\/+/g,"/"),a.startsWith("/")?o=_0(a.substring(1),"/"):o=_0(a,n)):o=n,{pathname:o,search:bw(r),hash:vw(l)}}function _0(t,n){let a=n.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?a.length>1&&a.pop():l!=="."&&a.push(l)}),a.length>1?a.join("/"):"/"}function Ld(t,n,a,r){return`Cannot include a '${t}' character in a manually specified \`to.${n}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yw(t){return t.filter((n,a)=>a===0||n.route.path&&n.route.path.length>0)}function Uf(t){let n=yw(t);return n.map((a,r)=>r===n.length-1?a.pathname:a.pathnameBase)}function tu(t,n,a,r=!1){let l;typeof t=="string"?l=jr(t):(l={...t},it(!l.pathname||!l.pathname.includes("?"),Ld("?","pathname","search",l)),it(!l.pathname||!l.pathname.includes("#"),Ld("#","pathname","hash",l)),it(!l.search||!l.search.includes("#"),Ld("#","search","hash",l)));let o=t===""||l.pathname==="",c=o?"/":l.pathname,d;if(c==null)d=a;else{let x=n.length-1;if(!r&&c.startsWith("..")){let v=c.split("/");for(;v[0]==="..";)v.shift(),x-=1;l.pathname=v.join("/")}d=x>=0?n[x]:"/"}let h=gw(l,d),m=c&&c!=="/"&&c.endsWith("/"),y=(o||c===".")&&a.endsWith("/");return!h.pathname.endsWith("/")&&(m||y)&&(h.pathname+="/"),h}var In=t=>t.join("/").replace(/\/\/+/g,"/"),xw=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bw=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vw=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,ww=class{constructor(t,n,a,r=!1){this.status=t,this.statusText=n||"",this.internal=r,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}};function _w(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function Sw(t){return t.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Fy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Xy(t,n){let a=t;if(typeof a!="string"||!pw.test(a))return{absoluteURL:void 0,isExternal:!1,to:a};let r=a,l=!1;if(Fy)try{let o=new URL(window.location.href),c=a.startsWith("//")?new URL(o.protocol+a):new URL(a),d=mi(c.pathname,n);c.origin===o.origin&&d!=null?a=d+c.search+c.hash:l=!0}catch{_n(!1,`<Link to="${a}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:l,to:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Qy=["POST","PUT","PATCH","DELETE"];new Set(Qy);var kw=["GET",...Qy];new Set(kw);var Nr=S.createContext(null);Nr.displayName="DataRouter";var nu=S.createContext(null);nu.displayName="DataRouterState";var Ew=S.createContext(!1),Jy=S.createContext({isTransitioning:!1});Jy.displayName="ViewTransition";var jw=S.createContext(new Map);jw.displayName="Fetchers";var Nw=S.createContext(null);Nw.displayName="Await";var cn=S.createContext(null);cn.displayName="Navigation";var Js=S.createContext(null);Js.displayName="Location";var Sn=S.createContext({outlet:null,matches:[],isDataRoute:!1});Sn.displayName="Route";var Mf=S.createContext(null);Mf.displayName="RouteError";var Zy="REACT_ROUTER_ERROR",Cw="REDIRECT",Tw="ROUTE_ERROR_RESPONSE";function Aw(t){if(t.startsWith(`${Zy}:${Cw}:{`))try{let n=JSON.parse(t.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function Rw(t){if(t.startsWith(`${Zy}:${Tw}:{`))try{let n=JSON.parse(t.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new ww(n.status,n.statusText,n.data)}catch{}}function Ow(t,{relative:n}={}){it(Cr(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:r}=S.useContext(cn),{hash:l,pathname:o,search:c}=Zs(t,{relative:n}),d=o;return a!=="/"&&(d=o==="/"?a:In([a,o])),r.createHref({pathname:d,search:c,hash:l})}function Cr(){return S.useContext(Js)!=null}function On(){return it(Cr(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Js).location}var Wy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ex(t){S.useContext(cn).static||S.useLayoutEffect(t)}function Ft(){let{isDataRoute:t}=S.useContext(Sn);return t?Kw():Dw()}function Dw(){it(Cr(),"useNavigate() may be used only in the context of a <Router> component.");let t=S.useContext(Nr),{basename:n,navigator:a}=S.useContext(cn),{matches:r}=S.useContext(Sn),{pathname:l}=On(),o=JSON.stringify(Uf(r)),c=S.useRef(!1);return ex(()=>{c.current=!0}),S.useCallback((h,m={})=>{if(_n(c.current,Wy),!c.current)return;if(typeof h=="number"){a.go(h);return}let y=tu(h,JSON.parse(o),l,m.relative==="path");t==null&&n!=="/"&&(y.pathname=y.pathname==="/"?n:In([n,y.pathname])),(m.replace?a.replace:a.push)(y,m.state,m)},[n,a,o,l,t])}var Lw=S.createContext(null);function zw(t){let n=S.useContext(Sn).outlet;return S.useMemo(()=>n&&S.createElement(Lw.Provider,{value:t},n),[n,t])}function Bf(){let{matches:t}=S.useContext(Sn),n=t[t.length-1];return n?n.params:{}}function Zs(t,{relative:n}={}){let{matches:a}=S.useContext(Sn),{pathname:r}=On(),l=JSON.stringify(Uf(a));return S.useMemo(()=>tu(t,JSON.parse(l),r,n==="path"),[t,l,r,n])}function Uw(t,n){return tx(t,n)}function tx(t,n,a){var C;it(Cr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=S.useContext(cn),{matches:l}=S.useContext(Sn),o=l[l.length-1],c=o?o.params:{},d=o?o.pathname:"/",h=o?o.pathnameBase:"/",m=o&&o.route;{let E=m&&m.path||"";ix(d,!m||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let y=On(),x;if(n){let E=typeof n=="string"?jr(n):n;it(h==="/"||((C=E.pathname)==null?void 0:C.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${E.pathname}" was given in the \`location\` prop.`),x=E}else x=y;let v=x.pathname||"/",b=v;if(h!=="/"){let E=h.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let k=Gy(t,{pathname:b});_n(m||k!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),_n(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let N=Hw(k&&k.map(E=>Object.assign({},E,{params:Object.assign({},c,E.params),pathname:In([h,r.encodeLocation?r.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?h:In([h,r.encodeLocation?r.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),l,a);return n&&N?S.createElement(Js.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",unstable_mask:void 0,...x},navigationType:"POP"}},N):N}function Mw(){let t=Yw(),n=_w(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=S.createElement(S.Fragment,null,S.createElement("p",null," Hey developer "),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:o},"ErrorBoundary")," or"," ",S.createElement("code",{style:o},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},n),a?S.createElement("pre",{style:l},a):null,c)}var Bw=S.createElement(Mw,null),nx=class extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){this.props.onError?this.props.onError(t,n):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const a=Rw(t.digest);a&&(t=a)}let n=t!==void 0?S.createElement(Sn.Provider,{value:this.props.routeContext},S.createElement(Mf.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?S.createElement(qw,{error:t},n):n}};nx.contextType=Ew;var zd=new WeakMap;function qw({children:t,error:n}){let{basename:a}=S.useContext(cn);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let r=Aw(n.digest);if(r){let l=zd.get(n);if(l)throw l;let o=Xy(r.location,a);if(Fy&&!zd.get(n))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw zd.set(n,c),c}return S.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return t}function Iw({routeContext:t,match:n,children:a}){let r=S.useContext(Nr);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Sn.Provider,{value:t},a)}function Hw(t,n=[],a){let r=a==null?void 0:a.state;if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(n.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,o=r==null?void 0:r.errors;if(o!=null){let y=l.findIndex(x=>x.route.id&&(o==null?void 0:o[x.route.id])!==void 0);it(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let c=!1,d=-1;if(a&&r){c=r.renderFallback;for(let y=0;y<l.length;y++){let x=l[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(d=y),x.route.id){let{loaderData:v,errors:b}=r,k=x.route.loader&&!v.hasOwnProperty(x.route.id)&&(!b||b[x.route.id]===void 0);if(x.route.lazy||k){a.isStatic&&(c=!0),d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}}let h=a==null?void 0:a.onError,m=r&&h?(y,x)=>{var v,b;h(y,{location:r.location,params:((b=(v=r.matches)==null?void 0:v[0])==null?void 0:b.params)??{},unstable_pattern:Sw(r.matches),errorInfo:x})}:void 0;return l.reduceRight((y,x,v)=>{let b,k=!1,N=null,C=null;r&&(b=o&&x.route.id?o[x.route.id]:void 0,N=x.route.errorElement||Bw,c&&(d<0&&v===0?(ix("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),k=!0,C=null):d===v&&(k=!0,C=x.route.hydrateFallbackElement||null)));let E=n.concat(l.slice(0,v+1)),L=()=>{let R;return b?R=N:k?R=C:x.route.Component?R=S.createElement(x.route.Component,null):x.route.element?R=x.route.element:R=y,S.createElement(Iw,{match:x,routeContext:{outlet:y,matches:E,isDataRoute:r!=null},children:R})};return r&&(x.route.ErrorBoundary||x.route.errorElement||v===0)?S.createElement(nx,{location:r.location,revalidation:r.revalidation,component:N,error:b,children:L(),routeContext:{outlet:null,matches:E,isDataRoute:!0},onError:m}):L()},null)}function qf(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $w(t){let n=S.useContext(Nr);return it(n,qf(t)),n}function Vw(t){let n=S.useContext(nu);return it(n,qf(t)),n}function Pw(t){let n=S.useContext(Sn);return it(n,qf(t)),n}function If(t){let n=Pw(t),a=n.matches[n.matches.length-1];return it(a.route.id,`${t} can only be used on routes that contain a unique "id"`),a.route.id}function Gw(){return If("useRouteId")}function Yw(){var r;let t=S.useContext(Mf),n=Vw("useRouteError"),a=If("useRouteError");return t!==void 0?t:(r=n.errors)==null?void 0:r[a]}function Kw(){let{router:t}=$w("useNavigate"),n=If("useNavigate"),a=S.useRef(!1);return ex(()=>{a.current=!0}),S.useCallback(async(l,o={})=>{_n(a.current,Wy),a.current&&(typeof l=="number"?await t.navigate(l):await t.navigate(l,{fromRouteId:n,...o}))},[t,n])}var S0={};function ix(t,n,a){!n&&!S0[t]&&(S0[t]=!0,_n(!1,a))}S.memo(Fw);function Fw({routes:t,future:n,state:a,isStatic:r,onError:l}){return tx(t,void 0,{state:a,isStatic:r,onError:l})}function Go({to:t,replace:n,state:a,relative:r}){it(Cr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=S.useContext(cn);_n(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=S.useContext(Sn),{pathname:c}=On(),d=Ft(),h=tu(t,Uf(o),c,r==="path"),m=JSON.stringify(h);return S.useEffect(()=>{d(JSON.parse(m),{replace:n,state:a,relative:r})},[d,m,r,n,a]),null}function Xw(t){return zw(t.context)}function Ct(t){it(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Qw({basename:t="/",children:n=null,location:a,navigationType:r="POP",navigator:l,static:o=!1,unstable_useTransitions:c}){it(!Cr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),h=S.useMemo(()=>({basename:d,navigator:l,static:o,unstable_useTransitions:c,future:{}}),[d,l,o,c]);typeof a=="string"&&(a=jr(a));let{pathname:m="/",search:y="",hash:x="",state:v=null,key:b="default",unstable_mask:k}=a,N=S.useMemo(()=>{let C=mi(m,d);return C==null?null:{location:{pathname:C,search:y,hash:x,state:v,key:b,unstable_mask:k},navigationType:r}},[d,m,y,x,v,b,r,k]);return _n(N!=null,`<Router basename="${d}"> is not able to match the URL "${m}${y}${x}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:S.createElement(cn.Provider,{value:h},S.createElement(Js.Provider,{children:n,value:N}))}function Jw({children:t,location:n}){return Uw(of(t),n)}function of(t,n=[]){let a=[];return S.Children.forEach(t,(r,l)=>{if(!S.isValidElement(r))return;let o=[...n,l];if(r.type===S.Fragment){a.push.apply(a,of(r.props.children,o));return}it(r.type===Ct,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),it(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=of(r.props.children,o)),a.push(c)}),a}var qo="get",Io="application/x-www-form-urlencoded";function iu(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function Zw(t){return iu(t)&&t.tagName.toLowerCase()==="button"}function Ww(t){return iu(t)&&t.tagName.toLowerCase()==="form"}function e_(t){return iu(t)&&t.tagName.toLowerCase()==="input"}function t_(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function n_(t,n){return t.button===0&&(!n||n==="_self")&&!t_(t)}function uf(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((n,a)=>{let r=t[a];return n.concat(Array.isArray(r)?r.map(l=>[a,l]):[[a,r]])},[]))}function i_(t,n){let a=uf(t);return n&&n.forEach((r,l)=>{a.has(l)||n.getAll(l).forEach(o=>{a.append(l,o)})}),a}var ko=null;function a_(){if(ko===null)try{new FormData(document.createElement("form"),0),ko=!1}catch{ko=!0}return ko}var r_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ud(t){return t!=null&&!r_.has(t)?(_n(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Io}"`),null):t}function s_(t,n){let a,r,l,o,c;if(Ww(t)){let d=t.getAttribute("action");r=d?mi(d,n):null,a=t.getAttribute("method")||qo,l=Ud(t.getAttribute("enctype"))||Io,o=new FormData(t)}else if(Zw(t)||e_(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=t.getAttribute("formaction")||d.getAttribute("action");if(r=h?mi(h,n):null,a=t.getAttribute("formmethod")||d.getAttribute("method")||qo,l=Ud(t.getAttribute("formenctype"))||Ud(d.getAttribute("enctype"))||Io,o=new FormData(d,t),!a_()){let{name:m,type:y,value:x}=t;if(y==="image"){let v=m?`${m}.`:"";o.append(`${v}x`,"0"),o.append(`${v}y`,"0")}else m&&o.append(m,x)}}else{if(iu(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=qo,r=null,l=Io,c=t}return o&&l==="text/plain"&&(c=o,o=void 0),{action:r,method:a.toLowerCase(),encType:l,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Hf(t,n){if(t===!1||t===null||typeof t>"u")throw new Error(n)}function l_(t,n,a,r){let l=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return a?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${r}`:l.pathname=`${l.pathname}.${r}`:l.pathname==="/"?l.pathname=`_root.${r}`:n&&mi(l.pathname,n)==="/"?l.pathname=`${n.replace(/\/$/,"")}/_root.${r}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${r}`,l}async function o_(t,n){if(t.id in n)return n[t.id];try{let a=await import(t.module);return n[t.id]=a,a}catch(a){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function u_(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function c_(t,n,a){let r=await Promise.all(t.map(async l=>{let o=n.routes[l.route.id];if(o){let c=await o_(o,a);return c.links?c.links():[]}return[]}));return m_(r.flat(1).filter(u_).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function k0(t,n,a,r,l,o){let c=(h,m)=>a[m]?h.route.id!==a[m].route.id:!0,d=(h,m)=>{var y;return a[m].pathname!==h.pathname||((y=a[m].route.path)==null?void 0:y.endsWith("*"))&&a[m].params["*"]!==h.params["*"]};return o==="assets"?n.filter((h,m)=>c(h,m)||d(h,m)):o==="data"?n.filter((h,m)=>{var x;let y=r.routes[h.route.id];if(!y||!y.hasLoader)return!1;if(c(h,m)||d(h,m))return!0;if(h.route.shouldRevalidate){let v=h.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((x=a[0])==null?void 0:x.params)||{},nextUrl:new URL(t,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function d_(t,n,{includeHydrateFallback:a}={}){return f_(t.map(r=>{let l=n.routes[r.route.id];if(!l)return[];let o=[l.module];return l.clientActionModule&&(o=o.concat(l.clientActionModule)),l.clientLoaderModule&&(o=o.concat(l.clientLoaderModule)),a&&l.hydrateFallbackModule&&(o=o.concat(l.hydrateFallbackModule)),l.imports&&(o=o.concat(l.imports)),o}).flat(1))}function f_(t){return[...new Set(t)]}function h_(t){let n={},a=Object.keys(t).sort();for(let r of a)n[r]=t[r];return n}function m_(t,n){let a=new Set;return new Set(n),t.reduce((r,l)=>{let o=JSON.stringify(h_(l));return a.has(o)||(a.add(o),r.push({key:o,link:l})),r},[])}function ax(){let t=S.useContext(Nr);return Hf(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function p_(){let t=S.useContext(nu);return Hf(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var $f=S.createContext(void 0);$f.displayName="FrameworkContext";function rx(){let t=S.useContext($f);return Hf(t,"You must render this element inside a <HydratedRouter> element"),t}function g_(t,n){let a=S.useContext($f),[r,l]=S.useState(!1),[o,c]=S.useState(!1),{onFocus:d,onBlur:h,onMouseEnter:m,onMouseLeave:y,onTouchStart:x}=n,v=S.useRef(null);S.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let N=E=>{E.forEach(L=>{c(L.isIntersecting)})},C=new IntersectionObserver(N,{threshold:.5});return v.current&&C.observe(v.current),()=>{C.disconnect()}}},[t]),S.useEffect(()=>{if(r){let N=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(N)}}},[r]);let b=()=>{l(!0)},k=()=>{l(!1),c(!1)};return a?t!=="intent"?[o,v,{}]:[o,v,{onFocus:Ns(d,b),onBlur:Ns(h,k),onMouseEnter:Ns(m,b),onMouseLeave:Ns(y,k),onTouchStart:Ns(x,b)}]:[!1,v,{}]}function Ns(t,n){return a=>{t&&t(a),a.defaultPrevented||n(a)}}function y_({page:t,...n}){let{router:a}=ax(),r=S.useMemo(()=>Gy(a.routes,t,a.basename),[a.routes,t,a.basename]);return r?S.createElement(b_,{page:t,matches:r,...n}):null}function x_(t){let{manifest:n,routeModules:a}=rx(),[r,l]=S.useState([]);return S.useEffect(()=>{let o=!1;return c_(t,n,a).then(c=>{o||l(c)}),()=>{o=!0}},[t,n,a]),r}function b_({page:t,matches:n,...a}){let r=On(),{future:l,manifest:o,routeModules:c}=rx(),{basename:d}=ax(),{loaderData:h,matches:m}=p_(),y=S.useMemo(()=>k0(t,n,m,o,r,"data"),[t,n,m,o,r]),x=S.useMemo(()=>k0(t,n,m,o,r,"assets"),[t,n,m,o,r]),v=S.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let N=new Set,C=!1;if(n.forEach(L=>{var P;let R=o.routes[L.route.id];!R||!R.hasLoader||(!y.some(W=>W.route.id===L.route.id)&&L.route.id in h&&((P=c[L.route.id])!=null&&P.shouldRevalidate)||R.hasClientLoader?C=!0:N.add(L.route.id))}),N.size===0)return[];let E=l_(t,d,l.unstable_trailingSlashAwareDataRequests,"data");return C&&N.size>0&&E.searchParams.set("_routes",n.filter(L=>N.has(L.route.id)).map(L=>L.route.id).join(",")),[E.pathname+E.search]},[d,l.unstable_trailingSlashAwareDataRequests,h,r,o,y,n,t,c]),b=S.useMemo(()=>d_(x,o),[x,o]),k=x_(x);return S.createElement(S.Fragment,null,v.map(N=>S.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...a})),b.map(N=>S.createElement("link",{key:N,rel:"modulepreload",href:N,...a})),k.map(({key:N,link:C})=>S.createElement("link",{key:N,nonce:a.nonce,...C,crossOrigin:C.crossOrigin??a.crossOrigin})))}function v_(...t){return n=>{t.forEach(a=>{typeof a=="function"?a(n):a!=null&&(a.current=n)})}}var w_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{w_&&(window.__reactRouterVersion="7.13.1")}catch{}function __({basename:t,children:n,unstable_useTransitions:a,window:r}){let l=S.useRef();l.current==null&&(l.current=Z1({window:r,v5Compat:!0}));let o=l.current,[c,d]=S.useState({action:o.action,location:o.location}),h=S.useCallback(m=>{a===!1?d(m):S.startTransition(()=>d(m))},[a]);return S.useLayoutEffect(()=>o.listen(h),[o,h]),S.createElement(Qw,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:a})}var sx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lx=S.forwardRef(function({onClick:n,discover:a="render",prefetch:r="none",relative:l,reloadDocument:o,replace:c,unstable_mask:d,state:h,target:m,to:y,preventScrollReset:x,viewTransition:v,unstable_defaultShouldRevalidate:b,...k},N){let{basename:C,navigator:E,unstable_useTransitions:L}=S.useContext(cn),R=typeof y=="string"&&sx.test(y),P=Xy(y,C);y=P.to;let W=Ow(y,{relative:l}),z=On(),Y=null;if(d){let K=tu(d,[],z.unstable_mask?z.unstable_mask.pathname:"/",!0);C!=="/"&&(K.pathname=K.pathname==="/"?C:In([C,K.pathname])),Y=E.createHref(K)}let[te,ae,fe]=g_(r,k),I=E_(y,{replace:c,unstable_mask:d,state:h,target:m,preventScrollReset:x,relative:l,viewTransition:v,unstable_defaultShouldRevalidate:b,unstable_useTransitions:L});function Z(K){n&&n(K),K.defaultPrevented||I(K)}let de=!(P.isExternal||o),se=S.createElement("a",{...k,...fe,href:(de?Y:void 0)||P.absoluteURL||W,onClick:de?Z:n,ref:v_(N,ae),target:m,"data-discover":!R&&a==="render"?"true":void 0});return te&&!R?S.createElement(S.Fragment,null,se,S.createElement(y_,{page:W})):se});lx.displayName="Link";var ox=S.forwardRef(function({"aria-current":n="page",caseSensitive:a=!1,className:r="",end:l=!1,style:o,to:c,viewTransition:d,children:h,...m},y){let x=Zs(c,{relative:m.relative}),v=On(),b=S.useContext(nu),{navigator:k,basename:N}=S.useContext(cn),C=b!=null&&A_(x)&&d===!0,E=k.encodeLocation?k.encodeLocation(x).pathname:x.pathname,L=v.pathname,R=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;a||(L=L.toLowerCase(),R=R?R.toLowerCase():null,E=E.toLowerCase()),R&&N&&(R=mi(R,N)||R);const P=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let W=L===E||!l&&L.startsWith(E)&&L.charAt(P)==="/",z=R!=null&&(R===E||!l&&R.startsWith(E)&&R.charAt(E.length)==="/"),Y={isActive:W,isPending:z,isTransitioning:C},te=W?n:void 0,ae;typeof r=="function"?ae=r(Y):ae=[r,W?"active":null,z?"pending":null,C?"transitioning":null].filter(Boolean).join(" ");let fe=typeof o=="function"?o(Y):o;return S.createElement(lx,{...m,"aria-current":te,className:ae,ref:y,style:fe,to:c,viewTransition:d},typeof h=="function"?h(Y):h)});ox.displayName="NavLink";var S_=S.forwardRef(({discover:t="render",fetcherKey:n,navigate:a,reloadDocument:r,replace:l,state:o,method:c=qo,action:d,onSubmit:h,relative:m,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:v,...b},k)=>{let{unstable_useTransitions:N}=S.useContext(cn),C=C_(),E=T_(d,{relative:m}),L=c.toLowerCase()==="get"?"get":"post",R=typeof d=="string"&&sx.test(d),P=W=>{if(h&&h(W),W.defaultPrevented)return;W.preventDefault();let z=W.nativeEvent.submitter,Y=(z==null?void 0:z.getAttribute("formmethod"))||c,te=()=>C(z||W.currentTarget,{fetcherKey:n,method:Y,navigate:a,replace:l,state:o,relative:m,preventScrollReset:y,viewTransition:x,unstable_defaultShouldRevalidate:v});N&&a!==!1?S.startTransition(()=>te()):te()};return S.createElement("form",{ref:k,method:L,action:E,onSubmit:r?h:P,...b,"data-discover":!R&&t==="render"?"true":void 0})});S_.displayName="Form";function k_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ux(t){let n=S.useContext(Nr);return it(n,k_(t)),n}function E_(t,{target:n,replace:a,unstable_mask:r,state:l,preventScrollReset:o,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:h,unstable_useTransitions:m}={}){let y=Ft(),x=On(),v=Zs(t,{relative:c});return S.useCallback(b=>{if(n_(b,n)){b.preventDefault();let k=a!==void 0?a:Is(x)===Is(v),N=()=>y(t,{replace:k,unstable_mask:r,state:l,preventScrollReset:o,relative:c,viewTransition:d,unstable_defaultShouldRevalidate:h});m?S.startTransition(()=>N()):N()}},[x,y,v,a,r,l,n,t,o,c,d,h,m])}function Vf(t){_n(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=S.useRef(uf(t)),a=S.useRef(!1),r=On(),l=S.useMemo(()=>i_(r.search,a.current?null:n.current),[r.search]),o=Ft(),c=S.useCallback((d,h)=>{const m=uf(typeof d=="function"?d(new URLSearchParams(l)):d);a.current=!0,o("?"+m,h)},[o,l]);return[l,c]}var j_=0,N_=()=>`__${String(++j_)}__`;function C_(){let{router:t}=ux("useSubmit"),{basename:n}=S.useContext(cn),a=Gw(),r=t.fetch,l=t.navigate;return S.useCallback(async(o,c={})=>{let{action:d,method:h,encType:m,formData:y,body:x}=s_(o,n);if(c.navigate===!1){let v=c.fetcherKey||N_();await r(v,a,c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:x,formMethod:c.method||h,formEncType:c.encType||m,flushSync:c.flushSync})}else await l(c.action||d,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:y,body:x,formMethod:c.method||h,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:a,flushSync:c.flushSync,viewTransition:c.viewTransition})},[r,l,n,a])}function T_(t,{relative:n}={}){let{basename:a}=S.useContext(cn),r=S.useContext(Sn);it(r,"useFormAction must be used inside a RouteContext");let[l]=r.matches.slice(-1),o={...Zs(t||".",{relative:n})},c=On();if(t==null){o.search=c.search;let d=new URLSearchParams(o.search),h=d.getAll("index");if(h.some(y=>y==="")){d.delete("index"),h.filter(x=>x).forEach(x=>d.append("index",x));let y=d.toString();o.search=y?`?${y}`:""}}return(!t||t===".")&&l.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(o.pathname=o.pathname==="/"?a:In([a,o.pathname])),Is(o)}function A_(t,{relative:n}={}){let a=S.useContext(Jy);it(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ux("useViewTransitionState"),l=Zs(t,{relative:n});if(!a.isTransitioning)return!1;let o=mi(a.currentLocation.pathname,r)||a.currentLocation.pathname,c=mi(a.nextLocation.pathname,r)||a.nextLocation.pathname;return Po(l.pathname,c)!=null||Po(l.pathname,o)!=null}let R_={data:""},O_=t=>{if(typeof window=="object"){let n=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return n.nonce=window.__nonce__,n.parentNode||(t||document.head).appendChild(n),n.firstChild}return t||R_},D_=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,L_=/\/\*[^]*?\*\/|  +/g,E0=/\n+/g,Gi=(t,n)=>{let a="",r="",l="";for(let o in t){let c=t[o];o[0]=="@"?o[1]=="i"?a=o+" "+c+";":r+=o[1]=="f"?Gi(c,o):o+"{"+Gi(c,o[1]=="k"?"":n)+"}":typeof c=="object"?r+=Gi(c,n?n.replace(/([^,])+/g,d=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,d):d?d+" "+h:h)):o):c!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),l+=Gi.p?Gi.p(o,c):o+":"+c+";")}return a+(n&&l?n+"{"+l+"}":l)+r},di={},cx=t=>{if(typeof t=="object"){let n="";for(let a in t)n+=a+cx(t[a]);return n}return t},z_=(t,n,a,r,l)=>{let o=cx(t),c=di[o]||(di[o]=(h=>{let m=0,y=11;for(;m<h.length;)y=101*y+h.charCodeAt(m++)>>>0;return"go"+y})(o));if(!di[c]){let h=o!==t?t:(m=>{let y,x,v=[{}];for(;y=D_.exec(m.replace(L_,""));)y[4]?v.shift():y[3]?(x=y[3].replace(E0," ").trim(),v.unshift(v[0][x]=v[0][x]||{})):v[0][y[1]]=y[2].replace(E0," ").trim();return v[0]})(t);di[c]=Gi(l?{["@keyframes "+c]:h}:h,a?"":"."+c)}let d=a&&di.g?di.g:null;return a&&(di.g=di[c]),((h,m,y,x)=>{x?m.data=m.data.replace(x,h):m.data.indexOf(h)===-1&&(m.data=y?h+m.data:m.data+h)})(di[c],n,r,d),c},U_=(t,n,a)=>t.reduce((r,l,o)=>{let c=n[o];if(c&&c.call){let d=c(a),h=d&&d.props&&d.props.className||/^go/.test(d)&&d;c=h?"."+h:d&&typeof d=="object"?d.props?"":Gi(d,""):d===!1?"":d}return r+l+(c??"")},"");function au(t){let n=this||{},a=t.call?t(n.p):t;return z_(a.unshift?a.raw?U_(a,[].slice.call(arguments,1),n.p):a.reduce((r,l)=>Object.assign(r,l&&l.call?l(n.p):l),{}):a,O_(n.target),n.g,n.o,n.k)}let dx,cf,df;au.bind({g:1});let pi=au.bind({k:1});function M_(t,n,a,r){Gi.p=n,dx=t,cf=a,df=r}function Ki(t,n){let a=this||{};return function(){let r=arguments;function l(o,c){let d=Object.assign({},o),h=d.className||l.className;a.p=Object.assign({theme:cf&&cf()},d),a.o=/ *go\d+/.test(h),d.className=au.apply(a,r)+(h?" "+h:"");let m=t;return t[0]&&(m=d.as||t,delete d.as),df&&m[0]&&df(d),dx(m,d)}return l}}var B_=t=>typeof t=="function",Yo=(t,n)=>B_(t)?t(n):t,q_=(()=>{let t=0;return()=>(++t).toString()})(),fx=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let n=matchMedia("(prefers-reduced-motion: reduce)");t=!n||n.matches}return t}})(),I_=20,Pf="default",hx=(t,n)=>{let{toastLimit:a}=t.settings;switch(n.type){case 0:return{...t,toasts:[n.toast,...t.toasts].slice(0,a)};case 1:return{...t,toasts:t.toasts.map(c=>c.id===n.toast.id?{...c,...n.toast}:c)};case 2:let{toast:r}=n;return hx(t,{type:t.toasts.find(c=>c.id===r.id)?1:0,toast:r});case 3:let{toastId:l}=n;return{...t,toasts:t.toasts.map(c=>c.id===l||l===void 0?{...c,dismissed:!0,visible:!1}:c)};case 4:return n.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(c=>c.id!==n.toastId)};case 5:return{...t,pausedAt:n.time};case 6:let o=n.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(c=>({...c,pauseDuration:c.pauseDuration+o}))}}},Ho=[],mx={toasts:[],pausedAt:void 0,settings:{toastLimit:I_}},qn={},px=(t,n=Pf)=>{qn[n]=hx(qn[n]||mx,t),Ho.forEach(([a,r])=>{a===n&&r(qn[n])})},gx=t=>Object.keys(qn).forEach(n=>px(t,n)),H_=t=>Object.keys(qn).find(n=>qn[n].toasts.some(a=>a.id===t)),ru=(t=Pf)=>n=>{px(n,t)},$_={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},V_=(t={},n=Pf)=>{let[a,r]=S.useState(qn[n]||mx),l=S.useRef(qn[n]);S.useEffect(()=>(l.current!==qn[n]&&r(qn[n]),Ho.push([n,r]),()=>{let c=Ho.findIndex(([d])=>d===n);c>-1&&Ho.splice(c,1)}),[n]);let o=a.toasts.map(c=>{var d,h,m;return{...t,...t[c.type],...c,removeDelay:c.removeDelay||((d=t[c.type])==null?void 0:d.removeDelay)||(t==null?void 0:t.removeDelay),duration:c.duration||((h=t[c.type])==null?void 0:h.duration)||(t==null?void 0:t.duration)||$_[c.type],style:{...t.style,...(m=t[c.type])==null?void 0:m.style,...c.style}}});return{...a,toasts:o}},P_=(t,n="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:n,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...a,id:(a==null?void 0:a.id)||q_()}),Ws=t=>(n,a)=>{let r=P_(n,t,a);return ru(r.toasterId||H_(r.id))({type:2,toast:r}),r.id},bt=(t,n)=>Ws("blank")(t,n);bt.error=Ws("error");bt.success=Ws("success");bt.loading=Ws("loading");bt.custom=Ws("custom");bt.dismiss=(t,n)=>{let a={type:3,toastId:t};n?ru(n)(a):gx(a)};bt.dismissAll=t=>bt.dismiss(void 0,t);bt.remove=(t,n)=>{let a={type:4,toastId:t};n?ru(n)(a):gx(a)};bt.removeAll=t=>bt.remove(void 0,t);bt.promise=(t,n,a)=>{let r=bt.loading(n.loading,{...a,...a==null?void 0:a.loading});return typeof t=="function"&&(t=t()),t.then(l=>{let o=n.success?Yo(n.success,l):void 0;return o?bt.success(o,{id:r,...a,...a==null?void 0:a.success}):bt.dismiss(r),l}).catch(l=>{let o=n.error?Yo(n.error,l):void 0;o?bt.error(o,{id:r,...a,...a==null?void 0:a.error}):bt.dismiss(r)}),t};var G_=1e3,Y_=(t,n="default")=>{let{toasts:a,pausedAt:r}=V_(t,n),l=S.useRef(new Map).current,o=S.useCallback((x,v=G_)=>{if(l.has(x))return;let b=setTimeout(()=>{l.delete(x),c({type:4,toastId:x})},v);l.set(x,b)},[]);S.useEffect(()=>{if(r)return;let x=Date.now(),v=a.map(b=>{if(b.duration===1/0)return;let k=(b.duration||0)+b.pauseDuration-(x-b.createdAt);if(k<0){b.visible&&bt.dismiss(b.id);return}return setTimeout(()=>bt.dismiss(b.id,n),k)});return()=>{v.forEach(b=>b&&clearTimeout(b))}},[a,r,n]);let c=S.useCallback(ru(n),[n]),d=S.useCallback(()=>{c({type:5,time:Date.now()})},[c]),h=S.useCallback((x,v)=>{c({type:1,toast:{id:x,height:v}})},[c]),m=S.useCallback(()=>{r&&c({type:6,time:Date.now()})},[r,c]),y=S.useCallback((x,v)=>{let{reverseOrder:b=!1,gutter:k=8,defaultPosition:N}=v||{},C=a.filter(R=>(R.position||N)===(x.position||N)&&R.height),E=C.findIndex(R=>R.id===x.id),L=C.filter((R,P)=>P<E&&R.visible).length;return C.filter(R=>R.visible).slice(...b?[L+1]:[0,L]).reduce((R,P)=>R+(P.height||0)+k,0)},[a]);return S.useEffect(()=>{a.forEach(x=>{if(x.dismissed)o(x.id,x.removeDelay);else{let v=l.get(x.id);v&&(clearTimeout(v),l.delete(x.id))}})},[a,o]),{toasts:a,handlers:{updateHeight:h,startPause:d,endPause:m,calculateOffset:y}}},K_=pi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,F_=pi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,X_=pi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Q_=Ki("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${K_} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${F_} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${X_} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,J_=pi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Z_=Ki("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${J_} 1s linear infinite;
`,W_=pi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,eS=pi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,tS=Ki("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${W_} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${eS} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,nS=Ki("div")`
  position: absolute;
`,iS=Ki("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,aS=pi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,rS=Ki("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${aS} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,sS=({toast:t})=>{let{icon:n,type:a,iconTheme:r}=t;return n!==void 0?typeof n=="string"?S.createElement(rS,null,n):n:a==="blank"?null:S.createElement(iS,null,S.createElement(Z_,{...r}),a!=="loading"&&S.createElement(nS,null,a==="error"?S.createElement(Q_,{...r}):S.createElement(tS,{...r})))},lS=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,oS=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,uS="0%{opacity:0;} 100%{opacity:1;}",cS="0%{opacity:1;} 100%{opacity:0;}",dS=Ki("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,fS=Ki("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,hS=(t,n)=>{let a=t.includes("top")?1:-1,[r,l]=fx()?[uS,cS]:[lS(a),oS(a)];return{animation:n?`${pi(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${pi(l)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},mS=S.memo(({toast:t,position:n,style:a,children:r})=>{let l=t.height?hS(t.position||n||"top-center",t.visible):{opacity:0},o=S.createElement(sS,{toast:t}),c=S.createElement(fS,{...t.ariaProps},Yo(t.message,t));return S.createElement(dS,{className:t.className,style:{...l,...a,...t.style}},typeof r=="function"?r({icon:o,message:c}):S.createElement(S.Fragment,null,o,c))});M_(S.createElement);var pS=({id:t,className:n,style:a,onHeightUpdate:r,children:l})=>{let o=S.useCallback(c=>{if(c){let d=()=>{let h=c.getBoundingClientRect().height;r(t,h)};d(),new MutationObserver(d).observe(c,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return S.createElement("div",{ref:o,className:n,style:a},l)},gS=(t,n)=>{let a=t.includes("top"),r=a?{top:0}:{bottom:0},l=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:fx()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${n*(a?1:-1)}px)`,...r,...l}},yS=au`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Eo=16,xS=({reverseOrder:t,position:n="top-center",toastOptions:a,gutter:r,children:l,toasterId:o,containerStyle:c,containerClassName:d})=>{let{toasts:h,handlers:m}=Y_(a,o);return S.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:Eo,left:Eo,right:Eo,bottom:Eo,pointerEvents:"none",...c},className:d,onMouseEnter:m.startPause,onMouseLeave:m.endPause},h.map(y=>{let x=y.position||n,v=m.calculateOffset(y,{reverseOrder:t,gutter:r,defaultPosition:n}),b=gS(x,v);return S.createElement(pS,{id:y.id,key:y.id,onHeightUpdate:m.updateHeight,className:y.visible?yS:"",style:b},y.type==="custom"?Yo(y.message,y):l?l(y):S.createElement(mS,{toast:y,position:x}))}))},we=bt;function su(t,n){var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(a[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,r=Object.getOwnPropertySymbols(t);l<r.length;l++)n.indexOf(r[l])<0&&Object.prototype.propertyIsEnumerable.call(t,r[l])&&(a[r[l]]=t[r[l]]);return a}function bS(t,n,a,r){function l(o){return o instanceof a?o:new a(function(c){c(o)})}return new(a||(a=Promise))(function(o,c){function d(y){try{m(r.next(y))}catch(x){c(x)}}function h(y){try{m(r.throw(y))}catch(x){c(x)}}function m(y){y.done?o(y.value):l(y.value).then(d,h)}m((r=r.apply(t,n||[])).next())})}const vS=t=>t?(...n)=>t(...n):(...n)=>fetch(...n);class Gf extends Error{constructor(n,a="FunctionsError",r){super(n),this.name=a,this.context=r}}class wS extends Gf{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}}class j0 extends Gf{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}}class N0 extends Gf{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}}var ff;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ff||(ff={}));class _S{constructor(n,{headers:a={},customFetch:r,region:l=ff.Any}={}){this.url=n,this.headers=a,this.region=l,this.fetch=vS(r)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return bS(this,arguments,void 0,function*(a,r={}){var l;let o,c;try{const{headers:d,method:h,body:m,signal:y,timeout:x}=r;let v={},{region:b}=r;b||(b=this.region);const k=new URL(`${this.url}/${a}`);b&&b!=="any"&&(v["x-region"]=b,k.searchParams.set("forceFunctionRegion",b));let N;m&&(d&&!Object.prototype.hasOwnProperty.call(d,"Content-Type")||!d)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(v["Content-Type"]="application/octet-stream",N=m):typeof m=="string"?(v["Content-Type"]="text/plain",N=m):typeof FormData<"u"&&m instanceof FormData?N=m:(v["Content-Type"]="application/json",N=JSON.stringify(m)):m&&typeof m!="string"&&!(typeof Blob<"u"&&m instanceof Blob)&&!(m instanceof ArrayBuffer)&&!(typeof FormData<"u"&&m instanceof FormData)?N=JSON.stringify(m):N=m;let C=y;x&&(c=new AbortController,o=setTimeout(()=>c.abort(),x),y?(C=c.signal,y.addEventListener("abort",()=>c.abort())):C=c.signal);const E=yield this.fetch(k.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},v),this.headers),d),body:N,signal:C}).catch(W=>{throw new wS(W)}),L=E.headers.get("x-relay-error");if(L&&L==="true")throw new j0(E);if(!E.ok)throw new N0(E);let R=((l=E.headers.get("Content-Type"))!==null&&l!==void 0?l:"text/plain").split(";")[0].trim(),P;return R==="application/json"?P=yield E.json():R==="application/octet-stream"||R==="application/pdf"?P=yield E.blob():R==="text/event-stream"?P=E:R==="multipart/form-data"?P=yield E.formData():P=yield E.text(),{data:P,error:null,response:E}}catch(d){return{data:null,error:d,response:d instanceof N0||d instanceof j0?d.context:void 0}}finally{o&&clearTimeout(o)}})}}var SS=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},kS=class{constructor(t){var n,a,r;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(n=t.shouldThrowOnError)!==null&&n!==void 0?n:!1,this.signal=t.signal,this.isMaybeSingle=(a=t.isMaybeSingle)!==null&&a!==void 0?a:!1,this.urlLengthLimit=(r=t.urlLengthLimit)!==null&&r!==void 0?r:8e3,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=new Headers(this.headers),this.headers.set(t,n),this}then(t,n){var a=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const r=this.fetch;let l=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let c=null,d=null,h=null,m=o.status,y=o.statusText;if(o.ok){var x,v;if(a.method!=="HEAD"){var b;const E=await o.text();E===""||(a.headers.get("Accept")==="text/csv"||a.headers.get("Accept")&&(!((b=a.headers.get("Accept"))===null||b===void 0)&&b.includes("application/vnd.pgrst.plan+text"))?d=E:d=JSON.parse(E))}const N=(x=a.headers.get("Prefer"))===null||x===void 0?void 0:x.match(/count=(exact|planned|estimated)/),C=(v=o.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");N&&C&&C.length>1&&(h=parseInt(C[1])),a.isMaybeSingle&&a.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,m=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{var k;const N=await o.text();try{c=JSON.parse(N),Array.isArray(c)&&o.status===404&&(d=[],c=null,m=200,y="OK")}catch{o.status===404&&N===""?(m=204,y="No Content"):c={message:N}}if(c&&a.isMaybeSingle&&(!(c==null||(k=c.details)===null||k===void 0)&&k.includes("0 rows"))&&(c=null,m=200,y="OK"),c&&a.shouldThrowOnError)throw new SS(c)}return{error:c,data:d,count:h,status:m,statusText:y}});return this.shouldThrowOnError||(l=l.catch(o=>{var c;let d="",h="",m="";const y=o==null?void 0:o.cause;if(y){var x,v,b,k;const E=(x=y==null?void 0:y.message)!==null&&x!==void 0?x:"",L=(v=y==null?void 0:y.code)!==null&&v!==void 0?v:"";d=`${(b=o==null?void 0:o.name)!==null&&b!==void 0?b:"FetchError"}: ${o==null?void 0:o.message}`,d+=`

Caused by: ${(k=y==null?void 0:y.name)!==null&&k!==void 0?k:"Error"}: ${E}`,L&&(d+=` (${L})`),y!=null&&y.stack&&(d+=`
${y.stack}`)}else{var N;d=(N=o==null?void 0:o.stack)!==null&&N!==void 0?N:""}const C=this.url.toString().length;return(o==null?void 0:o.name)==="AbortError"||(o==null?void 0:o.code)==="ABORT_ERR"?(m="",h="Request was aborted (timeout or manual cancellation)",C>this.urlLengthLimit&&(h+=`. Note: Your request URL is ${C} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((y==null?void 0:y.name)==="HeadersOverflowError"||(y==null?void 0:y.code)==="UND_ERR_HEADERS_OVERFLOW")&&(m="",h="HTTP headers exceeded server limits (typically 16KB)",C>this.urlLengthLimit&&(h+=`. Your request URL is ${C} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(c=o==null?void 0:o.name)!==null&&c!==void 0?c:"FetchError"}: ${o==null?void 0:o.message}`,details:d,hint:h,code:m},data:null,count:null,status:0,statusText:""}})),l.then(t,n)}returns(){return this}overrideTypes(){return this}},ES=class extends kS{select(t){let n=!1;const a=(t??"*").split("").map(r=>/\s/.test(r)&&!n?"":(r==='"'&&(n=!n),r)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:n=!0,nullsFirst:a,foreignTable:r,referencedTable:l=r}={}){const o=l?`${l}.order`:"order",c=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${c?`${c},`:""}${t}.${n?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:a=n}={}){const r=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,n,{foreignTable:a,referencedTable:r=a}={}){const l=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(l,`${t}`),this.url.searchParams.set(o,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:n=!1,settings:a=!1,buffers:r=!1,wal:l=!1,format:o="text"}={}){var c;const d=[t?"analyze":null,n?"verbose":null,a?"settings":null,r?"buffers":null,l?"wal":null].filter(Boolean).join("|"),h=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${h}"; options=${d};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const C0=new RegExp("[,()]");var xr=class extends ES{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}regexMatch(t,n){return this.url.searchParams.append(t,`match.${n}`),this}regexIMatch(t,n){return this.url.searchParams.append(t,`imatch.${n}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}isDistinct(t,n){return this.url.searchParams.append(t,`isdistinct.${n}`),this}in(t,n){const a=Array.from(new Set(n)).map(r=>typeof r=="string"&&C0.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${a})`),this}notIn(t,n){const a=Array.from(new Set(n)).map(r=>typeof r=="string"&&C0.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`not.in.(${a})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:a,type:r}={}){let l="";r==="plain"?l="pl":r==="phrase"?l="ph":r==="websearch"&&(l="w");const o=a===void 0?"":`(${a})`;return this.url.searchParams.append(t,`${l}fts${o}.${n}`),this}match(t){return Object.entries(t).forEach(([n,a])=>{this.url.searchParams.append(n,`eq.${a}`)}),this}not(t,n,a){return this.url.searchParams.append(t,`not.${n}.${a}`),this}or(t,{foreignTable:n,referencedTable:a=n}={}){const r=a?`${a}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,n,a){return this.url.searchParams.append(t,`${n}.${a}`),this}},jS=class{constructor(t,{headers:n={},schema:a,fetch:r,urlLengthLimit:l=8e3}){this.url=t,this.headers=new Headers(n),this.schema=a,this.fetch=r,this.urlLengthLimit=l}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(t,n){const{head:a=!1,count:r}=n??{},l=a?"HEAD":"GET";let o=!1;const c=(t??"*").split("").map(m=>/\s/.test(m)&&!o?"":(m==='"'&&(o=!o),m)).join(""),{url:d,headers:h}=this.cloneRequestState();return d.searchParams.set("select",c),r&&h.append("Prefer",`count=${r}`),new xr({method:l,url:d,headers:h,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(t,{count:n,defaultToNull:a=!0}={}){var r;const l="POST",{url:o,headers:c}=this.cloneRequestState();if(n&&c.append("Prefer",`count=${n}`),a||c.append("Prefer","missing=default"),Array.isArray(t)){const d=t.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(d.length>0){const h=[...new Set(d)].map(m=>`"${m}"`);o.searchParams.set("columns",h.join(","))}}return new xr({method:l,url:o,headers:c,schema:this.schema,body:t,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(t,{onConflict:n,ignoreDuplicates:a=!1,count:r,defaultToNull:l=!0}={}){var o;const c="POST",{url:d,headers:h}=this.cloneRequestState();if(h.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),n!==void 0&&d.searchParams.set("on_conflict",n),r&&h.append("Prefer",`count=${r}`),l||h.append("Prefer","missing=default"),Array.isArray(t)){const m=t.reduce((y,x)=>y.concat(Object.keys(x)),[]);if(m.length>0){const y=[...new Set(m)].map(x=>`"${x}"`);d.searchParams.set("columns",y.join(","))}}return new xr({method:c,url:d,headers:h,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}update(t,{count:n}={}){var a;const r="PATCH",{url:l,headers:o}=this.cloneRequestState();return n&&o.append("Prefer",`count=${n}`),new xr({method:r,url:l,headers:o,schema:this.schema,body:t,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:t}={}){var n;const a="DELETE",{url:r,headers:l}=this.cloneRequestState();return t&&l.append("Prefer",`count=${t}`),new xr({method:a,url:r,headers:l,schema:this.schema,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch,urlLengthLimit:this.urlLengthLimit})}};function Hs(t){"@babel/helpers - typeof";return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Hs(t)}function NS(t,n){if(Hs(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,n);if(Hs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function CS(t){var n=NS(t,"string");return Hs(n)=="symbol"?n:n+""}function TS(t,n,a){return(n=CS(n))in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function T0(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),a.push.apply(a,r)}return a}function jo(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?T0(Object(a),!0).forEach(function(r){TS(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):T0(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}var AS=class yx{constructor(n,{headers:a={},schema:r,fetch:l,timeout:o,urlLengthLimit:c=8e3}={}){this.url=n,this.headers=new Headers(a),this.schemaName=r,this.urlLengthLimit=c;const d=l??globalThis.fetch;o!==void 0&&o>0?this.fetch=(h,m)=>{const y=new AbortController,x=setTimeout(()=>y.abort(),o),v=m==null?void 0:m.signal;if(v){if(v.aborted)return clearTimeout(x),d(h,m);const b=()=>{clearTimeout(x),y.abort()};return v.addEventListener("abort",b,{once:!0}),d(h,jo(jo({},m),{},{signal:y.signal})).finally(()=>{clearTimeout(x),v.removeEventListener("abort",b)})}return d(h,jo(jo({},m),{},{signal:y.signal})).finally(()=>clearTimeout(x))}:this.fetch=d}from(n){if(!n||typeof n!="string"||n.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new jS(new URL(`${this.url}/${n}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(n){return new yx(this.url,{headers:this.headers,schema:n,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(n,a={},{head:r=!1,get:l=!1,count:o}={}){var c;let d;const h=new URL(`${this.url}/rpc/${n}`);let m;const y=b=>b!==null&&typeof b=="object"&&(!Array.isArray(b)||b.some(y)),x=r&&Object.values(a).some(y);x?(d="POST",m=a):r||l?(d=r?"HEAD":"GET",Object.entries(a).filter(([b,k])=>k!==void 0).map(([b,k])=>[b,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([b,k])=>{h.searchParams.append(b,k)})):(d="POST",m=a);const v=new Headers(this.headers);return x?v.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&v.set("Prefer",`count=${o}`),new xr({method:d,url:h,headers:v,schema:this.schemaName,body:m,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}};class RS{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const a=globalThis.process;if(a){const r=a.versions;if(r&&r.node){const l=r.node,o=parseInt(l.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let a=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(a+=`

Suggested solution: ${n.workaround}`),new Error(a)}static createWebSocket(n,a){const r=this.getWebSocketConstructor();return new r(n,a)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const OS="2.98.0",DS=`realtime-js/${OS}`,LS="1.0.0",xx="2.0.0",A0=xx,hf=1e4,zS=1e3,US=100;var Pi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Pi||(Pi={}));var xt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(xt||(xt={}));var An;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(An||(An={}));var mf;(function(t){t.websocket="websocket"})(mf||(mf={}));var ya;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ya||(ya={}));class MS{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,a){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return a(this._binaryEncodeUserBroadcastPush(n));let r=[n.join_ref,n.ref,n.topic,n.event,n.payload];return a(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(n){var a;return this._isArrayBuffer((a=n.payload)===null||a===void 0?void 0:a.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var a,r;const l=(r=(a=n.payload)===null||a===void 0?void 0:a.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,l)}_encodeJsonUserBroadcastPush(n){var a,r;const l=(r=(a=n.payload)===null||a===void 0?void 0:a.payload)!==null&&r!==void 0?r:{},c=new TextEncoder().encode(JSON.stringify(l)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(n,a,r){var l,o;const c=n.topic,d=(l=n.ref)!==null&&l!==void 0?l:"",h=(o=n.join_ref)!==null&&o!==void 0?o:"",m=n.payload.event,y=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},x=Object.keys(y).length===0?"":JSON.stringify(y);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`ref length ${d.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`metadata length ${x.length} exceeds maximum of 255`);const v=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+d.length+c.length+m.length+x.length,b=new ArrayBuffer(this.HEADER_LENGTH+v);let k=new DataView(b),N=0;k.setUint8(N++,this.KINDS.userBroadcastPush),k.setUint8(N++,h.length),k.setUint8(N++,d.length),k.setUint8(N++,c.length),k.setUint8(N++,m.length),k.setUint8(N++,x.length),k.setUint8(N++,a),Array.from(h,E=>k.setUint8(N++,E.charCodeAt(0))),Array.from(d,E=>k.setUint8(N++,E.charCodeAt(0))),Array.from(c,E=>k.setUint8(N++,E.charCodeAt(0))),Array.from(m,E=>k.setUint8(N++,E.charCodeAt(0))),Array.from(x,E=>k.setUint8(N++,E.charCodeAt(0)));var C=new Uint8Array(b.byteLength+r.byteLength);return C.set(new Uint8Array(b),0),C.set(new Uint8Array(r),b.byteLength),C.buffer}decode(n,a){if(this._isArrayBuffer(n)){let r=this._binaryDecode(n);return a(r)}if(typeof n=="string"){const r=JSON.parse(n),[l,o,c,d,h]=r;return a({join_ref:l,ref:o,topic:c,event:d,payload:h})}return a({})}_binaryDecode(n){const a=new DataView(n),r=a.getUint8(0),l=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,a,l)}}_decodeUserBroadcast(n,a,r){const l=a.getUint8(1),o=a.getUint8(2),c=a.getUint8(3),d=a.getUint8(4);let h=this.HEADER_LENGTH+4;const m=r.decode(n.slice(h,h+l));h=h+l;const y=r.decode(n.slice(h,h+o));h=h+o;const x=r.decode(n.slice(h,h+c));h=h+c;const v=n.slice(h,n.byteLength),b=d===this.JSON_ENCODING?JSON.parse(r.decode(v)):v,k={type:this.BROADCAST_EVENT,event:y,payload:b};return c>0&&(k.meta=JSON.parse(x)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:k}}_isArrayBuffer(n){var a;return n instanceof ArrayBuffer||((a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name)==="ArrayBuffer"}_pick(n,a){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([r])=>a.includes(r)))}}class bx{constructor(n,a){this.callback=n,this.timerCalc=a,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=a}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Qe;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Qe||(Qe={}));const R0=(t,n,a={})=>{var r;const l=(r=a.skipTypes)!==null&&r!==void 0?r:[];return n?Object.keys(n).reduce((o,c)=>(o[c]=BS(c,t,n,l),o),{}):{}},BS=(t,n,a,r)=>{const l=n.find(d=>d.name===t),o=l==null?void 0:l.type,c=a[t];return o&&!r.includes(o)?vx(o,c):pf(c)},vx=(t,n)=>{if(t.charAt(0)==="_"){const a=t.slice(1,t.length);return $S(n,a)}switch(t){case Qe.bool:return qS(n);case Qe.float4:case Qe.float8:case Qe.int2:case Qe.int4:case Qe.int8:case Qe.numeric:case Qe.oid:return IS(n);case Qe.json:case Qe.jsonb:return HS(n);case Qe.timestamp:return VS(n);case Qe.abstime:case Qe.date:case Qe.daterange:case Qe.int4range:case Qe.int8range:case Qe.money:case Qe.reltime:case Qe.text:case Qe.time:case Qe.timestamptz:case Qe.timetz:case Qe.tsrange:case Qe.tstzrange:return pf(n);default:return pf(n)}},pf=t=>t,qS=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},IS=t=>{if(typeof t=="string"){const n=parseFloat(t);if(!Number.isNaN(n))return n}return t},HS=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},$S=(t,n)=>{if(typeof t!="string")return t;const a=t.length-1,r=t[a];if(t[0]==="{"&&r==="}"){let o;const c=t.slice(1,a);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(d=>vx(n,d))}return t},VS=t=>typeof t=="string"?t.replace(" ","T"):t,wx=t=>{const n=new URL(t);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class Md{constructor(n,a,r={},l=hf){this.channel=n,this.event=a,this.payload=r,this.timeout=l,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,a){var r;return this._hasReceived(n)&&a((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:n,callback:a}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=a=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=a,this._matchReceive(a)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,a){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:a})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:a}){this.recHooks.filter(r=>r.status===n).forEach(r=>r.callback(a))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var O0;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(O0||(O0={}));class zs{constructor(n,a){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(a==null?void 0:a.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},l=>{const{onJoin:o,onLeave:c,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zs.syncState(this.state,l,o,c),this.pendingDiffs.forEach(h=>{this.state=zs.syncDiff(this.state,h,o,c)}),this.pendingDiffs=[],d()}),this.channel._on(r.diff,{},l=>{const{onJoin:o,onLeave:c,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(l):(this.state=zs.syncDiff(this.state,l,o,c),d())}),this.onJoin((l,o,c)=>{this.channel._trigger("presence",{event:"join",key:l,currentPresences:o,newPresences:c})}),this.onLeave((l,o,c)=>{this.channel._trigger("presence",{event:"leave",key:l,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,a,r,l){const o=this.cloneDeep(n),c=this.transformState(a),d={},h={};return this.map(o,(m,y)=>{c[m]||(h[m]=y)}),this.map(c,(m,y)=>{const x=o[m];if(x){const v=y.map(C=>C.presence_ref),b=x.map(C=>C.presence_ref),k=y.filter(C=>b.indexOf(C.presence_ref)<0),N=x.filter(C=>v.indexOf(C.presence_ref)<0);k.length>0&&(d[m]=k),N.length>0&&(h[m]=N)}else d[m]=y}),this.syncDiff(o,{joins:d,leaves:h},r,l)}static syncDiff(n,a,r,l){const{joins:o,leaves:c}={joins:this.transformState(a.joins),leaves:this.transformState(a.leaves)};return r||(r=()=>{}),l||(l=()=>{}),this.map(o,(d,h)=>{var m;const y=(m=n[d])!==null&&m!==void 0?m:[];if(n[d]=this.cloneDeep(h),y.length>0){const x=n[d].map(b=>b.presence_ref),v=y.filter(b=>x.indexOf(b.presence_ref)<0);n[d].unshift(...v)}r(d,y,h)}),this.map(c,(d,h)=>{let m=n[d];if(!m)return;const y=h.map(x=>x.presence_ref);m=m.filter(x=>y.indexOf(x.presence_ref)<0),n[d]=m,l(d,m,h),m.length===0&&delete n[d]}),n}static map(n,a){return Object.getOwnPropertyNames(n).map(r=>a(r,n[r]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((a,r)=>{const l=n[r];return"metas"in l?a[r]=l.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):a[r]=l,a},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var D0;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(D0||(D0={}));var Us;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Us||(Us={}));var hi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(hi||(hi={}));class _r{constructor(n,a={config:{}},r){var l,o;if(this.topic=n,this.params=a,this.socket=r,this.bindings={},this.state=xt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},a.config),this.timeout=this.socket.timeout,this.joinPush=new Md(this,An.join,this.params,this.timeout),this.rejoinTimer=new bx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xt.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=xt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(An.reply,{},(c,d)=>{this._trigger(this._replyEventName(d),c)}),this.presence=new zs(this),this.broadcastEndpointURL=wx(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(l=this.params.config)===null||l===void 0?void 0:l.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,a=this.timeout){var r,l,o;if(this.socket.isConnected()||this.socket.connect(),this.state==xt.closed){const{config:{broadcast:c,presence:d,private:h}}=this.params,m=(l=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(b=>b.filter))!==null&&l!==void 0?l:[],y=!!this.bindings[Us.PRESENCE]&&this.bindings[Us.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,x={},v={broadcast:c,presence:Object.assign(Object.assign({},d),{enabled:y}),postgres_changes:m,private:h};this.socket.accessTokenValue&&(x.access_token=this.socket.accessTokenValue),this._onError(b=>n==null?void 0:n(hi.CHANNEL_ERROR,b)),this._onClose(()=>n==null?void 0:n(hi.CLOSED)),this.updateJoinPayload(Object.assign({config:v},x)),this.joinedOnce=!0,this._rejoin(a),this.joinPush.receive("ok",async({postgres_changes:b})=>{var k;if(this.socket._isManualToken()||this.socket.setAuth(),b===void 0){n==null||n(hi.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,C=(k=N==null?void 0:N.length)!==null&&k!==void 0?k:0,E=[];for(let L=0;L<C;L++){const R=N[L],{filter:{event:P,schema:W,table:z,filter:Y}}=R,te=b&&b[L];if(te&&te.event===P&&_r.isFilterValueEqual(te.schema,W)&&_r.isFilterValueEqual(te.table,z)&&_r.isFilterValueEqual(te.filter,Y))E.push(Object.assign(Object.assign({},R),{id:te.id}));else{this.unsubscribe(),this.state=xt.errored,n==null||n(hi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,n&&n(hi.SUBSCRIBED);return}}).receive("error",b=>{this.state=xt.errored,n==null||n(hi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(hi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,a={}){return await this.send({type:"presence",event:"track",payload:n},a.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,a,r){return this.state===xt.joined&&n===Us.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(n,a,r)}async httpSend(n,a,r={}){var l;if(a==null)return Promise.reject("Payload is required for httpSend()");const o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(l=r.timeout)!==null&&l!==void 0?l:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const m=await d.json();h=m.error||m.message||h}catch{}return Promise.reject(new Error(h))}async send(n,a={}){var r,l;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:c}=n,d={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(d.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:d,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=a.timeout)!==null&&r!==void 0?r:this.timeout);return await((l=m.body)===null||l===void 0?void 0:l.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,d,h;const m=this._push(n.type,n,a.timeout||this.timeout);n.type==="broadcast"&&!(!((h=(d=(c=this.params)===null||c===void 0?void 0:c.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),m.receive("ok",()=>o("ok")),m.receive("error",()=>o("error")),m.receive("timeout",()=>o("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=xt.leaving;const a=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(An.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(l=>{r=new Md(this,An.leave,{},n),r.receive("ok",()=>{a(),l("ok")}).receive("timeout",()=>{a(),l("timed out")}).receive("error",()=>{l("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xt.closed,this.bindings={}}async _fetchWithTimeout(n,a,r){const l=new AbortController,o=setTimeout(()=>l.abort(),r),c=await this.socket.fetch(n,Object.assign(Object.assign({},a),{signal:l.signal}));return clearTimeout(o),c}_push(n,a,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let l=new Md(this,n,a,r);return this._canPush()?l.send():this._addToPushBuffer(l),l}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>US){const a=this.pushBuffer.shift();a&&(a.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${a.event}`,a.payload))}}_onMessage(n,a,r){return a}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,a,r){var l,o;const c=n.toLocaleLowerCase(),{close:d,error:h,leave:m,join:y}=An;if(r&&[d,h,m,y].indexOf(c)>=0&&r!==this._joinRef())return;let v=this._onMessage(c,a,r);if(a&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(l=this.bindings.postgres_changes)===null||l===void 0||l.filter(b=>{var k,N,C;return((k=b.filter)===null||k===void 0?void 0:k.event)==="*"||((C=(N=b.filter)===null||N===void 0?void 0:N.event)===null||C===void 0?void 0:C.toLocaleLowerCase())===c}).map(b=>b.callback(v,r)):(o=this.bindings[c])===null||o===void 0||o.filter(b=>{var k,N,C,E,L,R;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in b){const P=b.id,W=(k=b.filter)===null||k===void 0?void 0:k.event;return P&&((N=a.ids)===null||N===void 0?void 0:N.includes(P))&&(W==="*"||(W==null?void 0:W.toLocaleLowerCase())===((C=a.data)===null||C===void 0?void 0:C.type.toLocaleLowerCase()))}else{const P=(L=(E=b==null?void 0:b.filter)===null||E===void 0?void 0:E.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return P==="*"||P===((R=a==null?void 0:a.event)===null||R===void 0?void 0:R.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===c}).map(b=>{if(typeof v=="object"&&"ids"in v){const k=v.data,{schema:N,table:C,commit_timestamp:E,type:L,errors:R}=k;v=Object.assign(Object.assign({},{schema:N,table:C,commit_timestamp:E,eventType:L,new:{},old:{},errors:R}),this._getPayloadRecords(k))}b.callback(v,r)})}_isClosed(){return this.state===xt.closed}_isJoined(){return this.state===xt.joined}_isJoining(){return this.state===xt.joining}_isLeaving(){return this.state===xt.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,a,r){const l=n.toLocaleLowerCase(),o={type:l,filter:a,callback:r};return this.bindings[l]?this.bindings[l].push(o):this.bindings[l]=[o],this}_off(n,a){const r=n.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(l=>{var o;return!(((o=l.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&_r.isEqual(l.filter,a))})),this}static isEqual(n,a){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const r in n)if(n[r]!==a[r])return!1;return!0}static isFilterValueEqual(n,a){return(n??void 0)===(a??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(An.close,{},n)}_onError(n){this._on(An.error,{},a=>n(a))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xt.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const a={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(a.new=R0(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(a.old=R0(n.columns,n.old_record)),a}}const Bd=()=>{},No={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},PS=[1e3,2e3,5e3,1e4],GS=1e4,YS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class KS{constructor(n,a){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hf,this.transport=null,this.heartbeatIntervalMs=No.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bd,this.ref=0,this.reconnectTimer=null,this.vsn=A0,this.logger=Bd,this.conn=null,this.sendBuffer=[],this.serializer=new MS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=l=>l?(...o)=>l(...o):(...o)=>fetch(...o),!(!((r=a==null?void 0:a.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=a.params.apikey,this.endPoint=`${n}/${mf.websocket}`,this.httpEndpoint=wx(n),this._initializeOptions(a),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(a==null?void 0:a.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=RS.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const a=n.message;throw a.includes("Node.js")?new Error(`${a}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${a}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,a){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,a??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const a=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),a}async removeAllChannels(){const n=await Promise.all(this.channels.map(a=>a.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,a,r){this.logger(n,a,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Pi.connecting:return ya.Connecting;case Pi.open:return ya.Open;case Pi.closing:return ya.Closing;default:return ya.Closed}}isConnected(){return this.connectionState()===ya.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,a={config:{}}){const r=`realtime:${n}`,l=this.getChannels().find(o=>o.topic===r);if(l)return l;{const o=new _r(`realtime:${n}`,a,this);return this.channels.push(o),o}}push(n){const{topic:a,event:r,payload:l,ref:o}=n,c=()=>{this.encode(n,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${a} ${r} (${o})`,l),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(a){this.log("error","error in heartbeat callback",a)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(a){this.log("error","error in heartbeat callback",a)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(zS,"heartbeat timeout"),setTimeout(()=>{var a;this.isConnected()||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout()},No.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(a){this.log("error","error in heartbeat callback",a)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let a=this.channels.find(r=>r.topic===n&&(r._isJoined()||r._isJoining()));a&&(this.log("transport",`leaving duplicate topic "${n}"`),a.unsubscribe())}_remove(n){this.channels=this.channels.filter(a=>a.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,a=>{if(a.topic==="phoenix"&&a.event==="phx_reply"&&a.ref&&a.ref===this.pendingHeartbeatRef){const m=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(a.payload.status==="ok"?"ok":"error",m)}catch(y){this.log("error","error in heartbeat callback",y)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:r,event:l,payload:o,ref:c}=a,d=c?`(${c})`:"",h=o.status||"";this.log("receive",`${h} ${r} ${l} ${d}`.trim(),o),this.channels.filter(m=>m._isMember(r)).forEach(m=>m._trigger(l,o,c)),this._triggerStateCallbacks("message",a)})}_clearTimer(n){var a;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((a=this.reconnectTimer)===null||a===void 0||a.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n),this.conn.readyState===Pi.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Pi.open||this.conn.readyState===Pi.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.accessTokenValue&&(this.channels.forEach(a=>{a.updateJoinPayload({access_token:this.accessTokenValue})}),this.sendBuffer=[],this.channels.forEach(a=>{a._isJoining()&&(a.joinPush.sent=!1,a.joinPush.send())})),this.flushSendBuffer()}).catch(a=>{this.log("error","error waiting for auth on connect",a),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=a=>{this.log("worker","worker error",a.message),this._terminateWorker()},this.workerRef.onmessage=a=>{a.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(n){var a;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(a=this.reconnectTimer)===null||a===void 0||a.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n);try{this.heartbeatCallback("error")}catch(a){this.log("error","error in heartbeat callback",a)}}_triggerChanError(){this.channels.forEach(n=>n._trigger(An.error))}_appendParams(n,a){if(Object.keys(a).length===0)return n;const r=n.match(/\?/)?"&":"?",l=new URLSearchParams(a);return`${n}${r}${l}`}_workerObjectUrl(n){let a;if(n)a=n;else{const r=new Blob([YS],{type:"application/javascript"});a=URL.createObjectURL(r)}return a}_setConnectionState(n,a=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=a)}async _performAuth(n=null){let a,r=!1;if(n)a=n,r=!0;else if(this.accessToken)try{a=await this.accessToken()}catch(l){this.log("error","Error fetching access token from callback",l),a=this.accessTokenValue}else a=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=a&&(this.accessTokenValue=a,this.channels.forEach(l=>{const o={access_token:a,version:DS};a&&l.updateJoinPayload(o),l.joinedOnce&&l._isJoined()&&l._push(An.access_token,{access_token:a})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this._isManualToken()||this.setAuth().catch(a=>{this.log("error",`Error setting auth in ${n}`,a)})}_triggerStateCallbacks(n,a){try{this.stateChangeCallbacks[n].forEach(r=>{try{r(a)}catch(l){this.log("error",`error in ${n} callback`,l)}})}catch(r){this.log("error",`error triggering ${n} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new bx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},No.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var a,r,l,o,c,d,h,m,y,x,v,b;switch(this.transport=(a=n==null?void 0:n.transport)!==null&&a!==void 0?a:null,this.timeout=(r=n==null?void 0:n.timeout)!==null&&r!==void 0?r:hf,this.heartbeatIntervalMs=(l=n==null?void 0:n.heartbeatIntervalMs)!==null&&l!==void 0?l:No.HEARTBEAT_INTERVAL,this.worker=(o=n==null?void 0:n.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=n==null?void 0:n.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(d=n==null?void 0:n.heartbeatCallback)!==null&&d!==void 0?d:Bd,this.vsn=(h=n==null?void 0:n.vsn)!==null&&h!==void 0?h:A0,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=n==null?void 0:n.reconnectAfterMs)!==null&&m!==void 0?m:(k=>PS[k-1]||GS),this.vsn){case LS:this.encode=(y=n==null?void 0:n.encode)!==null&&y!==void 0?y:((k,N)=>N(JSON.stringify(k))),this.decode=(x=n==null?void 0:n.decode)!==null&&x!==void 0?x:((k,N)=>N(JSON.parse(k)));break;case xx:this.encode=(v=n==null?void 0:n.encode)!==null&&v!==void 0?v:this.serializer.encode.bind(this.serializer),this.decode=(b=n==null?void 0:n.decode)!==null&&b!==void 0?b:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}}var $s=class extends Error{constructor(t,n){var a;super(t),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&((a=n.icebergType)==null?void 0:a.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function FS(t,n,a){const r=new URL(n,t);if(a)for(const[l,o]of Object.entries(a))o!==void 0&&r.searchParams.set(l,o);return r.toString()}async function XS(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function QS(t){const n=t.fetchImpl??globalThis.fetch;return{async request({method:a,path:r,query:l,body:o,headers:c}){const d=FS(t.baseUrl,r,l),h=await XS(t.auth),m=await n(d,{method:a,headers:{...o?{"Content-Type":"application/json"}:{},...h,...c},body:o?JSON.stringify(o):void 0}),y=await m.text(),x=(m.headers.get("content-type")||"").includes("application/json"),v=x&&y?JSON.parse(y):y;if(!m.ok){const b=x?v:void 0,k=b==null?void 0:b.error;throw new $s((k==null?void 0:k.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:k==null?void 0:k.type,icebergCode:k==null?void 0:k.code,details:b})}return{status:m.status,headers:m.headers,data:v}}}}function Co(t){return t.join("")}var JS=class{constructor(t,n=""){this.client=t,this.prefix=n}async listNamespaces(t){const n=t?{parent:Co(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,n){const a={namespace:t.namespace,properties:n==null?void 0:n.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:a})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Co(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Co(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Co(t.namespace)}`}),!0}catch(n){if(n instanceof $s&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(t,n){try{return await this.createNamespace(t,n)}catch(a){if(a instanceof $s&&a.status===409)return;throw a}}};function ur(t){return t.join("")}var ZS=class{constructor(t,n="",a){this.client=t,this.prefix=n,this.accessDelegation=a}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ur(t.namespace)}/tables`})).data.identifiers}async createTable(t,n){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ur(t.namespace)}/tables`,body:n,headers:a})).data.metadata}async updateTable(t,n){const a=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ur(t.namespace)}/tables/${t.name}`,body:n});return{"metadata-location":a.data["metadata-location"],metadata:a.data.metadata}}async dropTable(t,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ur(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((n==null?void 0:n.purge)??!1)}})}async loadTable(t){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ur(t.namespace)}/tables/${t.name}`,headers:n})).data.metadata}async tableExists(t){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ur(t.namespace)}/tables/${t.name}`,headers:n}),!0}catch(a){if(a instanceof $s&&a.status===404)return!1;throw a}}async createTableIfNotExists(t,n){try{return await this.createTable(t,n)}catch(a){if(a instanceof $s&&a.status===409)return await this.loadTable({namespace:t.namespace,name:n.name});throw a}}},WS=class{constructor(t){var r;let n="v1";t.catalogName&&(n+=`/${t.catalogName}`);const a=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=QS({baseUrl:a,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new JS(this.client,n),this.tableOps=new ZS(this.client,n,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,n){return this.namespaceOps.createNamespace(t,n)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,n){return this.tableOps.createTable(t,n)}async updateTable(t,n){return this.tableOps.updateTable(t,n)}async dropTable(t,n){await this.tableOps.dropTable(t,n)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,n){return this.namespaceOps.createNamespaceIfNotExists(t,n)}async createTableIfNotExists(t,n){return this.tableOps.createTableIfNotExists(t,n)}},lu=class extends Error{constructor(t,n="storage",a,r){super(t),this.__isStorageError=!0,this.namespace=n,this.name=n==="vectors"?"StorageVectorsError":"StorageError",this.status=a,this.statusCode=r}};function ou(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var To=class extends lu{constructor(t,n,a,r="storage"){super(t,r,n,a),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=n,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},_x=class extends lu{constructor(t,n,a="storage"){super(t,a),this.name=a==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=n}};const e2=t=>t?(...n)=>t(...n):(...n)=>fetch(...n),t2=t=>{if(typeof t!="object"||t===null)return!1;const n=Object.getPrototypeOf(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gf=t=>{if(Array.isArray(t))return t.map(a=>gf(a));if(typeof t=="function"||t!==Object(t))return t;const n={};return Object.entries(t).forEach(([a,r])=>{const l=a.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));n[l]=gf(r)}),n},n2=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function Vs(t){"@babel/helpers - typeof";return Vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vs(t)}function i2(t,n){if(Vs(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,n);if(Vs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function a2(t){var n=i2(t,"string");return Vs(n)=="symbol"?n:n+""}function r2(t,n,a){return(n=a2(n))in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function L0(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),a.push.apply(a,r)}return a}function ve(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?L0(Object(a),!0).forEach(function(r){r2(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):L0(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}const z0=t=>{var n;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(n=t.error)===null||n===void 0?void 0:n.message)||JSON.stringify(t)},s2=async(t,n,a,r)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(a!=null&&a.noResolveJson)){const l=t,o=l.status||500;if(typeof l.json=="function")l.json().then(c=>{const d=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||o+"";n(new To(z0(c),o,d,r))}).catch(()=>{if(r==="vectors"){const c=o+"";n(new To(l.statusText||`HTTP ${o} error`,o,c,r))}else{const c=o+"";n(new To(l.statusText||`HTTP ${o} error`,o,c,r))}});else{const c=o+"";n(new To(l.statusText||`HTTP ${o} error`,o,c,r))}}else n(new _x(z0(t),t,r))},l2=(t,n,a,r)=>{const l={method:t,headers:(n==null?void 0:n.headers)||{}};return t==="GET"||t==="HEAD"||!r?ve(ve({},l),a):(t2(r)?(l.headers=ve({"Content-Type":"application/json"},n==null?void 0:n.headers),l.body=JSON.stringify(r)):l.body=r,n!=null&&n.duplex&&(l.duplex=n.duplex),ve(ve({},l),a))};async function Cs(t,n,a,r,l,o,c){return new Promise((d,h)=>{t(a,l2(n,r,l,o)).then(m=>{if(!m.ok)throw m;if(r!=null&&r.noResolveJson)return m;if(c==="vectors"){const y=m.headers.get("content-type");if(m.headers.get("content-length")==="0"||m.status===204)return{};if(!y||!y.includes("application/json"))return{}}return m.json()}).then(m=>d(m)).catch(m=>s2(m,h,r,c))})}function Sx(t="storage"){return{get:async(n,a,r,l)=>Cs(n,"GET",a,r,l,void 0,t),post:async(n,a,r,l,o)=>Cs(n,"POST",a,l,o,r,t),put:async(n,a,r,l,o)=>Cs(n,"PUT",a,l,o,r,t),head:async(n,a,r,l)=>Cs(n,"HEAD",a,ve(ve({},r),{},{noResolveJson:!0}),l,void 0,t),remove:async(n,a,r,l,o)=>Cs(n,"DELETE",a,l,o,r,t)}}const o2=Sx("storage"),{get:Ps,post:Tn,put:yf,head:u2,remove:Yf}=o2,on=Sx("vectors");var Tr=class{constructor(t,n={},a,r="storage"){this.shouldThrowOnError=!1,this.url=t,this.headers=n,this.fetch=e2(a),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=ve(ve({},this.headers),{},{[t]:n}),this}async handleOperation(t){var n=this;try{return{data:await t(),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(ou(a))return{data:null,error:a};throw a}}},c2=class{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n}then(t,n){return this.execute().then(t,n)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ou(n))return{data:null,error:n};throw n}}};let kx;kx=Symbol.toStringTag;var d2=class{constructor(t,n){this.downloadFn=t,this.shouldThrowOnError=n,this[kx]="BlobDownloadBuilder",this.promise=null}asStream(){return new c2(this.downloadFn,this.shouldThrowOnError)}then(t,n){return this.getPromise().then(t,n)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(ou(n))return{data:null,error:n};throw n}}};const f2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},U0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var h2=class extends Tr{constructor(t,n={},a,r){super(t,n,r,"storage"),this.bucketId=a}async uploadOrUpdate(t,n,a,r){var l=this;return l.handleOperation(async()=>{let o;const c=ve(ve({},U0),r);let d=ve(ve({},l.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const h=c.metadata;typeof Blob<"u"&&a instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),h&&o.append("metadata",l.encodeMetadata(h)),o.append("",a)):typeof FormData<"u"&&a instanceof FormData?(o=a,o.has("cacheControl")||o.append("cacheControl",c.cacheControl),h&&!o.has("metadata")&&o.append("metadata",l.encodeMetadata(h))):(o=a,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType,h&&(d["x-metadata"]=l.toBase64(l.encodeMetadata(h))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!c.duplex&&(c.duplex="half")),r!=null&&r.headers&&(d=ve(ve({},d),r.headers));const m=l._removeEmptyFolders(n),y=l._getFinalPath(m),x=await(t=="PUT"?yf:Tn)(l.fetch,`${l.url}/object/${y}`,o,ve({headers:d},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{path:m,id:x.Id,fullPath:x.Key}})}async upload(t,n,a){return this.uploadOrUpdate("POST",t,n,a)}async uploadToSignedUrl(t,n,a,r){var l=this;const o=l._removeEmptyFolders(t),c=l._getFinalPath(o),d=new URL(l.url+`/object/upload/sign/${c}`);return d.searchParams.set("token",n),l.handleOperation(async()=>{let h;const m=ve({upsert:U0.upsert},r),y=ve(ve({},l.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&a instanceof Blob?(h=new FormData,h.append("cacheControl",m.cacheControl),h.append("",a)):typeof FormData<"u"&&a instanceof FormData?(h=a,h.append("cacheControl",m.cacheControl)):(h=a,y["cache-control"]=`max-age=${m.cacheControl}`,y["content-type"]=m.contentType),{path:o,fullPath:(await yf(l.fetch,d.toString(),h,{headers:y})).Key}})}async createSignedUploadUrl(t,n){var a=this;return a.handleOperation(async()=>{let r=a._getFinalPath(t);const l=ve({},a.headers);n!=null&&n.upsert&&(l["x-upsert"]="true");const o=await Tn(a.fetch,`${a.url}/object/upload/sign/${r}`,{},{headers:l}),c=new URL(a.url+o.url),d=c.searchParams.get("token");if(!d)throw new lu("No token returned by API");return{signedUrl:c.toString(),path:t,token:d}})}async update(t,n,a){return this.uploadOrUpdate("PUT",t,n,a)}async move(t,n,a){var r=this;return r.handleOperation(async()=>await Tn(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:t,destinationKey:n,destinationBucket:a==null?void 0:a.destinationBucket},{headers:r.headers}))}async copy(t,n,a){var r=this;return r.handleOperation(async()=>({path:(await Tn(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:t,destinationKey:n,destinationBucket:a==null?void 0:a.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(t,n,a){var r=this;return r.handleOperation(async()=>{let l=r._getFinalPath(t),o=await Tn(r.fetch,`${r.url}/object/sign/${l}`,ve({expiresIn:n},a!=null&&a.transform?{transform:a.transform}:{}),{headers:r.headers});const c=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${c}`)}})}async createSignedUrls(t,n,a){var r=this;return r.handleOperation(async()=>{const l=await Tn(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:n,paths:t},{headers:r.headers}),o=a!=null&&a.download?`&download=${a.download===!0?"":a.download}`:"";return l.map(c=>ve(ve({},c),{},{signedUrl:c.signedURL?encodeURI(`${r.url}${c.signedURL}${o}`):null}))})}download(t,n,a){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=l?`?${l}`:"",c=this._getFinalPath(t),d=()=>Ps(this.fetch,`${this.url}/${r}/${c}${o}`,{headers:this.headers,noResolveJson:!0},a);return new d2(d,this.shouldThrowOnError)}async info(t){var n=this;const a=n._getFinalPath(t);return n.handleOperation(async()=>gf(await Ps(n.fetch,`${n.url}/object/info/${a}`,{headers:n.headers})))}async exists(t){var n=this;const a=n._getFinalPath(t);try{return await u2(n.fetch,`${n.url}/object/${a}`,{headers:n.headers}),{data:!0,error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ou(r)&&r instanceof _x){const l=r.originalError;if([400,404].includes(l==null?void 0:l.status))return{data:!1,error:r}}throw r}}getPublicUrl(t,n){const a=this._getFinalPath(t),r=[],l=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&r.push(l);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&r.push(c);let d=r.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${a}${d}`)}}}async remove(t){var n=this;return n.handleOperation(async()=>await Yf(n.fetch,`${n.url}/object/${n.bucketId}`,{prefixes:t},{headers:n.headers}))}async list(t,n,a){var r=this;return r.handleOperation(async()=>{const l=ve(ve(ve({},f2),n),{},{prefix:t||""});return await Tn(r.fetch,`${r.url}/object/list/${r.bucketId}`,l,{headers:r.headers},a)})}async listV2(t,n){var a=this;return a.handleOperation(async()=>{const r=ve({},t);return await Tn(a.fetch,`${a.url}/object/list-v2/${a.bucketId}`,r,{headers:a.headers},n)})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}};const m2="2.98.0",el={"X-Client-Info":`storage-js/${m2}`};var p2=class extends Tr{constructor(t,n={},a,r){const l=new URL(t);r!=null&&r.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase."));const o=l.href.replace(/\/$/,""),c=ve(ve({},el),n);super(o,c,a,"storage")}async listBuckets(t){var n=this;return n.handleOperation(async()=>{const a=n.listBucketOptionsToQueryString(t);return await Ps(n.fetch,`${n.url}/bucket${a}`,{headers:n.headers})})}async getBucket(t){var n=this;return n.handleOperation(async()=>await Ps(n.fetch,`${n.url}/bucket/${t}`,{headers:n.headers}))}async createBucket(t,n={public:!1}){var a=this;return a.handleOperation(async()=>await Tn(a.fetch,`${a.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:a.headers}))}async updateBucket(t,n){var a=this;return a.handleOperation(async()=>await yf(a.fetch,`${a.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:a.headers}))}async emptyBucket(t){var n=this;return n.handleOperation(async()=>await Tn(n.fetch,`${n.url}/bucket/${t}/empty`,{},{headers:n.headers}))}async deleteBucket(t){var n=this;return n.handleOperation(async()=>await Yf(n.fetch,`${n.url}/bucket/${t}`,{},{headers:n.headers}))}listBucketOptionsToQueryString(t){const n={};return t&&("limit"in t&&(n.limit=String(t.limit)),"offset"in t&&(n.offset=String(t.offset)),t.search&&(n.search=t.search),t.sortColumn&&(n.sortColumn=t.sortColumn),t.sortOrder&&(n.sortOrder=t.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}},g2=class extends Tr{constructor(t,n={},a){const r=t.replace(/\/$/,""),l=ve(ve({},el),n);super(r,l,a,"storage")}async createBucket(t){var n=this;return n.handleOperation(async()=>await Tn(n.fetch,`${n.url}/bucket`,{name:t},{headers:n.headers}))}async listBuckets(t){var n=this;return n.handleOperation(async()=>{const a=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&a.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&a.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&a.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&a.set("sortOrder",t.sortOrder),t!=null&&t.search&&a.set("search",t.search);const r=a.toString(),l=r?`${n.url}/bucket?${r}`:`${n.url}/bucket`;return await Ps(n.fetch,l,{headers:n.headers})})}async deleteBucket(t){var n=this;return n.handleOperation(async()=>await Yf(n.fetch,`${n.url}/bucket/${t}`,{},{headers:n.headers}))}from(t){var n=this;if(!n2(t))throw new lu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const a=new WS({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>n.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(a,{get(l,o){const c=l[o];return typeof c!="function"?c:async(...d)=>{try{return{data:await c.apply(l,d),error:null}}catch(h){if(r)throw h;return{data:null,error:h}}}}})}},y2=class extends Tr{constructor(t,n={},a){const r=t.replace(/\/$/,""),l=ve(ve({},el),{},{"Content-Type":"application/json"},n);super(r,l,a,"vectors")}async createIndex(t){var n=this;return n.handleOperation(async()=>await on.post(n.fetch,`${n.url}/CreateIndex`,t,{headers:n.headers})||{})}async getIndex(t,n){var a=this;return a.handleOperation(async()=>await on.post(a.fetch,`${a.url}/GetIndex`,{vectorBucketName:t,indexName:n},{headers:a.headers}))}async listIndexes(t){var n=this;return n.handleOperation(async()=>await on.post(n.fetch,`${n.url}/ListIndexes`,t,{headers:n.headers}))}async deleteIndex(t,n){var a=this;return a.handleOperation(async()=>await on.post(a.fetch,`${a.url}/DeleteIndex`,{vectorBucketName:t,indexName:n},{headers:a.headers})||{})}},x2=class extends Tr{constructor(t,n={},a){const r=t.replace(/\/$/,""),l=ve(ve({},el),{},{"Content-Type":"application/json"},n);super(r,l,a,"vectors")}async putVectors(t){var n=this;if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return n.handleOperation(async()=>await on.post(n.fetch,`${n.url}/PutVectors`,t,{headers:n.headers})||{})}async getVectors(t){var n=this;return n.handleOperation(async()=>await on.post(n.fetch,`${n.url}/GetVectors`,t,{headers:n.headers}))}async listVectors(t){var n=this;if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return n.handleOperation(async()=>await on.post(n.fetch,`${n.url}/ListVectors`,t,{headers:n.headers}))}async queryVectors(t){var n=this;return n.handleOperation(async()=>await on.post(n.fetch,`${n.url}/QueryVectors`,t,{headers:n.headers}))}async deleteVectors(t){var n=this;if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return n.handleOperation(async()=>await on.post(n.fetch,`${n.url}/DeleteVectors`,t,{headers:n.headers})||{})}},b2=class extends Tr{constructor(t,n={},a){const r=t.replace(/\/$/,""),l=ve(ve({},el),{},{"Content-Type":"application/json"},n);super(r,l,a,"vectors")}async createBucket(t){var n=this;return n.handleOperation(async()=>await on.post(n.fetch,`${n.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:n.headers})||{})}async getBucket(t){var n=this;return n.handleOperation(async()=>await on.post(n.fetch,`${n.url}/GetVectorBucket`,{vectorBucketName:t},{headers:n.headers}))}async listBuckets(t={}){var n=this;return n.handleOperation(async()=>await on.post(n.fetch,`${n.url}/ListVectorBuckets`,t,{headers:n.headers}))}async deleteBucket(t){var n=this;return n.handleOperation(async()=>await on.post(n.fetch,`${n.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:n.headers})||{})}},v2=class extends b2{constructor(t,n={}){super(t,n.headers||{},n.fetch)}from(t){return new w2(this.url,this.headers,t,this.fetch)}async createBucket(t){var n=()=>super.createBucket,a=this;return n().call(a,t)}async getBucket(t){var n=()=>super.getBucket,a=this;return n().call(a,t)}async listBuckets(t={}){var n=()=>super.listBuckets,a=this;return n().call(a,t)}async deleteBucket(t){var n=()=>super.deleteBucket,a=this;return n().call(a,t)}},w2=class extends y2{constructor(t,n,a,r){super(t,n,r),this.vectorBucketName=a}async createIndex(t){var n=()=>super.createIndex,a=this;return n().call(a,ve(ve({},t),{},{vectorBucketName:a.vectorBucketName}))}async listIndexes(t={}){var n=()=>super.listIndexes,a=this;return n().call(a,ve(ve({},t),{},{vectorBucketName:a.vectorBucketName}))}async getIndex(t){var n=()=>super.getIndex,a=this;return n().call(a,a.vectorBucketName,t)}async deleteIndex(t){var n=()=>super.deleteIndex,a=this;return n().call(a,a.vectorBucketName,t)}index(t){return new _2(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},_2=class extends x2{constructor(t,n,a,r,l){super(t,n,l),this.vectorBucketName=a,this.indexName=r}async putVectors(t){var n=()=>super.putVectors,a=this;return n().call(a,ve(ve({},t),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async getVectors(t){var n=()=>super.getVectors,a=this;return n().call(a,ve(ve({},t),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async listVectors(t={}){var n=()=>super.listVectors,a=this;return n().call(a,ve(ve({},t),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async queryVectors(t){var n=()=>super.queryVectors,a=this;return n().call(a,ve(ve({},t),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}async deleteVectors(t){var n=()=>super.deleteVectors,a=this;return n().call(a,ve(ve({},t),{},{vectorBucketName:a.vectorBucketName,indexName:a.indexName}))}},S2=class extends p2{constructor(t,n={},a,r){super(t,n,a,r)}from(t){return new h2(this.url,this.headers,t,this.fetch)}get vectors(){return new v2(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new g2(this.url+"/iceberg",this.headers,this.fetch)}};const Ex="2.98.0",br=30*1e3,xf=3,qd=xf*br,k2="http://localhost:9999",E2="supabase.auth.token",j2={"X-Client-Info":`gotrue-js/${Ex}`},bf="X-Supabase-Api-Version",jx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},N2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,C2=600*1e3;class Gs extends Error{constructor(n,a,r){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=a,this.code=r}}function ge(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class T2 extends Gs{constructor(n,a,r){super(n,a,r),this.name="AuthApiError",this.status=a,this.code=r}}function A2(t){return ge(t)&&t.name==="AuthApiError"}class xa extends Gs{constructor(n,a){super(n),this.name="AuthUnknownError",this.originalError=a}}class gi extends Gs{constructor(n,a,r,l){super(n,r,l),this.name=a,this.status=r}}class sn extends gi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Id(t){return ge(t)&&t.name==="AuthSessionMissingError"}class cr extends gi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ao extends gi{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}}class Ro extends gi{constructor(n,a=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function R2(t){return ge(t)&&t.name==="AuthImplicitGrantRedirectError"}class M0 extends gi{constructor(n,a=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=a}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class O2 extends gi{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class vf extends gi{constructor(n,a){super(n,"AuthRetryableFetchError",a,void 0)}}function Hd(t){return ge(t)&&t.name==="AuthRetryableFetchError"}class B0 extends gi{constructor(n,a,r){super(n,"AuthWeakPasswordError",a,"weak_password"),this.reasons=r}}class wf extends gi{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ko="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),q0=` 	
\r=`.split(""),D2=(()=>{const t=new Array(128);for(let n=0;n<t.length;n+=1)t[n]=-1;for(let n=0;n<q0.length;n+=1)t[q0[n].charCodeAt(0)]=-2;for(let n=0;n<Ko.length;n+=1)t[Ko[n].charCodeAt(0)]=n;return t})();function I0(t,n,a){if(t!==null)for(n.queue=n.queue<<8|t,n.queuedBits+=8;n.queuedBits>=6;){const r=n.queue>>n.queuedBits-6&63;a(Ko[r]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const r=n.queue>>n.queuedBits-6&63;a(Ko[r]),n.queuedBits-=6}}function Nx(t,n,a){const r=D2[t];if(r>-1)for(n.queue=n.queue<<6|r,n.queuedBits+=6;n.queuedBits>=8;)a(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function H0(t){const n=[],a=c=>{n.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},l={queue:0,queuedBits:0},o=c=>{U2(c,r,a)};for(let c=0;c<t.length;c+=1)Nx(t.charCodeAt(c),l,o);return n.join("")}function L2(t,n){if(t<=127){n(t);return}else if(t<=2047){n(192|t>>6),n(128|t&63);return}else if(t<=65535){n(224|t>>12),n(128|t>>6&63),n(128|t&63);return}else if(t<=1114111){n(240|t>>18),n(128|t>>12&63),n(128|t>>6&63),n(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function z2(t,n){for(let a=0;a<t.length;a+=1){let r=t.charCodeAt(a);if(r>55295&&r<=56319){const l=(r-55296)*1024&65535;r=(t.charCodeAt(a+1)-56320&65535|l)+65536,a+=1}L2(r,n)}}function U2(t,n,a){if(n.utf8seq===0){if(t<=127){a(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){n.utf8seq=r;break}if(n.utf8seq===2)n.codepoint=t&31;else if(n.utf8seq===3)n.codepoint=t&15;else if(n.utf8seq===4)n.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|t&63,n.utf8seq-=1,n.utf8seq===0&&a(n.codepoint)}}function Sr(t){const n=[],a={queue:0,queuedBits:0},r=l=>{n.push(l)};for(let l=0;l<t.length;l+=1)Nx(t.charCodeAt(l),a,r);return new Uint8Array(n)}function M2(t){const n=[];return z2(t,a=>n.push(a)),new Uint8Array(n)}function ba(t){const n=[],a={queue:0,queuedBits:0},r=l=>{n.push(l)};return t.forEach(l=>I0(l,a,r)),I0(null,a,r),n.join("")}function B2(t){return Math.round(Date.now()/1e3)+t}function q2(){return Symbol("auth-callback")}const Tt=()=>typeof window<"u"&&typeof document<"u",ha={tested:!1,writable:!1},Cx=()=>{if(!Tt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ha.tested)return ha.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),ha.tested=!0,ha.writable=!0}catch{ha.tested=!0,ha.writable=!1}return ha.writable};function I2(t){const n={},a=new URL(t);if(a.hash&&a.hash[0]==="#")try{new URLSearchParams(a.hash.substring(1)).forEach((l,o)=>{n[o]=l})}catch{}return a.searchParams.forEach((r,l)=>{n[l]=r}),n}const Tx=t=>t?(...n)=>t(...n):(...n)=>fetch(...n),H2=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",vr=async(t,n,a)=>{await t.setItem(n,JSON.stringify(a))},ma=async(t,n)=>{const a=await t.getItem(n);if(!a)return null;try{return JSON.parse(a)}catch{return a}},Nt=async(t,n)=>{await t.removeItem(n)};class uu{constructor(){this.promise=new uu.promiseConstructor((n,a)=>{this.resolve=n,this.reject=a})}}uu.promiseConstructor=Promise;function Oo(t){const n=t.split(".");if(n.length!==3)throw new wf("Invalid JWT structure");for(let r=0;r<n.length;r++)if(!N2.test(n[r]))throw new wf("JWT not in base64url format");return{header:JSON.parse(H0(n[0])),payload:JSON.parse(H0(n[1])),signature:Sr(n[2]),raw:{header:n[0],payload:n[1]}}}async function $2(t){return await new Promise(n=>{setTimeout(()=>n(null),t)})}function V2(t,n){return new Promise((r,l)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await t(o);if(!n(o,null,c)){r(c);return}}catch(c){if(!n(o,c)){l(c);return}}})()})}function P2(t){return("0"+t.toString(16)).substr(-2)}function G2(){const n=new Uint32Array(56);if(typeof crypto>"u"){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=a.length;let l="";for(let o=0;o<56;o++)l+=a.charAt(Math.floor(Math.random()*r));return l}return crypto.getRandomValues(n),Array.from(n,P2).join("")}async function Y2(t){const a=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",a),l=new Uint8Array(r);return Array.from(l).map(o=>String.fromCharCode(o)).join("")}async function K2(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const a=await Y2(t);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function dr(t,n,a=!1){const r=G2();let l=r;a&&(l+="/PASSWORD_RECOVERY"),await vr(t,`${n}-code-verifier`,l);const o=await K2(r);return[o,r===o?"plain":"s256"]}const F2=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function X2(t){const n=t.headers.get(bf);if(!n||!n.match(F2))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function Q2(t){if(!t)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(t<=n)throw new Error("JWT has expired")}function J2(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Z2=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fr(t){if(!Z2.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $d(){const t={};return new Proxy(t,{get:(n,a)=>{if(a==="__isUserNotAvailableProxy")return!0;if(typeof a=="symbol"){const r=a.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${a}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,a)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${a}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function W2(t,n){return new Proxy(t,{get:(a,r,l)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(a,r,l)}return!n.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(a,r,l)}})}function $0(t){return JSON.parse(JSON.stringify(t))}const ga=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),ek=[502,503,504];async function V0(t){var n;if(!H2(t))throw new vf(ga(t),0);if(ek.includes(t.status))throw new vf(ga(t),t.status);let a;try{a=await t.json()}catch(o){throw new xa(ga(o),o)}let r;const l=X2(t);if(l&&l.getTime()>=jx["2024-01-01"].timestamp&&typeof a=="object"&&a&&typeof a.code=="string"?r=a.code:typeof a=="object"&&a&&typeof a.error_code=="string"&&(r=a.error_code),r){if(r==="weak_password")throw new B0(ga(a),t.status,((n=a.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(r==="session_not_found")throw new sn}else if(typeof a=="object"&&a&&typeof a.weak_password=="object"&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new B0(ga(a),t.status,a.weak_password.reasons);throw new T2(ga(a),t.status||500,r)}const tk=(t,n,a,r)=>{const l={method:t,headers:(n==null?void 0:n.headers)||{}};return t==="GET"?l:(l.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),l.body=JSON.stringify(r),Object.assign(Object.assign({},l),a))};async function _e(t,n,a,r){var l;const o=Object.assign({},r==null?void 0:r.headers);o[bf]||(o[bf]=jx["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const c=(l=r==null?void 0:r.query)!==null&&l!==void 0?l:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const d=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",h=await nk(t,n,a+d,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(h):{data:Object.assign({},h),error:null}}async function nk(t,n,a,r,l,o){const c=tk(n,r,l,o);let d;try{d=await t(a,Object.assign({},c))}catch(h){throw console.error(h),new vf(ga(h),0)}if(d.ok||await V0(d),r!=null&&r.noResolveJson)return d;try{return await d.json()}catch(h){await V0(h)}}function Cn(t){var n;let a=null;rk(t)&&(a=Object.assign({},t),t.expires_at||(a.expires_at=B2(t.expires_in)));const r=(n=t.user)!==null&&n!==void 0?n:t;return{data:{session:a,user:r},error:null}}function P0(t){const n=Cn(t);return!n.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((a,r)=>a&&typeof r=="string",!0)&&(n.data.weak_password=t.weak_password),n}function Yi(t){var n;return{data:{user:(n=t.user)!==null&&n!==void 0?n:t},error:null}}function ik(t){return{data:t,error:null}}function ak(t){const{action_link:n,email_otp:a,hashed_token:r,redirect_to:l,verification_type:o}=t,c=su(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:n,email_otp:a,hashed_token:r,redirect_to:l,verification_type:o},h=Object.assign({},c);return{data:{properties:d,user:h},error:null}}function G0(t){return t}function rk(t){return t.access_token&&t.refresh_token&&t.expires_in}const Vd=["global","local","others"];class sk{constructor({url:n="",headers:a={},fetch:r}){this.url=n,this.headers=a,this.fetch=Tx(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,a=Vd[0]){if(Vd.indexOf(a)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Vd.join(", ")}`);try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${a}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ge(r))return{data:null,error:r};throw r}}async inviteUserByEmail(n,a={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:a.data},headers:this.headers,redirectTo:a.redirectTo,xform:Yi})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async generateLink(n){try{const{options:a}=n,r=su(n,["options"]),l=Object.assign(Object.assign({},r),a);return"newEmail"in r&&(l.new_email=r==null?void 0:r.newEmail,delete l.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:l,headers:this.headers,xform:ak,redirectTo:a==null?void 0:a.redirectTo})}catch(a){if(ge(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(n){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Yi})}catch(a){if(ge(a))return{data:{user:null},error:a};throw a}}async listUsers(n){var a,r,l,o,c,d,h;try{const m={nextPage:null,lastPage:0,total:0},y=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(a=n==null?void 0:n.page)===null||a===void 0?void 0:a.toString())!==null&&r!==void 0?r:"",per_page:(o=(l=n==null?void 0:n.perPage)===null||l===void 0?void 0:l.toString())!==null&&o!==void 0?o:""},xform:G0});if(y.error)throw y.error;const x=await y.json(),v=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(h=(d=y.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(k=>{const N=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(k.split(";")[1].split("=")[1]);m[`${C}Page`]=N}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},x),m),error:null}}catch(m){if(ge(m))return{data:{users:[]},error:m};throw m}}async getUserById(n){fr(n);try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Yi})}catch(a){if(ge(a))return{data:{user:null},error:a};throw a}}async updateUserById(n,a){fr(n);try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:a,headers:this.headers,xform:Yi})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async deleteUser(n,a=!1){fr(n);try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:a},xform:Yi})}catch(r){if(ge(r))return{data:{user:null},error:r};throw r}}async _listFactors(n){fr(n.userId);try{const{data:a,error:r}=await _e(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:l=>({data:{factors:l},error:null})});return{data:a,error:r}}catch(a){if(ge(a))return{data:null,error:a};throw a}}async _deleteFactor(n){fr(n.userId),fr(n.id);try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(a){if(ge(a))return{data:null,error:a};throw a}}async _listOAuthClients(n){var a,r,l,o,c,d,h;try{const m={nextPage:null,lastPage:0,total:0},y=await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(a=n==null?void 0:n.page)===null||a===void 0?void 0:a.toString())!==null&&r!==void 0?r:"",per_page:(o=(l=n==null?void 0:n.perPage)===null||l===void 0?void 0:l.toString())!==null&&o!==void 0?o:""},xform:G0});if(y.error)throw y.error;const x=await y.json(),v=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,b=(h=(d=y.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return b.length>0&&(b.forEach(k=>{const N=parseInt(k.split(";")[0].split("=")[1].substring(0,1)),C=JSON.parse(k.split(";")[1].split("=")[1]);m[`${C}Page`]=N}),m.total=parseInt(v)),{data:Object.assign(Object.assign({},x),m),error:null}}catch(m){if(ge(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(n){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(ge(a))return{data:null,error:a};throw a}}async _getOAuthClient(n){try{return await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(ge(a))return{data:null,error:a};throw a}}async _updateOAuthClient(n,a){try{return await _e(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:a,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ge(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(n){try{return await _e(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(a){if(ge(a))return{data:null,error:a};throw a}}async _regenerateOAuthClientSecret(n){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if(ge(a))return{data:null,error:a};throw a}}}function Y0(t={}){return{getItem:n=>t[n]||null,setItem:(n,a)=>{t[n]=a},removeItem:n=>{delete t[n]}}}const fi={debug:!!(globalThis&&Cx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ax extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}class lk extends Ax{}async function ok(t,n,a){fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,n);const r=new globalThis.AbortController;n>0&&setTimeout(()=>{r.abort(),fi.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},n),await Promise.resolve();try{return await globalThis.navigator.locks.request(t,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async l=>{if(l){fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,l.name);try{return await a()}finally{fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,l.name)}}else{if(n===0)throw fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new lk(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(fi.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await a()}})}catch(l){if((l==null?void 0:l.name)==="AbortError"&&n>0)return fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire timeout, recovering by stealing lock",t),console.warn(`@supabase/gotrue-js: Lock "${t}" was not released within ${n}ms. This may indicate an orphaned lock from a component unmount (e.g., React Strict Mode). Forcefully acquiring the lock to recover.`),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,{mode:"exclusive",steal:!0},async o=>{if(o){fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: recovered (stolen)",t,o.name);try{return await a()}finally{fi.debug&&console.log("@supabase/gotrue-js: navigatorLock: released (stolen)",t,o.name)}}else return console.warn("@supabase/gotrue-js: Navigator LockManager returned null lock even with steal: true"),await a()}));throw l}}function uk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Rx(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function ck(t){return parseInt(t,16)}function dk(t){const n=new TextEncoder().encode(t);return"0x"+Array.from(n,r=>r.toString(16).padStart(2,"0")).join("")}function fk(t){var n;const{chainId:a,domain:r,expirationTime:l,issuedAt:o=new Date,nonce:c,notBefore:d,requestId:h,resources:m,scheme:y,uri:x,version:v}=t;{if(!Number.isInteger(a))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${a}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!x)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((n=t.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const b=Rx(t.address),k=y?`${y}://${r}`:r,N=t.statement?`${t.statement}
`:"",C=`${k} wants you to sign in with your Ethereum account:
${b}

${N}`;let E=`URI: ${x}
Version: ${v}
Chain ID: ${a}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(l&&(E+=`
Expiration Time: ${l.toISOString()}`),d&&(E+=`
Not Before: ${d.toISOString()}`),h&&(E+=`
Request ID: ${h}`),m){let L=`
Resources:`;for(const R of m){if(!R||typeof R!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${R}`);L+=`
- ${R}`}E+=L}return`${C}
${E}`}class mt extends Error{constructor({message:n,code:a,cause:r,name:l}){var o;super(n,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=l??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=a}}class Fo extends mt{constructor(n,a){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:a,message:n}),this.name="WebAuthnUnknownError",this.originalError=a}}function hk({error:t,options:n}){var a,r,l;const{publicKey:o}=n;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(n.signal instanceof AbortSignal)return new mt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((a=o.authenticatorSelection)===null||a===void 0?void 0:a.requireResidentKey)===!0)return new mt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(n.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new mt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((l=o.authenticatorSelection)===null||l===void 0?void 0:l.userVerification)==="required")return new mt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new mt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new mt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new mt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new mt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(Ox(c)){if(o.rp.id!==c)return new mt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new mt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function mk({error:t,options:n}){const{publicKey:a}=n;if(!a)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(n.signal instanceof AbortSignal)return new mt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new mt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(Ox(r)){if(a.rpId!==r)return new mt({message:`The RP ID "${a.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new mt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new mt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new mt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class pk{createNewAbortSignal(){if(this.controller){const a=new Error("Cancelling existing WebAuthn API call for new one");a.name="AbortError",this.controller.abort(a)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const gk=new pk;function yk(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:n,user:a,excludeCredentials:r}=t,l=su(t,["challenge","user","excludeCredentials"]),o=Sr(n).buffer,c=Object.assign(Object.assign({},a),{id:Sr(a.id).buffer}),d=Object.assign(Object.assign({},l),{challenge:o,user:c});if(r&&r.length>0){d.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const m=r[h];d.excludeCredentials[h]=Object.assign(Object.assign({},m),{id:Sr(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function xk(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:n,allowCredentials:a}=t,r=su(t,["challenge","allowCredentials"]),l=Sr(n).buffer,o=Object.assign(Object.assign({},r),{challenge:l});if(a&&a.length>0){o.allowCredentials=new Array(a.length);for(let c=0;c<a.length;c++){const d=a[c];o.allowCredentials[c]=Object.assign(Object.assign({},d),{id:Sr(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function bk(t){var n;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const a=t;return{id:t.id,rawId:t.id,response:{attestationObject:ba(new Uint8Array(t.response.attestationObject)),clientDataJSON:ba(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function vk(t){var n;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const a=t,r=t.getClientExtensionResults(),l=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ba(new Uint8Array(l.authenticatorData)),clientDataJSON:ba(new Uint8Array(l.clientDataJSON)),signature:ba(new Uint8Array(l.signature)),userHandle:l.userHandle?ba(new Uint8Array(l.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(n=a.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Ox(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function K0(){var t,n;return!!(Tt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function wk(t){try{const n=await navigator.credentials.create(t);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Fo("Browser returned unexpected credential type",n)}:{data:null,error:new Fo("Empty credential response",n)}}catch(n){return{data:null,error:hk({error:n,options:t})}}}async function _k(t){try{const n=await navigator.credentials.get(t);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new Fo("Browser returned unexpected credential type",n)}:{data:null,error:new Fo("Empty credential response",n)}}catch(n){return{data:null,error:mk({error:n,options:t})}}}const Sk={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},kk={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Xo(...t){const n=l=>l!==null&&typeof l=="object"&&!Array.isArray(l),a=l=>l instanceof ArrayBuffer||ArrayBuffer.isView(l),r={};for(const l of t)if(l)for(const o in l){const c=l[o];if(c!==void 0)if(Array.isArray(c))r[o]=c;else if(a(c))r[o]=c;else if(n(c)){const d=r[o];n(d)?r[o]=Xo(d,c):r[o]=Xo(c)}else r[o]=c}return r}function Ek(t,n){return Xo(Sk,t,n||{})}function jk(t,n){return Xo(kk,t,n||{})}class Nk{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:a,friendlyName:r,signal:l},o){var c;try{const{data:d,error:h}=await this.client.mfa.challenge({factorId:n,webauthn:a});if(!d)return{data:null,error:h};const m=l??gk.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:y}=d.webauthn.credential_options.publicKey;if(!y.name){const x=r;if(x)y.name=`${y.id}:${x}`;else{const b=(await this.client.getUser()).data.user,k=((c=b==null?void 0:b.user_metadata)===null||c===void 0?void 0:c.name)||(b==null?void 0:b.email)||(b==null?void 0:b.id)||"User";y.name=`${y.id}:${k}`}}y.displayName||(y.displayName=y.name)}switch(d.webauthn.type){case"create":{const y=Ek(d.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:x,error:v}=await wk({publicKey:y,signal:m});return x?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:v}}case"request":{const y=jk(d.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:x,error:v}=await _k(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:y,signal:m}));return x?{data:{factorId:n,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:x}},error:null}:{data:null,error:v}}}}catch(d){return ge(d)?{data:null,error:d}:{data:null,error:new xa("Unexpected error in challenge",d)}}}async _verify({challengeId:n,factorId:a,webauthn:r}){return this.client.mfa.verify({factorId:a,challengeId:n,webauthn:r})}async _authenticate({factorId:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},o){if(!a)return{data:null,error:new Gs("rpId is required for WebAuthn authentication")};try{if(!K0())return{data:null,error:new xa("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this.challenge({factorId:n,webauthn:{rpId:a,rpOrigins:r},signal:l},{request:o});if(!c)return{data:null,error:d};const{webauthn:h}=c;return this._verify({factorId:n,challengeId:c.challengeId,webauthn:{type:h.type,rpId:a,rpOrigins:r,credential_response:h.credential_response}})}catch(c){return ge(c)?{data:null,error:c}:{data:null,error:new xa("Unexpected error in authenticate",c)}}}async _register({friendlyName:n,webauthn:{rpId:a=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:l}={}},o){if(!a)return{data:null,error:new Gs("rpId is required for WebAuthn registration")};try{if(!K0())return{data:null,error:new xa("Browser does not support WebAuthn",null)};const{data:c,error:d}=await this._enroll({friendlyName:n});if(!c)return await this.client.mfa.listFactors().then(y=>{var x;return(x=y.data)===null||x===void 0?void 0:x.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===n&&v.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:d};const{data:h,error:m}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:a,rpOrigins:r},signal:l},{create:o});return h?this._verify({factorId:c.id,challengeId:h.challengeId,webauthn:{rpId:a,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:m}}catch(c){return ge(c)?{data:null,error:c}:{data:null,error:new xa("Unexpected error in register",c)}}}}uk();const Ck={url:k2,storageKey:E2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:j2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:5e3,skipAutoInitialize:!1};async function F0(t,n,a){return await a()}const hr={};class Ys{get jwks(){var n,a;return(a=(n=hr[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&a!==void 0?a:{keys:[]}}set jwks(n){hr[this.storageKey]=Object.assign(Object.assign({},hr[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,a;return(a=(n=hr[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&a!==void 0?a:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){hr[this.storageKey]=Object.assign(Object.assign({},hr[this.storageKey]),{cachedAt:n})}constructor(n){var a,r,l;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},Ck),n);if(this.storageKey=o.storageKey,this.instanceID=(a=Ys.nextInstanceID[this.storageKey])!==null&&a!==void 0?a:0,Ys.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Tt()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new sk({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Tx(o.fetch),this.lock=o.lock||F0,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Tt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=ok:this.lock=F0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Nk(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Cx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Y0(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Y0(this.memoryStorage)),Tt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(l=this.broadcastChannel)===null||l===void 0||l.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c);try{await this._notifyAllSubscribers(c.data.event,c.data.session,!1)}catch(d){this._debug("#broadcastChannel","error",d)}})}o.skipAutoInitialize||this.initialize().catch(c=>{this._debug("#initialize()","error",c)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Ex}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let a={},r="none";if(Tt()&&(a=I2(window.location.href),this._isImplicitGrantCallback(a)?r="implicit":await this._isPKCECallback(a)&&(r="pkce")),Tt()&&this.detectSessionInUrl&&r!=="none"){const{data:l,error:o}=await this._getSessionFromURL(a,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),R2(o)){const h=(n=o.details)===null||n===void 0?void 0:n.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return{error:o}}const{session:c,redirectType:d}=l;return this._debug("#_initialize()","detected session in URL",c,"redirect type",d),await this._saveSession(c),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(a){return ge(a)?this._returnResult({error:a}):this._returnResult({error:new xa("Unexpected error during initialization",a)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var a,r,l;try{const o=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(a=n==null?void 0:n.options)===null||a===void 0?void 0:a.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(l=n==null?void 0:n.options)===null||l===void 0?void 0:l.captchaToken}},xform:Cn}),{data:c,error:d}=o;if(d||!c)return this._returnResult({data:{user:null,session:null},error:d});const h=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(o){if(ge(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(n){var a,r,l;try{let o;if("email"in n){const{email:y,password:x,options:v}=n;let b=null,k=null;this.flowType==="pkce"&&([b,k]=await dr(this.storage,this.storageKey)),o=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v==null?void 0:v.emailRedirectTo,body:{email:y,password:x,data:(a=v==null?void 0:v.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken},code_challenge:b,code_challenge_method:k},xform:Cn})}else if("phone"in n){const{phone:y,password:x,options:v}=n;o=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:x,data:(r=v==null?void 0:v.data)!==null&&r!==void 0?r:{},channel:(l=v==null?void 0:v.channel)!==null&&l!==void 0?l:"sms",gotrue_meta_security:{captcha_token:v==null?void 0:v.captchaToken}},xform:Cn})}else throw new Ao("You must provide either an email or phone number and a password");const{data:c,error:d}=o;if(d||!c)return await Nt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:d});const h=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(o){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ge(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(n){try{let a;if("email"in n){const{email:o,password:c,options:d}=n;a=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:P0})}else if("phone"in n){const{phone:o,password:c,options:d}=n;a=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:P0})}else throw new Ao("You must provide either an email or phone number and a password");const{data:r,error:l}=a;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!r||!r.session||!r.user){const o=new cr;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:l})}catch(a){if(ge(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOAuth(n){var a,r,l,o;return await this._handleProviderSignIn(n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(r=n.options)===null||r===void 0?void 0:r.scopes,queryParams:(l=n.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:(o=n.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:a}=n;switch(a){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${a}"`)}}async signInWithEthereum(n){var a,r,l,o,c,d,h,m,y,x,v;let b,k;if("message"in n)b=n.message,k=n.signature;else{const{chain:N,wallet:C,statement:E,options:L}=n;let R;if(Tt())if(typeof C=="object")R=C;else{const ae=window;if("ethereum"in ae&&typeof ae.ethereum=="object"&&"request"in ae.ethereum&&typeof ae.ethereum.request=="function")R=ae.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(L!=null&&L.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=C}const P=new URL((a=L==null?void 0:L.url)!==null&&a!==void 0?a:window.location.href),W=await R.request({method:"eth_requestAccounts"}).then(ae=>ae).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!W||W.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=Rx(W[0]);let Y=(r=L==null?void 0:L.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!Y){const ae=await R.request({method:"eth_chainId"});Y=ck(ae)}const te={domain:P.host,address:z,statement:E,uri:P.href,version:"1",chainId:Y,nonce:(l=L==null?void 0:L.signInWithEthereum)===null||l===void 0?void 0:l.nonce,issuedAt:(c=(o=L==null?void 0:L.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(d=L==null?void 0:L.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=L==null?void 0:L.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(m=L==null?void 0:L.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(y=L==null?void 0:L.signInWithEthereum)===null||y===void 0?void 0:y.resources};b=fk(te),k=await R.request({method:"personal_sign",params:[dk(b),z]})}try{const{data:N,error:C}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:b,signature:k},!((x=n.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(v=n.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Cn});if(C)throw C;if(!N||!N.session||!N.user){const E=new cr;return this._returnResult({data:{user:null,session:null},error:E})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:C})}catch(N){if(ge(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async signInWithSolana(n){var a,r,l,o,c,d,h,m,y,x,v,b;let k,N;if("message"in n)k=n.message,N=n.signature;else{const{chain:C,wallet:E,statement:L,options:R}=n;let P;if(Tt())if(typeof E=="object")P=E;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))P=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=E}const W=new URL((a=R==null?void 0:R.url)!==null&&a!==void 0?a:window.location.href);if("signIn"in P&&P.signIn){const z=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R==null?void 0:R.signInWithSolana),{version:"1",domain:W.host,uri:W.href}),L?{statement:L}:null));let Y;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")Y=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)Y=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Y&&"signature"in Y&&(typeof Y.signedMessage=="string"||Y.signedMessage instanceof Uint8Array)&&Y.signature instanceof Uint8Array)k=typeof Y.signedMessage=="string"?Y.signedMessage:new TextDecoder().decode(Y.signedMessage),N=Y.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");k=[`${W.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${W.href}`,`Issued At: ${(l=(r=R==null?void 0:R.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&l!==void 0?l:new Date().toISOString()}`,...!((o=R==null?void 0:R.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((c=R==null?void 0:R.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((d=R==null?void 0:R.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((h=R==null?void 0:R.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((m=R==null?void 0:R.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((x=(y=R==null?void 0:R.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||x===void 0)&&x.length?["Resources",...R.signInWithSolana.resources.map(Y=>`- ${Y}`)]:[]].join(`
`);const z=await P.signMessage(new TextEncoder().encode(k),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=z}}try{const{data:C,error:E}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:k,signature:ba(N)},!((v=n.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(b=n.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:Cn});if(E)throw E;if(!C||!C.session||!C.user){const L=new cr;return this._returnResult({data:{user:null,session:null},error:L})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:Object.assign({},C),error:E})}catch(C){if(ge(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async _exchangeCodeForSession(n){const a=await ma(this.storage,`${this.storageKey}-code-verifier`),[r,l]=(a??"").split("/");try{if(!r&&this.flowType==="pkce")throw new O2;const{data:o,error:c}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:r},xform:Cn});if(await Nt(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!o||!o.session||!o.user){const d=new cr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:l??null}),error:c})}catch(o){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ge(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(n){try{const{options:a,provider:r,token:l,access_token:o,nonce:c}=n,d=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:l,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Cn}),{data:h,error:m}=d;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!h||!h.session||!h.user){const y=new cr;return this._returnResult({data:{user:null,session:null},error:y})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:m})}catch(a){if(ge(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithOtp(n){var a,r,l,o,c;try{if("email"in n){const{email:d,options:h}=n;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await dr(this.storage,this.storageKey));const{error:x}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(a=h==null?void 0:h.data)!==null&&a!==void 0?a:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:y},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}if("phone"in n){const{phone:d,options:h}=n,{data:m,error:y}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(l=h==null?void 0:h.data)!==null&&l!==void 0?l:{},create_user:(o=h==null?void 0:h.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(c=h==null?void 0:h.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:y})}throw new Ao("You must provide either an email or phone number.")}catch(d){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ge(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(n){var a,r;try{let l,o;"options"in n&&(l=(a=n.options)===null||a===void 0?void 0:a.redirectTo,o=(r=n.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:d}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:o}}),redirectTo:l,xform:Cn});if(d)throw d;if(!c)throw new Error("An error occurred on token verification.");const h=c.session,m=c.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(l){if(ge(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithSSO(n){var a,r,l,o,c;try{let d=null,h=null;this.flowType==="pkce"&&([d,h]=await dr(this.storage,this.storageKey));const m=await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(r=(a=n.options)===null||a===void 0?void 0:a.redirectTo)!==null&&r!==void 0?r:void 0}),!((l=n==null?void 0:n.options)===null||l===void 0)&&l.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:d,code_challenge_method:h}),headers:this.headers,xform:ik});return!((o=m.data)===null||o===void 0)&&o.url&&Tt()&&!(!((c=n.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(d){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ge(d))return this._returnResult({data:null,error:d});throw d}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:a},error:r}=n;if(r)throw r;if(!a)throw new sn;const{error:l}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:a.access_token});return this._returnResult({data:{user:null,session:null},error:l})})}catch(n){if(ge(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const a=`${this.url}/resend`;if("email"in n){const{email:r,type:l,options:o}=n,{error:c}=await _e(this.fetch,"POST",a,{headers:this.headers,body:{email:r,type:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in n){const{phone:r,type:l,options:o}=n,{data:c,error:d}=await _e(this.fetch,"POST",a,{headers:this.headers,body:{phone:r,type:l,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d})}throw new Ao("You must provide either an email or phone number and a type")}catch(a){if(ge(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async a=>a))}async _acquireLock(n,a){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),l=(async()=>(await r,await a()))();return this.pendingInLock.push((async()=>{try{await l}catch{}})()),l}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=a();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const l=[...this.pendingInLock];await Promise.all(l),this.pendingInLock.splice(0,l.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const a=await this.__loadSession();return await n(a)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const a=await ma(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",a),a!==null&&(this._isValidSession(a)?n=a:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const r=n.expires_at?n.expires_at*1e3-Date.now()<qd:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",n.expires_at),!r){if(this.userStorage){const c=await ma(this.userStorage,this.storageKey+"-user");c!=null&&c.user?n.user=c.user:n.user=$d()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};n.user=W2(n.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:l,error:o}=await this._callRefreshToken(n.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:l},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const a=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return a.data.user&&(this.suppressGetSessionWarning=!0),a}async _getUser(n){try{return n?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Yi}):await this._useSession(async a=>{var r,l,o;const{data:c,error:d}=a;if(d)throw d;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new sn}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(l=c.session)===null||l===void 0?void 0:l.access_token)!==null&&o!==void 0?o:void 0,xform:Yi})})}catch(a){if(ge(a))return Id(a)&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:a});throw a}}async updateUser(n,a={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,a))}async _updateUser(n,a={}){try{return await this._useSession(async r=>{const{data:l,error:o}=r;if(o)throw o;if(!l.session)throw new sn;const c=l.session;let d=null,h=null;this.flowType==="pkce"&&n.email!=null&&([d,h]=await dr(this.storage,this.storageKey));const{data:m,error:y}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:a==null?void 0:a.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:d,code_challenge_method:h}),jwt:c.access_token,xform:Yi});if(y)throw y;return c.user=m.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ge(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new sn;const a=Date.now()/1e3;let r=a,l=!0,o=null;const{payload:c}=Oo(n.access_token);if(c.exp&&(r=c.exp,l=r<=a),l){const{data:d,error:h}=await this._callRefreshToken(n.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:h}=await this._getUser(n.access_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});o={access_token:n.access_token,refresh_token:n.refresh_token,user:d.user,token_type:"bearer",expires_in:r-a,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(a){if(ge(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async a=>{var r;if(!n){const{data:c,error:d}=a;if(d)throw d;n=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(n!=null&&n.refresh_token))throw new sn;const{data:l,error:o}=await this._callRefreshToken(n.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):l?this._returnResult({data:{user:l.user,session:l},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(a){if(ge(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async _getSessionFromURL(n,a){try{if(!Tt())throw new Ro("No browser detected.");if(n.error||n.error_description||n.error_code)throw new Ro(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(a){case"implicit":if(this.flowType==="pkce")throw new M0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ro("Not a valid implicit grant flow url.");break;default:}if(a==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new M0("No code detected.");const{data:L,error:R}=await this._exchangeCodeForSession(n.code);if(R)throw R;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:l,access_token:o,refresh_token:c,expires_in:d,expires_at:h,token_type:m}=n;if(!o||!d||!c||!m)throw new Ro("No session defined in URL");const y=Math.round(Date.now()/1e3),x=parseInt(d);let v=y+x;h&&(v=parseInt(h));const b=v-y;b*1e3<=br&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${x}s`);const k=v-x;y-k>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",k,v,y):y-k<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",k,v,y);const{data:N,error:C}=await this._getUser(o);if(C)throw C;const E={provider_token:r,provider_refresh_token:l,access_token:o,expires_in:x,expires_at:v,refresh_token:c,token_type:m,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:E,redirectType:n.type},error:null})}catch(r){if(ge(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){const a=await ma(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&a)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async a=>{var r;const{data:l,error:o}=a;if(o&&!Id(o))return this._returnResult({error:o});const c=(r=l.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:d}=await this.admin.signOut(c,n);if(d&&!(A2(d)&&(d.status===404||d.status===401||d.status===403)||Id(d)))return this._returnResult({error:d})}return n!=="others"&&(await this._removeSession(),await Nt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const a=q2(),r={id:a,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",a),this.stateChangeEmitters.delete(a)}};return this._debug("#onAuthStateChange()","registered callback with id",a),this.stateChangeEmitters.set(a,r),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(a)})))(),{data:{subscription:r}}}async _emitInitialSession(n){return await this._useSession(async a=>{var r,l;try{const{data:{session:o},error:c}=a;if(c)throw c;await((r=this.stateChangeEmitters.get(n))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",n,"session",o)}catch(o){await((l=this.stateChangeEmitters.get(n))===null||l===void 0?void 0:l.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",o),console.error(o)}})}async resetPasswordForEmail(n,a={}){let r=null,l=null;this.flowType==="pkce"&&([r,l]=await dr(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:r,code_challenge_method:l,gotrue_meta_security:{captcha_token:a.captchaToken}},headers:this.headers,redirectTo:a.redirectTo})}catch(o){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ge(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var n;try{const{data:a,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(n=a.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(a){if(ge(a))return this._returnResult({data:null,error:a});throw a}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var a;try{const{data:r,error:l}=await this._useSession(async o=>{var c,d,h,m,y;const{data:x,error:v}=o;if(v)throw v;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(c=n.options)===null||c===void 0?void 0:c.redirectTo,scopes:(d=n.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=n.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",b,{headers:this.headers,jwt:(y=(m=x.session)===null||m===void 0?void 0:m.access_token)!==null&&y!==void 0?y:void 0})});if(l)throw l;return Tt()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:n.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(ge(r))return this._returnResult({data:{provider:n.provider,url:null},error:r});throw r}}async linkIdentityIdToken(n){return await this._useSession(async a=>{var r;try{const{error:l,data:{session:o}}=a;if(l)throw l;const{options:c,provider:d,token:h,access_token:m,nonce:y}=n,x=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:d,id_token:h,access_token:m,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Cn}),{data:v,error:b}=x;return b?this._returnResult({data:{user:null,session:null},error:b}):!v||!v.session||!v.user?this._returnResult({data:{user:null,session:null},error:new cr}):(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),this._returnResult({data:v,error:b}))}catch(l){if(await Nt(this.storage,`${this.storageKey}-code-verifier`),ge(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}})}async unlinkIdentity(n){try{return await this._useSession(async a=>{var r,l;const{data:o,error:c}=a;if(c)throw c;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(l=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&l!==void 0?l:void 0})})}catch(a){if(ge(a))return this._returnResult({data:null,error:a});throw a}}async _refreshAccessToken(n){const a=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(a,"begin");try{const r=Date.now();return await V2(async l=>(l>0&&await $2(200*Math.pow(2,l-1)),this._debug(a,"refreshing attempt",l),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Cn})),(l,o)=>{const c=200*Math.pow(2,l);return o&&Hd(o)&&Date.now()+c-r<br})}catch(r){if(this._debug(a,"error",r),ge(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(a,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,a){const r=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:a.redirectTo,scopes:a.scopes,queryParams:a.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",a,"url",r),Tt()&&!a.skipBrowserRedirect&&window.location.assign(r),{data:{provider:n,url:r},error:null}}async _recoverAndRefresh(){var n,a;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const l=await ma(this.storage,this.storageKey);if(l&&this.userStorage){let c=await ma(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:l.user},await vr(this.userStorage,this.storageKey+"-user",c)),l.user=(n=c==null?void 0:c.user)!==null&&n!==void 0?n:$d()}else if(l&&!l.user&&!l.user){const c=await ma(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(l.user=c.user,await Nt(this.storage,this.storageKey+"-user"),await vr(this.storage,this.storageKey,l)):l.user=$d()}if(this._debug(r,"session from storage",l),!this._isValidSession(l)){this._debug(r,"session is not valid"),l!==null&&await this._removeSession();return}const o=((a=l.expires_at)!==null&&a!==void 0?a:1/0)*1e3-Date.now()<qd;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${qd}s`),o){if(this.autoRefreshToken&&l.refresh_token){const{error:c}=await this._callRefreshToken(l.refresh_token);c&&(console.error(c),Hd(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(l.user&&l.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:d}=await this._getUser(l.access_token);!d&&(c!=null&&c.user)?(l.user=c.user,await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",l)}catch(l){this._debug(r,"error",l),console.error(l);return}finally{this._debug(r,"end")}}async _callRefreshToken(n){var a,r;if(!n)throw new sn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const l=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(l,"begin");try{this.refreshingDeferred=new uu;const{data:o,error:c}=await this._refreshAccessToken(n);if(c)throw c;if(!o.session)throw new sn;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(l,"error",o),ge(o)){const c={data:null,error:o};return Hd(o)||await this._removeSession(),(a=this.refreshingDeferred)===null||a===void 0||a.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(l,"end")}}async _notifyAllSubscribers(n,a,r=!0){const l=`#_notifyAllSubscribers(${n})`;this._debug(l,"begin",a,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:n,session:a});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(n,a)}catch(h){o.push(h)}});if(await Promise.all(c),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(l,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Nt(this.storage,`${this.storageKey}-code-verifier`);const a=Object.assign({},n),r=a.user&&a.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&a.user&&await vr(this.userStorage,this.storageKey+"-user",{user:a.user});const l=Object.assign({},a);delete l.user;const o=$0(l);await vr(this.storage,this.storageKey,o)}else{const l=$0(a);await vr(this.storage,this.storageKey,l)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Nt(this.storage,this.storageKey),await Nt(this.storage,this.storageKey+"-code-verifier"),await Nt(this.storage,this.storageKey+"-user"),this.userStorage&&await Nt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&Tt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(a){console.error("removing visibilitychange callback failed",a)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),br);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);const a=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);const a=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,a&&clearTimeout(a)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async a=>{const{data:{session:r}}=a;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const l=Math.floor((r.expires_at*1e3-n)/br);this._debug("#_autoRefreshTokenTick()",`access token expires in ${l} ticks, a tick lasts ${br}ms, refresh threshold is ${xf} ticks`),l<=xf&&await this._callRefreshToken(r.refresh_token)})}catch(a){console.error("Auto refresh tick failed with error. This is likely a transient error.",a)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Ax)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Tt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const a=`#_onVisibilityChanged(${n})`;this._debug(a,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(a,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,a,r){const l=[`provider=${encodeURIComponent(a)}`];if(r!=null&&r.redirectTo&&l.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&l.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,c]=await dr(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});l.push(d.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);l.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&l.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${n}?${l.join("&")}`}async _unenroll(n){try{return await this._useSession(async a=>{var r;const{data:l,error:o}=a;return o?this._returnResult({data:null,error:o}):await _e(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token})})}catch(a){if(ge(a))return this._returnResult({data:null,error:a});throw a}}async _enroll(n){try{return await this._useSession(async a=>{var r,l;const{data:o,error:c}=a;if(c)return this._returnResult({data:null,error:c});const d=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:h,error:m}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return m?this._returnResult({data:null,error:m}):(n.factorType==="totp"&&h.type==="totp"&&(!((l=h==null?void 0:h.totp)===null||l===void 0)&&l.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(a){if(ge(a))return this._returnResult({data:null,error:a});throw a}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async a=>{var r;const{data:l,error:o}=a;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?bk(n.webauthn.credential_response):vk(n.webauthn.credential_response)})}:{code:n.code}),{data:d,error:h}=await _e(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:h}))})}catch(a){if(ge(a))return this._returnResult({data:null,error:a});throw a}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async a=>{var r;const{data:l,error:o}=a;if(o)return this._returnResult({data:null,error:o});const c=await _e(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:d}=c;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:yk(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:xk(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(a){if(ge(a))return this._returnResult({data:null,error:a});throw a}})}async _challengeAndVerify(n){const{data:a,error:r}=await this._challenge({factorId:n.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:n.factorId,challengeId:a.id,code:n.code})}async _listFactors(){var n;const{data:{user:a},error:r}=await this.getUser();if(r)return{data:null,error:r};const l={all:[],phone:[],totp:[],webauthn:[]};for(const o of(n=a==null?void 0:a.factors)!==null&&n!==void 0?n:[])l.all.push(o),o.status==="verified"&&l[o.factor_type].push(o);return{data:l,error:null}}async _getAuthenticatorAssuranceLevel(n){var a,r,l,o;if(n)try{const{payload:b}=Oo(n);let k=null;b.aal&&(k=b.aal);let N=k;const{data:{user:C},error:E}=await this.getUser(n);if(E)return this._returnResult({data:null,error:E});((r=(a=C==null?void 0:C.factors)===null||a===void 0?void 0:a.filter(P=>P.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(N="aal2");const R=b.amr||[];return{data:{currentLevel:k,nextLevel:N,currentAuthenticationMethods:R},error:null}}catch(b){if(ge(b))return this._returnResult({data:null,error:b});throw b}const{data:{session:c},error:d}=await this.getSession();if(d)return this._returnResult({data:null,error:d});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Oo(c.access_token);let m=null;h.aal&&(m=h.aal);let y=m;((o=(l=c.user.factors)===null||l===void 0?void 0:l.filter(b=>b.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(y="aal2");const v=h.amr||[];return{data:{currentLevel:m,nextLevel:y,currentAuthenticationMethods:v},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async a=>{const{data:{session:r},error:l}=a;return l?this._returnResult({data:null,error:l}):r?await _e(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new sn})})}catch(a){if(ge(a))return this._returnResult({data:null,error:a});throw a}}async _approveAuthorization(n,a){try{return await this._useSession(async r=>{const{data:{session:l},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!l)return this._returnResult({data:null,error:new sn});const c=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Tt()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(n,a){try{return await this._useSession(async r=>{const{data:{session:l},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!l)return this._returnResult({data:null,error:new sn});const c=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:l.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return c.data&&c.data.redirect_url&&Tt()&&!(a!=null&&a.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:a},error:r}=n;return r?this._returnResult({data:null,error:r}):a?await _e(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new sn})})}catch(n){if(ge(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async a=>{const{data:{session:r},error:l}=a;return l?this._returnResult({data:null,error:l}):r?(await _e(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new sn})})}catch(a){if(ge(a))return this._returnResult({data:null,error:a});throw a}}async fetchJwk(n,a={keys:[]}){let r=a.keys.find(d=>d.kid===n);if(r)return r;const l=Date.now();if(r=this.jwks.keys.find(d=>d.kid===n),r&&this.jwks_cached_at+C2>l)return r;const{data:o,error:c}=await _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=l,r=o.keys.find(d=>d.kid===n),!r)?null:r}async getClaims(n,a={}){try{let r=n;if(!r){const{data:b,error:k}=await this.getSession();if(k||!b.session)return this._returnResult({data:null,error:k});r=b.session.access_token}const{header:l,payload:o,signature:c,raw:{header:d,payload:h}}=Oo(r);a!=null&&a.allowExpired||Q2(o.exp);const m=!l.alg||l.alg.startsWith("HS")||!l.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(l.kid,a!=null&&a.keys?{keys:a.keys}:a==null?void 0:a.jwks);if(!m){const{error:b}=await this.getUser(r);if(b)throw b;return{data:{claims:o,header:l,signature:c},error:null}}const y=J2(l.alg),x=await crypto.subtle.importKey("jwk",m,y,!0,["verify"]);if(!await crypto.subtle.verify(y,x,c,M2(`${d}.${h}`)))throw new wf("Invalid JWT signature");return{data:{claims:o,header:l,signature:c},error:null}}catch(r){if(ge(r))return this._returnResult({data:null,error:r});throw r}}}Ys.nextInstanceID={};const Tk=Ys,Ak="2.98.0";let Ls="";typeof Deno<"u"?Ls="deno":typeof document<"u"?Ls="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ls="react-native":Ls="node";const Rk={"X-Client-Info":`supabase-js-${Ls}/${Ak}`},Ok={headers:Rk},Dk={schema:"public"},Lk={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zk={};function Ks(t){"@babel/helpers - typeof";return Ks=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ks(t)}function Uk(t,n){if(Ks(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,n);if(Ks(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(t)}function Mk(t){var n=Uk(t,"string");return Ks(n)=="symbol"?n:n+""}function Bk(t,n,a){return(n=Mk(n))in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t}function X0(t,n){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),a.push.apply(a,r)}return a}function st(t){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?X0(Object(a),!0).forEach(function(r){Bk(t,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):X0(Object(a)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(a,r))})}return t}const qk=t=>t?(...n)=>t(...n):(...n)=>fetch(...n),Ik=()=>Headers,Hk=(t,n,a)=>{const r=qk(a),l=Ik();return async(o,c)=>{var d;const h=(d=await n())!==null&&d!==void 0?d:t;let m=new l(c==null?void 0:c.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${h}`),r(o,st(st({},c),{},{headers:m}))}};function $k(t){return t.endsWith("/")?t:t+"/"}function Vk(t,n){var a,r;const{db:l,auth:o,realtime:c,global:d}=t,{db:h,auth:m,realtime:y,global:x}=n,v={db:st(st({},h),l),auth:st(st({},m),o),realtime:st(st({},y),c),storage:{},global:st(st(st({},x),d),{},{headers:st(st({},(a=x==null?void 0:x.headers)!==null&&a!==void 0?a:{}),(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?v.accessToken=t.accessToken:delete v.accessToken,v}function Pk(t){const n=t==null?void 0:t.trim();if(!n)throw new Error("supabaseUrl is required.");if(!n.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL($k(n))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Gk=class extends Tk{constructor(t){super(t)}},Yk=class{constructor(t,n,a){var r,l;this.supabaseUrl=t,this.supabaseKey=n;const o=Pk(t);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,d={db:Dk,realtime:zk,auth:st(st({},Lk),{},{storageKey:c}),global:Ok},h=Vk(a??{},d);if(this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(l=h.global.headers)!==null&&l!==void 0?l:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(y,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=h.auth)!==null&&m!==void 0?m:{},this.headers,h.global.fetch)}this.fetch=Hk(n,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(st({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new AS(new URL("rest/v1",o).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch,timeout:h.db.timeout,urlLengthLimit:h.db.urlLengthLimit}),this.storage=new S2(this.storageUrl.href,this.headers,this.fetch,a==null?void 0:a.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new _S(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},a={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,n,a)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,n,a;if(t.accessToken)return await t.accessToken();const{data:r}=await t.auth.getSession();return(n=(a=r.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:a,storage:r,userStorage:l,storageKey:o,flowType:c,lock:d,debug:h,throwOnError:m},y,x){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Gk({url:this.authUrl.href,headers:st(st({},v),y),storageKey:o,autoRefreshToken:t,persistSession:n,detectSessionInUrl:a,storage:r,userStorage:l,flowType:c,lock:d,debug:h,throwOnError:m,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new KS(this.realtimeUrl.href,st(st({},t),{},{params:st(st({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,n,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Kk=(t,n,a)=>new Yk(t,n,a);function Fk(){if(typeof window<"u")return!1;const t=globalThis.process;if(!t)return!1;const n=t.version;if(n==null)return!1;const a=n.match(/^v(\d+)\./);return a?parseInt(a[1],10)<=18:!1}Fk()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Xk=void 0,Qk=void 0;throw new Error("Missing VITE_SUPABASE_URL or VITE_SUPABASE_ANON_KEY environment variables");const oe=Kk(Xk,Qk),Jk={};var _f=null;function Zk(t){try{return crypto.getRandomValues(new Uint8Array(t))}catch{}try{return Jk.randomBytes(t)}catch{}if(!_f)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return _f(t)}function Wk(t){_f=t}function Kf(t,n){if(t=t||Ff,typeof t!="number")throw Error("Illegal arguments: "+typeof t+", "+typeof n);t<4?t=4:t>31&&(t=31);var a=[];return a.push("$2b$"),t<10&&a.push("0"),a.push(t.toString()),a.push("$"),a.push(Qo(Zk(Fs),Fs)),a.join("")}function Dx(t,n,a){if(typeof n=="function"&&(a=n,n=void 0),typeof t=="function"&&(a=t,t=void 0),typeof t>"u")t=Ff;else if(typeof t!="number")throw Error("illegal arguments: "+typeof t);function r(l){Rn(function(){try{l(null,Kf(t))}catch(o){l(o)}})}if(a){if(typeof a!="function")throw Error("Illegal callback: "+typeof a);r(a)}else return new Promise(function(l,o){r(function(c,d){if(c){o(c);return}l(d)})})}function Lx(t,n){if(typeof n>"u"&&(n=Ff),typeof n=="number"&&(n=Kf(n)),typeof t!="string"||typeof n!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof n);return Sf(t,n)}function zx(t,n,a,r){function l(o){typeof t=="string"&&typeof n=="number"?Dx(n,function(c,d){Sf(t,d,o,r)}):typeof t=="string"&&typeof n=="string"?Sf(t,n,o,r):Rn(o.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof n)))}if(a){if(typeof a!="function")throw Error("Illegal callback: "+typeof a);l(a)}else return new Promise(function(o,c){l(function(d,h){if(d){c(d);return}o(h)})})}function Ux(t,n){for(var a=t.length^n.length,r=0;r<t.length;++r)a|=t.charCodeAt(r)^n.charCodeAt(r);return a===0}function eE(t,n){if(typeof t!="string"||typeof n!="string")throw Error("Illegal arguments: "+typeof t+", "+typeof n);return n.length!==60?!1:Ux(Lx(t,n.substring(0,n.length-31)),n)}function tE(t,n,a,r){function l(o){if(typeof t!="string"||typeof n!="string"){Rn(o.bind(this,Error("Illegal arguments: "+typeof t+", "+typeof n)));return}if(n.length!==60){Rn(o.bind(this,null,!1));return}zx(t,n.substring(0,29),function(c,d){c?o(c):o(null,Ux(d,n))},r)}if(a){if(typeof a!="function")throw Error("Illegal callback: "+typeof a);l(a)}else return new Promise(function(o,c){l(function(d,h){if(d){c(d);return}o(h)})})}function nE(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return parseInt(t.split("$")[2],10)}function iE(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);if(t.length!==60)throw Error("Illegal hash length: "+t.length+" != 60");return t.substring(0,29)}function aE(t){if(typeof t!="string")throw Error("Illegal arguments: "+typeof t);return Mx(t)>72}var Rn=typeof setImmediate=="function"?setImmediate:typeof scheduler=="object"&&typeof scheduler.postTask=="function"?scheduler.postTask.bind(scheduler):setTimeout;function Mx(t){for(var n=0,a=0,r=0;r<t.length;++r)a=t.charCodeAt(r),a<128?n+=1:a<2048?n+=2:(a&64512)===55296&&(t.charCodeAt(r+1)&64512)===56320?(++r,n+=4):n+=3;return n}function rE(t){for(var n=0,a,r,l=new Array(Mx(t)),o=0,c=t.length;o<c;++o)a=t.charCodeAt(o),a<128?l[n++]=a:a<2048?(l[n++]=a>>6|192,l[n++]=a&63|128):(a&64512)===55296&&((r=t.charCodeAt(o+1))&64512)===56320?(a=65536+((a&1023)<<10)+(r&1023),++o,l[n++]=a>>18|240,l[n++]=a>>12&63|128,l[n++]=a>>6&63|128,l[n++]=a&63|128):(l[n++]=a>>12|224,l[n++]=a>>6&63|128,l[n++]=a&63|128);return l}var mr="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),$i=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function Qo(t,n){var a=0,r=[],l,o;if(n<=0||n>t.length)throw Error("Illegal len: "+n);for(;a<n;){if(l=t[a++]&255,r.push(mr[l>>2&63]),l=(l&3)<<4,a>=n){r.push(mr[l&63]);break}if(o=t[a++]&255,l|=o>>4&15,r.push(mr[l&63]),l=(o&15)<<2,a>=n){r.push(mr[l&63]);break}o=t[a++]&255,l|=o>>6&3,r.push(mr[l&63]),r.push(mr[o&63])}return r.join("")}function Bx(t,n){var a=0,r=t.length,l=0,o=[],c,d,h,m,y,x;if(n<=0)throw Error("Illegal len: "+n);for(;a<r-1&&l<n&&(x=t.charCodeAt(a++),c=x<$i.length?$i[x]:-1,x=t.charCodeAt(a++),d=x<$i.length?$i[x]:-1,!(c==-1||d==-1||(y=c<<2>>>0,y|=(d&48)>>4,o.push(String.fromCharCode(y)),++l>=n||a>=r)||(x=t.charCodeAt(a++),h=x<$i.length?$i[x]:-1,h==-1)||(y=(d&15)<<4>>>0,y|=(h&60)>>2,o.push(String.fromCharCode(y)),++l>=n||a>=r)));)x=t.charCodeAt(a++),m=x<$i.length?$i[x]:-1,y=(h&3)<<6>>>0,y|=m,o.push(String.fromCharCode(y)),++l;var v=[];for(a=0;a<l;a++)v.push(o[a].charCodeAt(0));return v}var Fs=16,Ff=10,sE=16,lE=100,Q0=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],J0=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],qx=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function Xs(t,n,a,r){var l,o=t[n],c=t[n+1];return o^=a[0],l=r[o>>>24],l+=r[256|o>>16&255],l^=r[512|o>>8&255],l+=r[768|o&255],c^=l^a[1],l=r[c>>>24],l+=r[256|c>>16&255],l^=r[512|c>>8&255],l+=r[768|c&255],o^=l^a[2],l=r[o>>>24],l+=r[256|o>>16&255],l^=r[512|o>>8&255],l+=r[768|o&255],c^=l^a[3],l=r[c>>>24],l+=r[256|c>>16&255],l^=r[512|c>>8&255],l+=r[768|c&255],o^=l^a[4],l=r[o>>>24],l+=r[256|o>>16&255],l^=r[512|o>>8&255],l+=r[768|o&255],c^=l^a[5],l=r[c>>>24],l+=r[256|c>>16&255],l^=r[512|c>>8&255],l+=r[768|c&255],o^=l^a[6],l=r[o>>>24],l+=r[256|o>>16&255],l^=r[512|o>>8&255],l+=r[768|o&255],c^=l^a[7],l=r[c>>>24],l+=r[256|c>>16&255],l^=r[512|c>>8&255],l+=r[768|c&255],o^=l^a[8],l=r[o>>>24],l+=r[256|o>>16&255],l^=r[512|o>>8&255],l+=r[768|o&255],c^=l^a[9],l=r[c>>>24],l+=r[256|c>>16&255],l^=r[512|c>>8&255],l+=r[768|c&255],o^=l^a[10],l=r[o>>>24],l+=r[256|o>>16&255],l^=r[512|o>>8&255],l+=r[768|o&255],c^=l^a[11],l=r[c>>>24],l+=r[256|c>>16&255],l^=r[512|c>>8&255],l+=r[768|c&255],o^=l^a[12],l=r[o>>>24],l+=r[256|o>>16&255],l^=r[512|o>>8&255],l+=r[768|o&255],c^=l^a[13],l=r[c>>>24],l+=r[256|c>>16&255],l^=r[512|c>>8&255],l+=r[768|c&255],o^=l^a[14],l=r[o>>>24],l+=r[256|o>>16&255],l^=r[512|o>>8&255],l+=r[768|o&255],c^=l^a[15],l=r[c>>>24],l+=r[256|c>>16&255],l^=r[512|c>>8&255],l+=r[768|c&255],o^=l^a[16],t[n]=c^a[sE+1],t[n+1]=o,t}function wr(t,n){for(var a=0,r=0;a<4;++a)r=r<<8|t[n]&255,n=(n+1)%t.length;return{key:r,offp:n}}function Z0(t,n,a){for(var r=0,l=[0,0],o=n.length,c=a.length,d,h=0;h<o;h++)d=wr(t,r),r=d.offp,n[h]=n[h]^d.key;for(h=0;h<o;h+=2)l=Xs(l,0,n,a),n[h]=l[0],n[h+1]=l[1];for(h=0;h<c;h+=2)l=Xs(l,0,n,a),a[h]=l[0],a[h+1]=l[1]}function oE(t,n,a,r){for(var l=0,o=[0,0],c=a.length,d=r.length,h,m=0;m<c;m++)h=wr(n,l),l=h.offp,a[m]=a[m]^h.key;for(l=0,m=0;m<c;m+=2)h=wr(t,l),l=h.offp,o[0]^=h.key,h=wr(t,l),l=h.offp,o[1]^=h.key,o=Xs(o,0,a,r),a[m]=o[0],a[m+1]=o[1];for(m=0;m<d;m+=2)h=wr(t,l),l=h.offp,o[0]^=h.key,h=wr(t,l),l=h.offp,o[1]^=h.key,o=Xs(o,0,a,r),r[m]=o[0],r[m+1]=o[1]}function W0(t,n,a,r,l){var o=qx.slice(),c=o.length,d;if(a<4||a>31)if(d=Error("Illegal number of rounds (4-31): "+a),r){Rn(r.bind(this,d));return}else throw d;if(n.length!==Fs)if(d=Error("Illegal salt length: "+n.length+" != "+Fs),r){Rn(r.bind(this,d));return}else throw d;a=1<<a>>>0;var h,m,y=0,x;typeof Int32Array=="function"?(h=new Int32Array(Q0),m=new Int32Array(J0)):(h=Q0.slice(),m=J0.slice()),oE(n,t,h,m);function v(){if(l&&l(y/a),y<a)for(var k=Date.now();y<a&&(y=y+1,Z0(t,h,m),Z0(n,h,m),!(Date.now()-k>lE)););else{for(y=0;y<64;y++)for(x=0;x<c>>1;x++)Xs(o,x<<1,h,m);var N=[];for(y=0;y<c;y++)N.push((o[y]>>24&255)>>>0),N.push((o[y]>>16&255)>>>0),N.push((o[y]>>8&255)>>>0),N.push((o[y]&255)>>>0);if(r){r(null,N);return}else return N}r&&Rn(v)}if(typeof r<"u")v();else for(var b;;)if(typeof(b=v())<"u")return b||[]}function Sf(t,n,a,r){var l;if(typeof t!="string"||typeof n!="string")if(l=Error("Invalid string / salt: Not a string"),a){Rn(a.bind(this,l));return}else throw l;var o,c;if(n.charAt(0)!=="$"||n.charAt(1)!=="2")if(l=Error("Invalid salt version: "+n.substring(0,2)),a){Rn(a.bind(this,l));return}else throw l;if(n.charAt(2)==="$")o="\0",c=3;else{if(o=n.charAt(2),o!=="a"&&o!=="b"&&o!=="y"||n.charAt(3)!=="$")if(l=Error("Invalid salt revision: "+n.substring(2,4)),a){Rn(a.bind(this,l));return}else throw l;c=4}if(n.charAt(c+2)>"$")if(l=Error("Missing salt rounds"),a){Rn(a.bind(this,l));return}else throw l;var d=parseInt(n.substring(c,c+1),10)*10,h=parseInt(n.substring(c+1,c+2),10),m=d+h,y=n.substring(c+3,c+25);t+=o>="a"?"\0":"";var x=rE(t),v=Bx(y,Fs);function b(k){var N=[];return N.push("$2"),o>="a"&&N.push(o),N.push("$"),m<10&&N.push("0"),N.push(m.toString()),N.push("$"),N.push(Qo(v,v.length)),N.push(Qo(k,qx.length*4-1)),N.join("")}if(typeof a>"u")return b(W0(x,v,m));W0(x,v,m,function(k,N){k?a(k,null):a(null,b(N))},r)}function uE(t,n){return Qo(t,n)}function cE(t,n){return Bx(t,n)}const Ix={setRandomFallback:Wk,genSaltSync:Kf,genSalt:Dx,hashSync:Lx,hash:zx,compareSync:eE,compare:tE,getRounds:nE,getSalt:iE,truncates:aE,encodeBase64:uE,decodeBase64:cE};async function dE(t,n){return Ix.compare(t,n)}async function ey(t){return Ix.hash(t,10)}const ty={host:1,reception:2,site_admin:3};function $o(t,n){return(ty[t]??0)>=(ty[n]??0)}const Hx=S.createContext(null),fE=1800*1e3;function hE({children:t}){const[n,a]=S.useState(null),[r,l]=S.useState(null),[o,c]=S.useState(0),[d,h]=S.useState(null),m=S.useRef(null),y=S.useCallback(()=>{l(null),a(null),c(0),h(null),m.current&&clearTimeout(m.current)},[]),x=S.useCallback(()=>{m.current&&clearTimeout(m.current),m.current=setTimeout(y,fE)},[y]);S.useEffect(()=>{if(!r)return;const C=["mousemove","keydown","click","touchstart"];return C.forEach(E=>window.addEventListener(E,x)),x(),()=>{C.forEach(E=>window.removeEventListener(E,x)),m.current&&clearTimeout(m.current)}},[r,x]),S.useEffect(()=>{if(!r)return;oe.from("notifications").select("id",{count:"exact",head:!0}).eq("recipient_user_id",r.id).eq("is_read",!1).then(({count:E})=>c(E??0));const C=oe.channel(`notifications:user:${r.id}`).on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:`recipient_user_id=eq.${r.id}`},()=>{oe.from("notifications").select("id",{count:"exact",head:!0}).eq("recipient_user_id",r.id).eq("is_read",!1).then(({count:E})=>c(E??0))}).subscribe();return()=>{oe.removeChannel(C)}},[r]),S.useEffect(()=>{if(!n)return;oe.from("evacuation_events").select("*").eq("site_id",n.id).is("closed_at",null).maybeSingle().then(({data:E})=>h(E));const C=oe.channel(`evacuation:site:${n.id}`).on("postgres_changes",{event:"*",schema:"public",table:"evacuation_events",filter:`site_id=eq.${n.id}`},()=>{oe.from("evacuation_events").select("*").eq("site_id",n.id).is("closed_at",null).maybeSingle().then(({data:E})=>h(E))}).subscribe();return()=>{oe.removeChannel(C)}},[n]);const v=S.useCallback(async(C,E)=>{const{data:L,error:R}=await oe.from("users").select("*").eq("username",C).eq("is_active",!0).single();if(R||!L||!await dE(E,L.pin_hash))return!1;const{data:W}=await oe.from("sites").select("*").eq("id",L.site_id).single();if(!W)return!1;const{pin_hash:z,...Y}=L;return l(Y),a(W),!0},[]),b=r?$o(r.role,"host"):!1,k=r?$o(r.role,"reception"):!1,N=r?$o(r.role,"site_admin"):!1;return p.jsx(Hx.Provider,{value:{site:n,user:r,isHost:b,isReception:k,isSiteAdmin:N,login:v,logout:y,unreadNotificationCount:o,activeEvacuation:d},children:t})}function pt(){const t=S.useContext(Hx);if(!t)throw new Error("useAuth must be used within AuthProvider");return t}const mE={host:"bg-primark-blue-light text-primark-blue",reception:"bg-warning-bg text-warning",site_admin:"bg-danger-bg text-danger"},pE={host:"Host",reception:"Reception",site_admin:"Site Admin"};function gE(){const{user:t,site:n,logout:a,unreadNotificationCount:r}=pt(),l=Ft();return p.jsxs("nav",{className:"h-16 bg-navy flex items-center justify-between px-6 shrink-0 z-10",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-primark-blue font-bold uppercase tracking-[0.15em] text-lg leading-none",children:"PRIMARK"}),p.jsx("span",{className:"text-mid-grey text-xs",children:"SafePass"})]}),t&&p.jsxs("div",{className:"flex items-center gap-4",children:[n&&p.jsx("span",{className:"text-mid-grey text-sm hidden sm:block",children:n.name}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"text-white text-sm font-medium hidden sm:block",children:t.name}),p.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${mE[t.role]??"bg-light-grey text-charcoal"}`,children:pE[t.role]??t.role})]}),p.jsxs("button",{onClick:()=>l("/inbox"),className:"relative text-mid-grey hover:text-white transition-colors p-1","aria-label":"Notifications",children:[p.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),r>0&&p.jsx("span",{className:"absolute -top-1 -right-1 bg-danger text-white text-xs font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1",children:r>99?"99+":r})]}),p.jsx("button",{onClick:()=>{a(),l("/login")},className:"text-mid-grey hover:text-white text-sm transition-colors hidden sm:block",children:"Logout"})]})]})}const yE=[{to:"/",label:"Home",icon:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{to:"/visitors",label:"Visitors",icon:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})})},{to:"/inbox",label:"Inbox",icon:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})},{to:"/admin",label:"Admin",minRole:"site_admin",icon:p.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}];function xE(){const{user:t}=pt();return t?p.jsx("nav",{className:"bg-white border-t border-border-grey flex sm:hidden shrink-0 no-print",children:yE.filter(n=>n.minRole?t.role===n.minRole:!0).map(n=>p.jsxs(ox,{to:n.to,end:n.to==="/",className:({isActive:a})=>`flex-1 flex flex-col items-center justify-center py-2 gap-0.5 text-xs font-medium transition-colors ${a?"text-primark-blue":"text-mid-grey"}`,children:[n.icon,n.label]},n.to))}):null}function bE({event:t}){const n=Ft();return p.jsxs("div",{className:"bg-alert-red text-white px-6 py-3 flex items-center justify-between no-print",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("svg",{className:"w-5 h-5 shrink-0 animate-pulse",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),p.jsx("span",{className:"font-bold uppercase tracking-wide text-sm",children:"EVACUATION IN PROGRESS"}),p.jsx("span",{className:"text-sm text-red-200",children:" Check-ins and sign-outs are suspended"})]}),p.jsx("button",{onClick:()=>n("/evacuation"),className:"text-sm font-semibold underline text-white hover:text-red-200 transition-colors shrink-0",children:"View Evacuation"})]})}const Pd=4;function vE({onComplete:t,error:n=!1,disabled:a=!1}){const[r,l]=S.useState([]);S.useEffect(()=>{n&&l([])},[n]);function o(d){if(a)return;if(d==="backspace"){l(m=>m.slice(0,-1));return}const h=[...r,d];l(h),h.length===Pd&&t(h.join(""))}const c=["1","2","3","4","5","6","7","8","9","","0","backspace"];return p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx("div",{className:"flex gap-4",children:Array.from({length:Pd}).map((d,h)=>p.jsx("div",{className:`w-4 h-4 rounded-full border-2 transition-colors ${h<r.length?"bg-primark-blue border-primark-blue":"bg-white border-border-grey"}`},h))}),p.jsx("div",{className:"grid grid-cols-3 gap-3 w-full max-w-xs",children:c.map((d,h)=>d===""?p.jsx("div",{},h):d==="backspace"?p.jsx("button",{onClick:()=>o("backspace"),disabled:a||r.length===0,className:"flex items-center justify-center h-14 rounded-xl bg-light-grey text-charcoal font-semibold text-lg hover:bg-border-grey active:scale-95 transition-all disabled:opacity-40 select-none","aria-label":"Backspace",children:""},h):p.jsx("button",{onClick:()=>o(d),disabled:a||r.length>=Pd,className:"flex items-center justify-center h-14 rounded-xl bg-white border border-border-grey text-navy font-semibold text-xl hover:bg-primark-blue-light hover:border-primark-blue active:scale-95 transition-all disabled:opacity-40 select-none shadow-card",children:d},h))})]})}function wE(){const{login:t,site:n}=pt(),a=Ft(),[r,l]=S.useState(""),[o,c]=S.useState(""),[d,h]=S.useState(!1),[m,y]=S.useState(!1),x=S.useRef(null);S.useEffect(()=>{var b;if(d){(b=x.current)==null||b.classList.add("shake");const k=setTimeout(()=>{var N;(N=x.current)==null||N.classList.remove("shake"),h(!1)},500);return()=>clearTimeout(k)}},[d]);async function v(b){if(!r.trim()){c("Please enter your username"),h(!0);return}y(!0),c("");const k=await t(r.trim().toLowerCase(),b);y(!1),k?a("/",{replace:!0}):(c("Incorrect username or PIN"),h(!0))}return p.jsx("div",{className:"min-h-screen bg-light-grey flex items-center justify-center p-6",children:p.jsxs("div",{ref:x,className:"bg-white rounded-2xl shadow-xl p-8 w-full max-w-sm",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx("div",{className:"text-primark-blue font-bold uppercase tracking-[0.15em] text-3xl leading-none",children:"PRIMARK"}),p.jsx("div",{className:"text-mid-grey text-sm mt-1 font-medium",children:"SafePass"})]}),n&&p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:"Site"}),p.jsx("div",{className:"w-full px-3 py-2.5 border border-border-grey rounded-lg text-sm text-charcoal bg-light-grey",children:n.name})]}),p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:"Username"}),p.jsx("input",{type:"text",value:r,onChange:b=>{l(b.target.value),c("")},placeholder:"e.g. claire.m",autoCapitalize:"none",autoCorrect:"off",autoComplete:"username",className:"w-full px-3 py-2.5 border border-border-grey rounded-lg text-sm text-charcoal bg-white min-h-input focus:outline-none focus:ring-2 focus:ring-primark-blue focus:border-transparent placeholder:text-mid-grey"})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-3 text-center",children:"Enter PIN"}),p.jsx(vE,{onComplete:v,error:d,disabled:m})]}),o&&p.jsx("p",{className:"text-danger text-sm text-center mt-3 font-medium",children:o}),m&&p.jsx("p",{className:"text-mid-grey text-sm text-center mt-3",children:"Verifying..."})]})})}function Rt(t,n){if(!t)return"";const a=new Date(t);if(isNaN(a.getTime()))return"";const r=new Date;if(n==="time-only")return a.toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"});if(n==="date-only")return a.toLocaleDateString("en-IE",{day:"numeric",month:"short",year:"numeric"});if(n==="absolute")return a.toLocaleString("en-IE",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});const l=r.getTime()-a.getTime(),o=Math.floor(l/1e3),c=Math.floor(o/60),d=Math.floor(c/60);if(l<0){const m=Math.abs(c),y=Math.abs(d);return m<60?`in ${m} min`:y<24?`in ${y}h`:a.toLocaleDateString("en-IE",{day:"numeric",month:"short"})+" at "+a.toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"})}if(o<60)return"just now";if(c<60)return`${c} minute${c===1?"":"s"} ago`;if(d<24)return`${d} hour${d===1?"":"s"} ago`;const h=new Date(r);return h.setDate(h.getDate()-1),a.toDateString()===h.toDateString()?"Yesterday at "+a.toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"}):a.toLocaleDateString("en-IE",{day:"numeric",month:"short"})+" at "+a.toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"})}function Jo(t){return t.status==="checked_in"&&new Date(t.planned_departure)<new Date?"overdue":t.status}function kf(t){const n=new Date(t),a=new Date;return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()&&n.getDate()===a.getDate()}function tl(){const{site:t}=pt(),[n,a]=S.useState([]),[r,l]=S.useState([]),[o,c]=S.useState(!0),d=S.useCallback(async()=>{if(!t)return;c(!0);const v=new Date,b=new Date(v.getFullYear(),v.getMonth(),v.getDate()).toISOString(),k=new Date(v.getFullYear(),v.getMonth(),v.getDate()+1).toISOString(),{data:N}=await oe.from("visits").select(`
        *,
        visitor:visitors(*),
        host:users!visits_host_user_id_fkey(id,name,username,email,site_id,role,is_active,created_at,updated_at)
      `).eq("site_id",t.id).or(`planned_arrival.gte.${b},status.eq.checked_in`).lt("planned_arrival",k).neq("status","cancelled").order("planned_arrival"),C=N??[];a(C.filter(E=>kf(E.planned_arrival)&&E.status==="scheduled")),l(C.filter(E=>E.status==="checked_in")),c(!1)},[t]);S.useEffect(()=>{if(d(),!t)return;const v=oe.channel(`visits:site:${t.id}`).on("postgres_changes",{event:"*",schema:"public",table:"visits",filter:`site_id=eq.${t.id}`},()=>d()).subscribe();return()=>{oe.removeChannel(v)}},[t,d]);const h=S.useCallback(async v=>{const{data:b}=await oe.from("visits").select(`
        *,
        visitor:visitors(*),
        host:users!visits_host_user_id_fkey(id,name,username,email,site_id,role,is_active,created_at,updated_at)
      `).eq("id",v).single();return b??null},[]),m=S.useCallback(async v=>{const{data:b}=await oe.from("visits").select(`
        *,
        visitor:visitors(*),
        host:users!visits_host_user_id_fkey(id,name,username,email,site_id,role,is_active,created_at,updated_at)
      `).eq("visitor_id",v).order("planned_arrival",{ascending:!1});return b??[]},[]),y=S.useCallback(async v=>{const{data:b,error:k}=await oe.from("visits").insert(v).select().single();if(k)throw k;return b},[]),x=S.useCallback(async(v,b)=>{const{error:k}=await oe.from("visits").update({...b,updated_at:new Date().toISOString()}).eq("id",v);if(k)throw k},[]);return{todaysVisits:n,checkedInVisits:r,loading:o,fetchVisits:d,getVisitById:h,getVisitsForVisitor:m,createVisit:y,updateVisit:x}}const _E=3e4;function SE(t,n,a){S.useEffect(()=>{if(!t||!n||!a)return;async function r(){if(!t||!n)return;const o=new Date(Date.now()-t.notification_escalation_minutes*60*1e3).toISOString(),{data:c}=await oe.from("notifications").select("*, visit:visits(id, visitor_id, site_id)").eq("notification_type","escort_required").eq("requires_acknowledgement",!0).is("acknowledged_at",null).eq("escalated",!1).lt("created_at",o);if(!(!c||c.length===0))for(const d of c){const h=d.visit_id;if(!h)continue;const{data:m}=await oe.from("visit_host_contacts").select("user_id, is_backup").eq("visit_id",h).eq("is_backup",!0);let y=null,x="escalation_reception";if(m&&m.length>0){const{data:v}=await oe.from("notifications").select("id, acknowledged_at").eq("visit_id",h).eq("notification_type","escalation").maybeSingle();if(!v)y=m[0].user_id,x="escalation";else{if(v.acknowledged_at)continue;{const b=new Date(Date.now()-t.notification_escalation_minutes*60*1e3).toISOString();if(v&&new Date(v.id).toISOString()<b)x="escalation_reception";else continue}}}if(x==="escalation_reception"){const{data:v}=await oe.from("users").select("id").eq("site_id",t.id).in("role",["reception","site_admin"]).eq("is_active",!0);if(!v)continue;for(const b of v)await oe.from("notifications").insert({recipient_type:"user",recipient_user_id:b.id,visit_id:h,notification_type:"escalation_reception",title:"Escalation: Host not responding",body:`No host has acknowledged the escort request for visit ${h}. Please follow up manually.`,requires_acknowledgement:!1})}else y&&await oe.from("notifications").insert({recipient_type:"user",recipient_user_id:y,visit_id:h,notification_type:"escalation",title:"Escalation: Visitor awaiting escort",body:"The primary host has not responded. Please collect the visitor.",requires_acknowledgement:!0});await oe.from("notifications").update({escalated:!0}).eq("id",d.id),await oe.from("audit_log").insert({action:"escalation_triggered",entity_type:"notification",entity_id:d.id,user_id:n,details:{visit_id:h,escalation_type:x}})}}r();const l=setInterval(r,_E);return()=>clearInterval(l)},[t,n,a])}const kE={blue:{bg:"bg-primark-blue-light",text:"text-primark-blue",border:"border-primark-blue"},green:{bg:"bg-success-bg",text:"text-success",border:"border-success"},amber:{bg:"bg-warning-bg",text:"text-warning",border:"border-warning"},red:{bg:"bg-danger-bg",text:"text-danger",border:"border-danger"},grey:{bg:"bg-light-grey",text:"text-mid-grey",border:"border-border-grey"}};function Do({value:t,label:n,colour:a="blue",icon:r,onClick:l}){const o=kE[a];return p.jsx("div",{className:`rounded-xl p-5 shadow-card bg-white border-l-4 ${o.border} ${l?"cursor-pointer hover:shadow-md transition-shadow":""}`,onClick:l,children:p.jsxs("div",{className:"flex items-start justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:`text-4xl font-bold leading-none ${o.text}`,children:t}),p.jsx("div",{className:"text-sm font-medium text-mid-grey mt-2 uppercase tracking-wide",children:n})]}),r&&p.jsx("div",{className:`p-2 rounded-lg ${o.bg}`,children:p.jsx("span",{className:o.text,children:r})})]})})}const EE={scheduled:"bg-light-grey text-mid-grey",checked_in:"bg-success-bg text-success",awaiting_escort:"bg-warning-bg text-warning",overdue:"bg-danger-bg text-danger",departed:"bg-primark-blue-light text-primark-blue",cancelled:"bg-white text-mid-grey border border-border-grey",denied:"bg-white text-danger border border-danger",pending:"bg-warning-bg text-warning",approved:"bg-success-bg text-success",rejected:"bg-danger-bg text-danger",expired:"bg-light-grey text-mid-grey",revoked:"bg-danger-bg text-danger",active:"bg-success-bg text-success"},jE={scheduled:"Scheduled",checked_in:"Active  Unescorted",awaiting_escort:"Awaiting Escort",overdue:"Overdue",departed:"Departed",cancelled:"Cancelled",denied:"Denied",pending:"Pending",approved:"Approved",rejected:"Rejected",expired:"Expired",revoked:"Revoked",active:"Active"};function Zo({status:t,label:n}){const a=EE[t]??"bg-light-grey text-mid-grey",r=n??jE[t]??t;return p.jsx("span",{className:`inline-flex items-center px-3 py-0.5 rounded-full text-xs font-semibold ${a}`,children:r})}function ny({done:t}){return t?p.jsx("span",{className:"text-success",title:"Complete",children:""}):p.jsx("span",{className:"text-danger",title:"Outstanding",children:""})}function NE({visit:t,onClick:n}){const a=Jo(t),r=t.documents_accepted!==void 0;return p.jsxs("tr",{className:`border-b border-border-grey transition-colors ${n?"cursor-pointer hover:bg-primark-blue-light":""}`,onClick:n,children:[p.jsx("td",{className:"py-3 px-4 text-sm text-charcoal whitespace-nowrap",children:Rt(t.planned_arrival,"time-only")}),p.jsxs("td",{className:"py-3 px-4",children:[p.jsx("div",{className:"text-sm font-semibold text-navy",children:t.visitor.name}),t.visitor.company&&p.jsx("div",{className:"text-xs text-mid-grey",children:t.visitor.company})]}),p.jsx("td",{className:"py-3 px-4 hidden sm:table-cell",children:p.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${t.visitor.visitor_type==="internal_staff"?"bg-primark-blue-light text-primark-blue":"bg-light-grey text-mid-grey"}`,children:t.visitor.visitor_type==="internal_staff"?"Internal":"3rd Party"})}),p.jsx("td",{className:"py-3 px-4 hidden md:table-cell",children:p.jsx("div",{className:"text-sm text-charcoal",children:t.host.name})}),p.jsx("td",{className:"py-3 px-4 hidden lg:table-cell",children:p.jsx("div",{className:"text-sm text-mid-grey truncate max-w-[160px]",children:t.purpose})}),p.jsx("td",{className:"py-3 px-4 hidden sm:table-cell",children:p.jsxs("div",{className:"flex gap-2 text-sm",children:[p.jsxs("span",{title:"H&S Induction",children:["H&S: ",p.jsx(ny,{done:t.induction_completed})]}),r&&p.jsxs("span",{title:"Documents",children:["Docs: ",p.jsx(ny,{done:t.documents_accepted})]})]})}),p.jsx("td",{className:"py-3 px-4",children:p.jsx(Zo,{status:a==="checked_in"&&t.access_status==="awaiting_escort"?"awaiting_escort":a})})]})}function nl({placeholder:t="Search...",onSearch:n,defaultValue:a="",className:r=""}){const[l,o]=S.useState(a),c=S.useRef(null);return S.useEffect(()=>(c.current&&clearTimeout(c.current),c.current=setTimeout(()=>n(l),300),()=>{c.current&&clearTimeout(c.current)}),[l,n]),p.jsxs("div",{className:`relative ${r}`,children:[p.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-mid-grey w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),p.jsx("input",{type:"text",value:l,onChange:d=>o(d.target.value),placeholder:t,className:"w-full pl-10 pr-4 py-2.5 border border-border-grey rounded-lg text-sm text-charcoal bg-white min-h-input focus:outline-none focus:ring-2 focus:ring-primark-blue focus:border-transparent placeholder:text-mid-grey"}),l&&p.jsx("button",{onClick:()=>o(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-mid-grey hover:text-charcoal","aria-label":"Clear",children:""})]})}function va({icon:t,title:n,message:a,action:r}){return p.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-6 text-center",children:[t&&p.jsx("div",{className:"w-16 h-16 rounded-full bg-light-grey flex items-center justify-center mb-4 text-mid-grey text-2xl",children:t}),p.jsx("h3",{className:"text-base font-semibold text-navy mb-1",children:n}),a&&p.jsx("p",{className:"text-sm text-mid-grey mb-6 max-w-xs",children:a}),r&&p.jsx("button",{onClick:r.onClick,className:"px-6 py-2.5 bg-primark-blue text-white rounded-lg font-medium text-sm hover:bg-primark-blue-dark transition-colors min-h-btn",children:r.label})]})}function Hn({title:t,message:n,confirmLabel:a="Confirm",cancelLabel:r="Cancel",variant:l="default",onConfirm:o,onCancel:c,children:d}){return p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[p.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:c}),p.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[p.jsx("h2",{className:"text-lg font-semibold text-navy mb-2",children:t}),p.jsx("p",{className:"text-charcoal text-sm mb-4",children:n}),d&&p.jsx("div",{className:"mb-4",children:d}),p.jsxs("div",{className:"flex gap-3 justify-end",children:[p.jsx("button",{onClick:c,className:"px-4 py-2 rounded-lg border border-border-grey text-charcoal font-medium text-sm hover:bg-light-grey transition-colors",children:r}),p.jsx("button",{onClick:o,className:`px-4 py-2 rounded-lg font-medium text-sm text-white transition-colors min-h-btn ${l==="danger"?"bg-danger hover:bg-red-700":"bg-primark-blue hover:bg-primark-blue-dark"}`,children:a})]})]})]})}function CE(){const t=Ft(),{user:n,site:a,isReception:r,isSiteAdmin:l,activeEvacuation:o}=pt(),{todaysVisits:c,checkedInVisits:d,loading:h}=tl(),[m,y]=S.useState(""),[x,v]=S.useState(!1);SE(a,(n==null?void 0:n.id)??null,r);const b=d.filter(E=>Jo(E)==="overdue"),k=d.filter(E=>E.access_status==="awaiting_escort"),N=c.filter(E=>{if(!m)return!0;const L=m.toLowerCase();return E.visitor.name.toLowerCase().includes(L)||(E.visitor.company??"").toLowerCase().includes(L)||E.host.name.toLowerCase().includes(L)}),C=d.filter(E=>E.access_status==="unescorted");return p.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-navy",children:"Dashboard"}),p.jsx("p",{className:"text-sm text-mid-grey mt-0.5",children:new Date().toLocaleDateString("en-IE",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]}),l&&p.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-2 bg-danger text-white px-5 py-3 rounded-xl font-semibold text-sm hover:bg-red-700 transition-colors min-h-btn",children:[p.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Emergency Evacuation"]})]}),p.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[p.jsx(Do,{value:h?"":c.length,label:"Expected Today",colour:"blue",icon:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),p.jsx(Do,{value:h?"":d.length,label:"On-Site Now",colour:d.length>0?"amber":"green",icon:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})})}),p.jsx(Do,{value:h?"":k.length,label:"Awaiting Escort",colour:k.length>0?"red":"green",icon:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),p.jsx(Do,{value:h?"":b.length,label:"Overdue",colour:b.length>0?"red":"green",icon:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),p.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-5 gap-6",children:[p.jsx("div",{className:"xl:col-span-3",children:p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h2",{className:"text-lg font-semibold text-navy",children:"Expected Today"}),r&&!o&&p.jsx("button",{onClick:()=>t("/visitors/new?walkin=true"),className:"flex items-center gap-1.5 bg-primark-blue text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-primark-blue-dark transition-colors min-h-btn",children:"+ Walk-In"})]}),p.jsx(nl,{placeholder:"Search visitors, company...",onSearch:y,className:"mb-4"}),h?p.jsx("div",{className:"space-y-3",children:[...Array(3)].map((E,L)=>p.jsx("div",{className:"h-12 skeleton rounded-lg"},L))}):N.length===0?p.jsx(va,{icon:"",title:"No visitors expected",message:m?"No visitors match your search":"No scheduled visitors for today",action:r&&!o?{label:"Register Walk-In",onClick:()=>t("/visitors/new?walkin=true")}:void 0}):p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"text-left",children:[p.jsx("th",{className:"py-2 px-4 text-xs font-medium text-mid-grey uppercase tracking-wide",children:"Time"}),p.jsx("th",{className:"py-2 px-4 text-xs font-medium text-mid-grey uppercase tracking-wide",children:"Visitor"}),p.jsx("th",{className:"py-2 px-4 text-xs font-medium text-mid-grey uppercase tracking-wide hidden sm:table-cell",children:"Type"}),p.jsx("th",{className:"py-2 px-4 text-xs font-medium text-mid-grey uppercase tracking-wide hidden md:table-cell",children:"Host"}),p.jsx("th",{className:"py-2 px-4 text-xs font-medium text-mid-grey uppercase tracking-wide hidden lg:table-cell",children:"Purpose"}),p.jsx("th",{className:"py-2 px-4 text-xs font-medium text-mid-grey uppercase tracking-wide hidden sm:table-cell",children:"Pre-Arrival"}),p.jsx("th",{className:"py-2 px-4 text-xs font-medium text-mid-grey uppercase tracking-wide",children:"Status"})]})}),p.jsx("tbody",{children:N.map(E=>p.jsx(NE,{visit:E,onClick:r?()=>t(`/checkin/${E.id}`):void 0},E.id))})]})})]})}),r&&p.jsxs("div",{className:"xl:col-span-2 space-y-4",children:[k.length>0&&p.jsx(Gd,{title:"Awaiting Escort",colour:"amber",visits:k,onAction:E=>t(`/checkin/${E.id}`)}),b.length>0&&p.jsx(Gd,{title:"Overdue",colour:"red",visits:b,onAction:E=>t(`/checkin/${E.id}`)}),p.jsx(Gd,{title:"On-Site  Unescorted",colour:"green",visits:C})]})]}),x&&p.jsx(Hn,{title:"Activate Emergency Evacuation?",message:"This will immediately suspend all check-ins and sign-outs and display an evacuation alert to all logged-in users. This action should only be used in a genuine emergency.",confirmLabel:"Activate Evacuation",variant:"danger",onConfirm:()=>{v(!1),t("/evacuation?activate=true")},onCancel:()=>v(!1)})]})}function Gd({title:t,colour:n,visits:a,onAction:r}){const l={green:"border-success",amber:"border-warning",red:"border-danger"}[n],o={green:"text-success",amber:"text-warning",red:"text-danger"}[n];return p.jsxs("div",{className:`bg-white rounded-xl shadow-card p-4 border-l-4 ${l}`,children:[p.jsxs("h3",{className:`text-sm font-semibold uppercase tracking-wide mb-3 ${o}`,children:[t," (",a.length,")"]}),a.length===0?p.jsx("p",{className:"text-sm text-mid-grey",children:"None"}):p.jsx("div",{className:"space-y-2",children:a.map(c=>p.jsxs("div",{className:`flex items-center justify-between p-2.5 rounded-lg bg-light-grey ${r?"cursor-pointer hover:bg-border-grey transition-colors":""}`,onClick:()=>r==null?void 0:r(c),children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-sm font-semibold text-navy",children:c.visitor.name}),p.jsxs("div",{className:"text-xs text-mid-grey",children:[c.visitor.company,"  Since ",Rt(c.actual_arrival,"time-only")]})]}),p.jsx("div",{className:"text-xs text-mid-grey",children:c.host.name})]},c.id))})]})}function wa(){const{site:t}=pt(),[n,a]=S.useState([]),[r,l]=S.useState(!1),o=S.useCallback(async x=>{if(!t)return;l(!0);const v=x.trim().toLowerCase();let b=oe.from("visitors").select("*").eq("is_anonymised",!1).order("name").limit(50);v&&(b=b.or(`name.ilike.%${v}%,email.ilike.%${v}%,company.ilike.%${v}%`));const{data:k}=await b;a(k??[]),l(!1)},[t]),c=S.useCallback(async x=>{const{data:v}=await oe.from("visitors").select("*").eq("id",x).single();return v??null},[]),d=S.useCallback(async x=>{const{data:v}=await oe.from("visitors").select("*").eq("access_token",x).single();return v??null},[]),h=S.useCallback(async x=>{const{data:v,error:b}=await oe.from("visitors").insert(x).select().single();if(b)throw b;return v},[]),m=S.useCallback(async(x,v)=>{const{error:b}=await oe.from("visitors").update({...v,updated_at:new Date().toISOString()}).eq("id",x);if(b)throw b},[]),y=S.useCallback(async(x,v)=>{const{data:b}=await oe.from("visitors").select("*").eq("is_anonymised",!1).ilike("email",v.trim()).maybeSingle();return b??null},[]);return{visitors:n,loading:r,search:o,getById:c,getByToken:d,createVisitor:h,updateVisitor:m,checkDuplicate:y}}function Vn({title:t,subtitle:n,backTo:a,actions:r}){const l=Ft();return p.jsxs("div",{className:"flex items-center justify-between mb-6",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[a&&p.jsx("button",{onClick:()=>l(a),className:"text-mid-grey hover:text-charcoal p-1.5 rounded-lg hover:bg-light-grey transition-colors","aria-label":"Go back",children:p.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-navy leading-tight",children:t}),n&&p.jsx("p",{className:"text-sm text-mid-grey mt-0.5",children:n})]})]}),r&&p.jsx("div",{className:"flex items-center gap-2",children:r})]})}function TE(){const t=Ft(),{isReception:n}=pt(),{visitors:a,loading:r,search:l}=wa(),[o,c]=S.useState(!1),d=S.useCallback(h=>{h.trim()?(c(!0),l(h)):c(!1)},[l]);return p.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[p.jsx(Vn,{title:"Visitors",subtitle:"Search for existing visitor profiles",actions:n?p.jsx("button",{onClick:()=>t("/visitors/new"),className:"bg-primark-blue text-white px-5 py-2.5 rounded-xl font-semibold text-sm hover:bg-primark-blue-dark transition-colors min-h-btn",children:"+ New Visitor"}):void 0}),p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[p.jsx(nl,{placeholder:"Search by name, email, or company...",onSearch:d,className:"mb-5"}),!o&&p.jsx(va,{icon:"",title:"Search for a visitor",message:"Enter a name, email address, or company to find existing visitor profiles."}),o&&r&&p.jsx("div",{className:"space-y-3",children:[...Array(4)].map((h,m)=>p.jsx("div",{className:"h-16 skeleton rounded-lg"},m))}),o&&!r&&a.length===0&&p.jsx(va,{icon:"",title:"No visitors found",message:"No matching visitor profiles. You can create a new one.",action:n?{label:"Create New Visitor",onClick:()=>t("/visitors/new")}:void 0}),o&&!r&&a.length>0&&p.jsx("div",{className:"divide-y divide-border-grey",children:a.map(h=>p.jsx(AE,{visitor:h,onClick:()=>t(`/visitors/${h.id}`)},h.id))})]})]})}function AE({visitor:t,onClick:n}){return p.jsxs("div",{className:"flex items-center justify-between py-4 px-2 cursor-pointer hover:bg-light-grey rounded-lg transition-colors",onClick:n,children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-10 h-10 rounded-full bg-primark-blue-light flex items-center justify-center text-primark-blue font-bold text-sm shrink-0",children:t.name.charAt(0).toUpperCase()}),p.jsxs("div",{children:[p.jsx("div",{className:"text-sm font-semibold text-navy",children:t.name}),p.jsx("div",{className:"text-xs text-mid-grey",children:t.email}),t.company&&p.jsx("div",{className:"text-xs text-mid-grey",children:t.company})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${t.visitor_type==="internal_staff"?"bg-primark-blue-light text-primark-blue":"bg-light-grey text-mid-grey"}`,children:t.visitor_type==="internal_staff"?"Internal":"3rd Party"}),p.jsx("svg",{className:"w-4 h-4 text-mid-grey",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})}function Xf(){const t=S.useCallback(async(d,h)=>{const{data:m}=await oe.from("pre_approvals").select("*").eq("visitor_id",d).eq("site_id",h).eq("status","approved").gt("expires_at",new Date().toISOString()).maybeSingle();return m??null},[]),n=S.useCallback(async d=>{const{data:h}=await oe.from("pre_approvals").select("*").eq("site_id",d).order("created_at",{ascending:!1});return h??[]},[]),a=S.useCallback(async d=>{const{data:h}=await oe.from("pre_approvals").select("*").eq("requested_by",d).order("created_at",{ascending:!1});return h??[]},[]),r=S.useCallback(async d=>{const{error:h}=await oe.from("pre_approvals").insert(d);if(h)throw h},[]),l=S.useCallback(async(d,h,m)=>{const y=new Date;y.setDate(y.getDate()+m);const{error:x}=await oe.from("pre_approvals").update({status:"approved",approved_by:h,expires_at:y.toISOString(),updated_at:new Date().toISOString()}).eq("id",d);if(x)throw x},[]),o=S.useCallback(async(d,h,m)=>{const{error:y}=await oe.from("pre_approvals").update({status:"rejected",reason:h,approved_by:m,updated_at:new Date().toISOString()}).eq("id",d);if(y)throw y},[]),c=S.useCallback(async(d,h)=>{const{error:m}=await oe.from("pre_approvals").update({status:"revoked",revoked_by:h,revoked_at:new Date().toISOString(),updated_at:new Date().toISOString()}).eq("id",d);if(m)throw m},[]);return{getForVisitorSite:t,getAll:n,getForUser:a,request:r,approve:l,reject:o,revoke:c}}function Qf(){const t=S.useCallback(async(o,c)=>{const{data:d}=await oe.from("deny_list").select("*").eq("site_id",c).eq("visitor_id",o.id).eq("is_active",!0).or("is_permanent.eq.true,expires_at.gt."+new Date().toISOString()).maybeSingle();if(d)return d;if(!o.email)return null;const{data:h}=await oe.from("deny_list").select("*").eq("site_id",c).ilike("visitor_email",o.email).eq("is_active",!0).or("is_permanent.eq.true,expires_at.gt."+new Date().toISOString()).maybeSingle();return h??null},[]),n=S.useCallback(async o=>{const{data:c}=await oe.from("deny_list").select("*").eq("site_id",o).order("created_at",{ascending:!1});return c??[]},[]),a=S.useCallback(async o=>{const{error:c}=await oe.from("deny_list").insert(o);if(c)throw c},[]),r=S.useCallback(async(o,c)=>{const{error:d}=await oe.from("deny_list").update({...c,updated_at:new Date().toISOString()}).eq("id",o);if(d)throw d},[]),l=S.useCallback(async o=>{const{error:c}=await oe.from("deny_list").update({is_active:!1,updated_at:new Date().toISOString()}).eq("id",o);if(c)throw c},[]);return{checkDenyList:t,getDenyListEntries:n,addToDenyList:a,updateDenyListEntry:r,removeDenyListEntry:l}}function Pn(){const t=S.useCallback(async(a,r,l,o,c)=>{await oe.from("audit_log").insert({action:a,entity_type:r,entity_id:l,user_id:o,details:c??null})},[]),n=S.useCallback(async(a,r)=>{const{data:l}=await oe.from("audit_log").select("*").eq("entity_type",a).eq("entity_id",r).order("created_at",{ascending:!1});return l??[]},[]);return{log:t,getForEntity:n}}function RE(){const{id:t}=Bf(),n=Ft(),{user:a,site:r,isSiteAdmin:l,isReception:o}=pt(),{getById:c,updateVisitor:d}=wa(),{getVisitsForVisitor:h}=tl(),{getForVisitorSite:m}=Xf(),{checkDenyList:y}=Qf(),{log:x}=Pn(),[v,b]=S.useState(null),[k,N]=S.useState([]),[C,E]=S.useState(null),[L,R]=S.useState(null),[P,W]=S.useState(!0),[z,Y]=S.useState(!1),[te,ae]=S.useState(!1);S.useEffect(()=>{!t||!r||Promise.all([c(t),h(t),m(t,r.id)]).then(async([I,Z,de])=>{if(b(I),N(Z),E(de),I){const se=await y(I,r.id);R(se)}W(!1)})},[t,r,c,h,m,y]);async function fe(){if(!(!v||!a)){ae(!0);try{await d(v.id,{name:"Anonymised Visitor",email:`anonymised-${v.id}@deleted.local`,phone:null,company:null,is_anonymised:!0}),await x("visitor_anonymised","visitor",v.id,a.id,{original_email:v.email}),we.success("Visitor anonymised"),n("/visitors")}catch{we.error("Anonymisation failed")}finally{ae(!1),Y(!1)}}}return P?p.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[p.jsx("div",{className:"h-8 w-48 skeleton rounded mb-6"}),p.jsx("div",{className:"bg-white rounded-xl shadow-card p-6 space-y-4",children:[...Array(4)].map((I,Z)=>p.jsx("div",{className:"h-6 skeleton rounded"},Z))})]}):v?p.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[p.jsx(Vn,{title:v.is_anonymised?"Anonymised Visitor":v.name,subtitle:v.company??void 0,backTo:"/visitors",actions:p.jsxs("div",{className:"flex gap-2",children:[o&&p.jsx("button",{onClick:()=>n(`/schedule?visitor_id=${v.id}`),className:"bg-primark-blue text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-primark-blue-dark transition-colors",children:"Schedule Visit"}),l&&!v.is_anonymised&&p.jsx("button",{onClick:()=>Y(!0),className:"border border-danger text-danger px-4 py-2 rounded-lg text-sm font-semibold hover:bg-danger-bg transition-colors",children:"Anonymise"})]})}),L&&p.jsxs("div",{className:"bg-danger-bg border border-danger rounded-xl p-4 mb-6",children:[p.jsx("p",{className:"text-sm font-bold text-danger",children:" This visitor is on the deny list"}),p.jsx("p",{className:"text-sm text-charcoal mt-1",children:L.reason}),L.is_permanent&&p.jsx("p",{className:"text-xs text-mid-grey mt-1",children:"Permanent ban"}),L.expires_at&&p.jsxs("p",{className:"text-xs text-mid-grey mt-1",children:["Expires: ",Rt(L.expires_at,"date-only")]})]}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[p.jsx("div",{className:"lg:col-span-1",children:p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[p.jsx("h2",{className:"text-base font-semibold text-navy mb-4",children:"Profile Details"}),p.jsxs("dl",{className:"space-y-3",children:[p.jsx(Lo,{label:"Name",value:v.name}),p.jsx(Lo,{label:"Email",value:v.email}),p.jsx(Lo,{label:"Phone",value:v.phone??""}),p.jsx(Lo,{label:"Company",value:v.company??""}),p.jsxs("div",{children:[p.jsx("dt",{className:"text-xs font-medium text-mid-grey uppercase tracking-wide mb-0.5",children:"Type"}),p.jsx("dd",{children:p.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${v.visitor_type==="internal_staff"?"bg-primark-blue-light text-primark-blue":"bg-light-grey text-mid-grey"}`,children:v.visitor_type==="internal_staff"?"Internal Staff":"Third Party"})})]}),p.jsxs("div",{children:[p.jsx("dt",{className:"text-xs font-medium text-mid-grey uppercase tracking-wide mb-0.5",children:"Pre-Approval"}),p.jsx("dd",{children:C?p.jsxs("div",{children:[p.jsx(Zo,{status:C.status}),C.expires_at&&p.jsxs("p",{className:"text-xs text-mid-grey mt-1",children:["Expires ",Rt(C.expires_at,"date-only")]})]}):p.jsx("span",{className:"text-sm text-mid-grey",children:"None"})})]})]})]})}),p.jsx("div",{className:"lg:col-span-2",children:p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[p.jsxs("h2",{className:"text-base font-semibold text-navy mb-4",children:["Visit History (",k.length,")"]}),k.length===0?p.jsx("p",{className:"text-sm text-mid-grey",children:"No visits on record."}):p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-sm",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"text-left",children:[p.jsx("th",{className:"py-2 pr-4 text-xs font-medium text-mid-grey uppercase tracking-wide",children:"Date"}),p.jsx("th",{className:"py-2 pr-4 text-xs font-medium text-mid-grey uppercase tracking-wide",children:"Purpose"}),p.jsx("th",{className:"py-2 pr-4 text-xs font-medium text-mid-grey uppercase tracking-wide",children:"Host"}),p.jsx("th",{className:"py-2 pr-4 text-xs font-medium text-mid-grey uppercase tracking-wide",children:"Status"})]})}),p.jsx("tbody",{children:k.map(I=>p.jsxs("tr",{className:"border-t border-border-grey cursor-pointer hover:bg-light-grey",onClick:()=>o?n(`/checkin/${I.id}`):void 0,children:[p.jsx("td",{className:"py-3 pr-4 text-charcoal whitespace-nowrap",children:Rt(I.planned_arrival,"date-only")}),p.jsx("td",{className:"py-3 pr-4 text-charcoal max-w-[160px] truncate",children:I.purpose}),p.jsx("td",{className:"py-3 pr-4 text-charcoal",children:I.host.name}),p.jsx("td",{className:"py-3 pr-4",children:p.jsx(Zo,{status:Jo(I)==="checked_in"&&I.access_status==="awaiting_escort"?"awaiting_escort":Jo(I)})})]},I.id))})]})})]})})]}),z&&p.jsx(Hn,{title:"Anonymise this visitor?",message:"This will permanently remove all identifying information (name, email, phone, company) from this visitor record. Visit history, induction records, and audit logs are retained. This cannot be undone.",confirmLabel:te?"Anonymising...":"Anonymise Visitor",variant:"danger",onConfirm:fe,onCancel:()=>Y(!1)})]}):p.jsx("div",{className:"p-6 text-center text-mid-grey",children:"Visitor not found"})}function Lo({label:t,value:n}){return p.jsxs("div",{children:[p.jsx("dt",{className:"text-xs font-medium text-mid-grey uppercase tracking-wide mb-0.5",children:t}),p.jsx("dd",{className:"text-sm text-charcoal",children:n})]})}function OE({initial:t,onSubmit:n,onCancel:a,submitLabel:r="Create Visitor",loading:l=!1,duplicate:o,onUseDuplicate:c}){const[d,h]=S.useState({name:(t==null?void 0:t.name)??"",email:(t==null?void 0:t.email)??"",phone:(t==null?void 0:t.phone)??"",company:(t==null?void 0:t.company)??"",visitor_type:(t==null?void 0:t.visitor_type)??"third_party"}),[m,y]=S.useState({});function x(k,N){h(C=>({...C,[k]:N})),y(C=>({...C,[k]:""}))}function v(){const k={};return(!d.name.trim()||d.name.trim().length<2)&&(k.name="Name must be at least 2 characters"),d.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)||(k.email="Enter a valid email"):k.email="Email is required",y(k),Object.keys(k).length===0}async function b(k){k.preventDefault(),v()&&await n(d)}return p.jsxs("form",{onSubmit:b,className:"space-y-5",children:[o&&p.jsxs("div",{className:"bg-warning-bg border border-warning rounded-lg p-4",children:[p.jsx("p",{className:"text-sm font-semibold text-warning mb-1",children:"Possible duplicate profile found"}),p.jsxs("p",{className:"text-sm text-charcoal mb-3",children:["A visitor with email ",p.jsx("strong",{children:o.email})," already exists: ",p.jsx("strong",{children:o.name}),o.company?` (${o.company})`:""]}),c&&p.jsx("button",{type:"button",onClick:()=>c(o),className:"text-sm font-semibold text-primark-blue hover:underline",children:"Use existing profile instead"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:["Full Name ",p.jsx("span",{className:"text-danger",children:"*"})]}),p.jsx("input",{type:"text",value:d.name,onChange:k=>x("name",k.target.value),className:`w-full px-3 py-2.5 border rounded-lg text-sm text-charcoal bg-white min-h-input focus:outline-none focus:ring-2 focus:ring-primark-blue ${m.name?"border-danger":"border-border-grey"}`,placeholder:"John Smith"}),m.name&&p.jsx("p",{className:"text-xs text-danger mt-1",children:m.name})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:["Email ",p.jsx("span",{className:"text-danger",children:"*"})]}),p.jsx("input",{type:"email",value:d.email,onChange:k=>x("email",k.target.value),className:`w-full px-3 py-2.5 border rounded-lg text-sm text-charcoal bg-white min-h-input focus:outline-none focus:ring-2 focus:ring-primark-blue ${m.email?"border-danger":"border-border-grey"}`,placeholder:"john@example.com"}),m.email&&p.jsx("p",{className:"text-xs text-danger mt-1",children:m.email})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:"Phone"}),p.jsx("input",{type:"tel",value:d.phone,onChange:k=>x("phone",k.target.value),className:"w-full px-3 py-2.5 border border-border-grey rounded-lg text-sm text-charcoal bg-white min-h-input focus:outline-none focus:ring-2 focus:ring-primark-blue",placeholder:"+353 85 123 4567"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:"Company / Organisation"}),p.jsx("input",{type:"text",value:d.company,onChange:k=>x("company",k.target.value),className:"w-full px-3 py-2.5 border border-border-grey rounded-lg text-sm text-charcoal bg-white min-h-input focus:outline-none focus:ring-2 focus:ring-primark-blue",placeholder:"Acme Ltd"})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-2",children:["Visitor Type ",p.jsx("span",{className:"text-danger",children:"*"})]}),p.jsx("div",{className:"flex gap-3",children:["third_party","internal_staff"].map(k=>p.jsxs("label",{className:`flex-1 flex items-center justify-center gap-2 p-3 border-2 rounded-xl cursor-pointer transition-colors text-sm font-medium ${d.visitor_type===k?"border-primark-blue bg-primark-blue-light text-primark-blue":"border-border-grey bg-white text-charcoal hover:border-primark-blue"}`,children:[p.jsx("input",{type:"radio",name:"visitor_type",value:k,checked:d.visitor_type===k,onChange:()=>x("visitor_type",k),className:"sr-only"}),k==="third_party"?"Third Party":"Internal Staff"]},k))})]}),p.jsxs("div",{className:"flex gap-3 pt-2",children:[a&&p.jsx("button",{type:"button",onClick:a,className:"flex-1 py-3 border border-border-grey rounded-xl text-charcoal font-medium text-sm hover:bg-light-grey transition-colors",children:"Cancel"}),p.jsx("button",{type:"submit",disabled:l,className:"flex-1 py-3 bg-primark-blue text-white rounded-xl font-semibold text-sm hover:bg-primark-blue-dark transition-colors disabled:opacity-50 min-h-btn-primary",children:l?"Saving...":r})]})]})}function DE(){const t=Ft(),[n]=Vf(),a=n.get("walkin")==="true",{user:r}=pt(),{createVisitor:l,checkDuplicate:o}=wa(),{log:c}=Pn(),[d,h]=S.useState(!1),[m,y]=S.useState(null),[x,v]=S.useState(!1);async function b(k){if(r){h(!0);try{if(!x){const C=await o(k.name,k.email);if(C){y(C),h(!1);return}}const N=await l({...k,phone:k.phone||void 0,company:k.company||void 0,created_by:r.id});await c("visitor_created","visitor",N.id,r.id,{name:N.name}),we.success("Visitor profile created"),t(a?`/schedule?visitor_id=${N.id}&walkin=true`:`/visitors/${N.id}`)}catch{we.error("Failed to create visitor")}finally{h(!1)}}}return p.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[p.jsx(Vn,{title:a?"Register Walk-In Visitor":"New Visitor Profile",subtitle:"Create a new visitor profile",backTo:a?"/":"/visitors"}),p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6",children:[p.jsx(OE,{onSubmit:b,onCancel:()=>t(-1),submitLabel:a?"Create & Schedule Visit":"Create Visitor",loading:d,duplicate:x?null:m,onUseDuplicate:k=>{t(a?`/schedule?visitor_id=${k.id}&walkin=true`:`/visitors/${k.id}`)}}),m&&!x&&p.jsx("div",{className:"mt-4 text-center",children:p.jsx("button",{onClick:()=>v(!0),className:"text-sm text-mid-grey hover:text-charcoal underline",children:"Create a new profile anyway"})})]})]})}function Ar(t,n){const[a,r]=S.useState([]),[l,o]=S.useState(!1),c=S.useCallback(async()=>{if(!t&&!n)return;o(!0);let y=oe.from("notifications").select("*").order("created_at",{ascending:!1}).limit(100);t?y=y.eq("recipient_user_id",t):n&&(y=y.eq("recipient_visitor_id",n));const{data:x}=await y;r(x??[]),o(!1)},[t,n]);S.useEffect(()=>{if(c(),!t&&!n)return;const y=t?`recipient_user_id=eq.${t}`:`recipient_visitor_id=eq.${n}`,x=oe.channel(`notifications:${t??n}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:y},v=>{const b=v.new;r(k=>[b,...k]),we(b.title,{icon:"",duration:5e3})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"notifications",filter:y},()=>c()).subscribe();return()=>{oe.removeChannel(x)}},[t,n,c]);const d=S.useCallback(async y=>{await oe.from("notifications").update({is_read:!0}).eq("id",y),r(x=>x.map(v=>v.id===y?{...v,is_read:!0}:v))},[]),h=S.useCallback(async y=>{await oe.from("notifications").update({acknowledged_at:new Date().toISOString(),is_read:!0}).eq("id",y),r(x=>x.map(v=>v.id===y?{...v,acknowledged_at:new Date().toISOString(),is_read:!0}:v))},[]),m=S.useCallback(async y=>{const{error:x}=await oe.from("notifications").insert(y);if(x)throw x},[]);return{notifications:a,loading:l,fetch:c,markRead:d,acknowledge:h,sendNotification:m}}function iy({label:t,value:n,onChange:a,min:r,required:l,error:o}){return p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:[t,l&&p.jsx("span",{className:"text-danger ml-1",children:"*"})]}),p.jsx("input",{type:"datetime-local",value:n,onChange:c=>a(c.target.value),min:r,required:l,className:`w-full px-3 py-2.5 border rounded-lg text-sm text-charcoal bg-white min-h-input focus:outline-none focus:ring-2 focus:ring-primark-blue focus:border-transparent ${o?"border-danger":"border-border-grey"}`}),o&&p.jsx("p",{className:"text-xs text-danger mt-1",children:o})]})}function LE(){const t=Ft(),[n]=Vf(),a=n.get("visitor_id"),r=n.get("walkin")==="true",{user:l,site:o}=pt(),{createVisit:c}=tl(),{getById:d,search:h,visitors:m}=wa(),{sendNotification:y}=Ar(),{log:x}=Pn(),[v,b]=S.useState(null),[k,N]=S.useState(""),[C,E]=S.useState([]),[L,R]=S.useState((l==null?void 0:l.id)??""),[P,W]=S.useState(""),[z,Y]=S.useState(""),[te,ae]=S.useState(""),[fe,I]=S.useState(""),[Z,de]=S.useState([]),[se,K]=S.useState(!1),[M,J]=S.useState(""),[ue,xe]=S.useState(""),[A,T]=S.useState(!1),[B,j]=S.useState({});S.useEffect(()=>{a&&d(a).then(re=>{re&&b(re)})},[a,d]),S.useEffect(()=>{o&&oe.from("users").select("id,name,username,email,site_id,role,is_active,created_at,updated_at").eq("site_id",o.id).eq("is_active",!0).order("name").then(({data:re})=>E(re??[]))},[o]);const ie=S.useCallback(re=>{N(re),re&&h(re)},[h]);function ee(){!M.trim()||!ue.trim()||(de(re=>[...re,{document_name:M.trim(),document_content:ue.trim()}]),J(""),xe(""),K(!1))}function ce(){const re={};return v||(re.visitor="Select a visitor"),z||(re.arrival="Select a planned arrival time"),te||(re.departure="Select an expected departure time"),z&&te&&te<=z&&(re.departure="Departure must be after arrival"),fe.trim()||(re.purpose="Purpose is required"),j(re),Object.keys(re).length===0}async function ke(re){if(re.preventDefault(),!(!ce()||!v||!l||!o)){T(!0);try{const tt=L||l.id,me=await c({visitor_id:v.id,site_id:o.id,host_user_id:tt,purpose:fe.trim(),planned_arrival:new Date(z).toISOString(),planned_departure:new Date(te).toISOString(),is_walk_in:r}),Ke=[{visit_id:me.id,user_id:tt,is_backup:!1}];P&&P!==tt&&Ke.push({visit_id:me.id,user_id:P,is_backup:!0}),await oe.from("visit_host_contacts").insert(Ke),Z.length>0&&await oe.from("visit_documents").insert(Z.map(Ut=>({...Ut,visit_id:me.id}))),await y({recipient_type:"visitor",recipient_visitor_id:v.id,visit_id:me.id,notification_type:"visit_scheduled",title:`Visit scheduled: ${o.name}`,body:`You have a visit scheduled for ${fe.trim()}. Please complete your H&S induction before arriving.`,action_url:`/self-service/${v.access_token}`}),await x("visit_scheduled","visit",me.id,l.id,{visitor_id:v.id,is_walk_in:r}),we.success("Visit scheduled"),t("/")}catch{we.error("Failed to schedule visit")}finally{T(!1)}}}const Ue=new Date().toISOString().slice(0,16);return p.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[p.jsx(Vn,{title:r?"Register Walk-In Visit":"Schedule Visit",subtitle:"Create a new visit for a visitor",backTo:"/"}),p.jsxs("form",{onSubmit:ke,className:"space-y-6",children:[p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[p.jsx("h2",{className:"text-base font-semibold text-navy mb-4",children:"Visitor"}),v?p.jsxs("div",{className:"flex items-center justify-between p-3 bg-primark-blue-light rounded-lg",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-sm font-semibold text-navy",children:v.name}),p.jsxs("div",{className:"text-xs text-mid-grey",children:[v.email,"  ",v.company]})]}),p.jsx("button",{type:"button",onClick:()=>b(null),className:"text-xs text-primark-blue hover:underline",children:"Change"})]}):p.jsxs("div",{children:[p.jsx(nl,{placeholder:"Search by name or email...",onSearch:ie,className:"mb-3"}),B.visitor&&p.jsx("p",{className:"text-xs text-danger mb-2",children:B.visitor}),k&&m.length>0&&p.jsx("div",{className:"border border-border-grey rounded-lg divide-y divide-border-grey max-h-48 overflow-y-auto",children:m.map(re=>p.jsxs("button",{type:"button",onClick:()=>{b(re),N("")},className:"w-full text-left px-4 py-3 hover:bg-light-grey transition-colors",children:[p.jsx("div",{className:"text-sm font-medium text-navy",children:re.name}),p.jsxs("div",{className:"text-xs text-mid-grey",children:[re.email,"  ",re.company]})]},re.id))}),k&&m.length===0&&p.jsx("button",{type:"button",onClick:()=>t(`/visitors/new?walkin=${r}`),className:"w-full text-sm text-primark-blue hover:underline text-center py-2",children:"+ Create new visitor profile"})]})]}),p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5 space-y-4",children:[p.jsx("h2",{className:"text-base font-semibold text-navy",children:"Visit Details"}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx(iy,{label:"Planned Arrival",value:z,onChange:Y,min:Ue,required:!0,error:B.arrival}),p.jsx(iy,{label:"Expected Departure",value:te,onChange:ae,min:z||Ue,required:!0,error:B.departure})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:["Purpose of Visit ",p.jsx("span",{className:"text-danger",children:"*"})]}),p.jsx("input",{type:"text",value:fe,onChange:re=>{I(re.target.value),j(tt=>({...tt,purpose:""}))},className:`w-full px-3 py-2.5 border rounded-lg text-sm text-charcoal bg-white min-h-input focus:outline-none focus:ring-2 focus:ring-primark-blue ${B.purpose?"border-danger":"border-border-grey"}`,placeholder:"e.g. Server room maintenance"}),B.purpose&&p.jsx("p",{className:"text-xs text-danger mt-1",children:B.purpose})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:"Primary Host"}),p.jsx("select",{value:L,onChange:re=>R(re.target.value),className:"w-full px-3 py-2.5 border border-border-grey rounded-lg text-sm text-charcoal bg-white min-h-input focus:outline-none focus:ring-2 focus:ring-primark-blue",children:C.map(re=>p.jsxs("option",{value:re.id,children:[re.name," (",re.role,")"]},re.id))})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:"Backup Contact (optional)"}),p.jsxs("select",{value:P,onChange:re=>W(re.target.value),className:"w-full px-3 py-2.5 border border-border-grey rounded-lg text-sm text-charcoal bg-white min-h-input focus:outline-none focus:ring-2 focus:ring-primark-blue",children:[p.jsx("option",{value:"",children:"None"}),C.filter(re=>re.id!==L).map(re=>p.jsxs("option",{value:re.id,children:[re.name," (",re.role,")"]},re.id))]})]})]})]}),p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[p.jsxs("div",{className:"flex items-center justify-between mb-4",children:[p.jsx("h2",{className:"text-base font-semibold text-navy",children:"Attached Documents"}),p.jsx("button",{type:"button",onClick:()=>K(!0),className:"text-sm text-primark-blue font-medium hover:underline",children:"+ Attach Document"})]}),Z.length===0&&!se&&p.jsx("p",{className:"text-sm text-mid-grey",children:"No documents attached. Optional  attach NDAs or legal documents."}),Z.map((re,tt)=>p.jsxs("div",{className:"flex items-center justify-between p-3 bg-light-grey rounded-lg mb-2",children:[p.jsx("span",{className:"text-sm font-medium text-navy",children:re.document_name}),p.jsx("button",{type:"button",onClick:()=>de(me=>me.filter((Ke,Ut)=>Ut!==tt)),className:"text-danger text-xs hover:underline",children:"Remove"})]},tt)),se&&p.jsxs("div",{className:"border border-border-grey rounded-xl p-4 space-y-3 mt-3",children:[p.jsx("input",{type:"text",value:M,onChange:re=>J(re.target.value),placeholder:"Document name (e.g. NDA)",className:"w-full px-3 py-2 border border-border-grey rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primark-blue"}),p.jsx("textarea",{value:ue,onChange:re=>xe(re.target.value),placeholder:"Document content (Markdown supported)",rows:6,className:"w-full px-3 py-2 border border-border-grey rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primark-blue resize-y"}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{type:"button",onClick:()=>K(!1),className:"px-4 py-2 border border-border-grey rounded-lg text-sm text-charcoal",children:"Cancel"}),p.jsx("button",{type:"button",onClick:ee,disabled:!M.trim()||!ue.trim(),className:"px-4 py-2 bg-primark-blue text-white rounded-lg text-sm font-medium hover:bg-primark-blue-dark disabled:opacity-50",children:"Add Document"})]})]})]}),p.jsx("button",{type:"submit",disabled:A,className:"w-full bg-primark-blue text-white py-4 rounded-xl font-semibold text-base hover:bg-primark-blue-dark transition-colors disabled:opacity-50 min-h-btn-primary",children:A?"Scheduling...":"Schedule Visit"})]})]})}const zE=28;function $x(){const t=S.useCallback(async(a,r)=>{const l=new Date;l.setDate(l.getDate()-zE);const{data:o}=await oe.from("induction_records").select("*").eq("visitor_id",a).eq("site_id",r.id).eq("content_version",r.hs_content_version).gte("completed_at",l.toISOString()).order("completed_at",{ascending:!1}).limit(1).maybeSingle(),c=o;return{valid:!!c,record:c}},[]),n=S.useCallback(async(a,r,l,o)=>{const{error:c}=await oe.from("induction_records").insert({visitor_id:a,site_id:r,content_version:l,visit_id:o});if(c)throw c;await oe.from("visits").update({induction_completed:!0,induction_completed_at:new Date().toISOString(),induction_version:l,updated_at:new Date().toISOString()}).eq("id",o)},[]);return{checkInductionValid:t,completeInduction:n}}function UE(t,n){const a={};return(t[t.length-1]===""?[...t,""]:t).join((a.padRight?" ":"")+","+(a.padLeft===!1?"":" ")).trim()}const ME=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,BE=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,qE={};function ay(t,n){return(qE.jsx?BE:ME).test(t)}const IE=/[ \t\n\f\r]/g;function HE(t){return typeof t=="object"?t.type==="text"?ry(t.value):!1:ry(t)}function ry(t){return t.replace(IE,"")===""}class il{constructor(n,a,r){this.normal=a,this.property=n,r&&(this.space=r)}}il.prototype.normal={};il.prototype.property={};il.prototype.space=void 0;function Vx(t,n){const a={},r={};for(const l of t)Object.assign(a,l.property),Object.assign(r,l.normal);return new il(a,r,n)}function Ef(t){return t.toLowerCase()}class Xt{constructor(n,a){this.attribute=a,this.property=n}}Xt.prototype.attribute="";Xt.prototype.booleanish=!1;Xt.prototype.boolean=!1;Xt.prototype.commaOrSpaceSeparated=!1;Xt.prototype.commaSeparated=!1;Xt.prototype.defined=!1;Xt.prototype.mustUseProperty=!1;Xt.prototype.number=!1;Xt.prototype.overloadedBoolean=!1;Xt.prototype.property="";Xt.prototype.spaceSeparated=!1;Xt.prototype.space=void 0;let $E=0;const Te=_a(),ht=_a(),jf=_a(),ne=_a(),Je=_a(),kr=_a(),ln=_a();function _a(){return 2**++$E}const Nf=Object.freeze(Object.defineProperty({__proto__:null,boolean:Te,booleanish:ht,commaOrSpaceSeparated:ln,commaSeparated:kr,number:ne,overloadedBoolean:jf,spaceSeparated:Je},Symbol.toStringTag,{value:"Module"})),Yd=Object.keys(Nf);class Jf extends Xt{constructor(n,a,r,l){let o=-1;if(super(n,a),sy(this,"space",l),typeof r=="number")for(;++o<Yd.length;){const c=Yd[o];sy(this,Yd[o],(r&Nf[c])===Nf[c])}}}Jf.prototype.defined=!0;function sy(t,n,a){a&&(t[n]=a)}function Rr(t){const n={},a={};for(const[r,l]of Object.entries(t.properties)){const o=new Jf(r,t.transform(t.attributes||{},r),l,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(o.mustUseProperty=!0),n[r]=o,a[Ef(r)]=r,a[Ef(o.attribute)]=r}return new il(n,a,t.space)}const Px=Rr({properties:{ariaActiveDescendant:null,ariaAtomic:ht,ariaAutoComplete:null,ariaBusy:ht,ariaChecked:ht,ariaColCount:ne,ariaColIndex:ne,ariaColSpan:ne,ariaControls:Je,ariaCurrent:null,ariaDescribedBy:Je,ariaDetails:null,ariaDisabled:ht,ariaDropEffect:Je,ariaErrorMessage:null,ariaExpanded:ht,ariaFlowTo:Je,ariaGrabbed:ht,ariaHasPopup:null,ariaHidden:ht,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Je,ariaLevel:ne,ariaLive:null,ariaModal:ht,ariaMultiLine:ht,ariaMultiSelectable:ht,ariaOrientation:null,ariaOwns:Je,ariaPlaceholder:null,ariaPosInSet:ne,ariaPressed:ht,ariaReadOnly:ht,ariaRelevant:null,ariaRequired:ht,ariaRoleDescription:Je,ariaRowCount:ne,ariaRowIndex:ne,ariaRowSpan:ne,ariaSelected:ht,ariaSetSize:ne,ariaSort:null,ariaValueMax:ne,ariaValueMin:ne,ariaValueNow:ne,ariaValueText:null,role:null},transform(t,n){return n==="role"?n:"aria-"+n.slice(4).toLowerCase()}});function Gx(t,n){return n in t?t[n]:n}function Yx(t,n){return Gx(t,n.toLowerCase())}const VE=Rr({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:kr,acceptCharset:Je,accessKey:Je,action:null,allow:null,allowFullScreen:Te,allowPaymentRequest:Te,allowUserMedia:Te,alt:null,as:null,async:Te,autoCapitalize:null,autoComplete:Je,autoFocus:Te,autoPlay:Te,blocking:Je,capture:null,charSet:null,checked:Te,cite:null,className:Je,cols:ne,colSpan:null,content:null,contentEditable:ht,controls:Te,controlsList:Je,coords:ne|kr,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Te,defer:Te,dir:null,dirName:null,disabled:Te,download:jf,draggable:ht,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Te,formTarget:null,headers:Je,height:ne,hidden:jf,high:ne,href:null,hrefLang:null,htmlFor:Je,httpEquiv:Je,id:null,imageSizes:null,imageSrcSet:null,inert:Te,inputMode:null,integrity:null,is:null,isMap:Te,itemId:null,itemProp:Je,itemRef:Je,itemScope:Te,itemType:Je,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Te,low:ne,manifest:null,max:null,maxLength:ne,media:null,method:null,min:null,minLength:ne,multiple:Te,muted:Te,name:null,nonce:null,noModule:Te,noValidate:Te,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Te,optimum:ne,pattern:null,ping:Je,placeholder:null,playsInline:Te,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Te,referrerPolicy:null,rel:Je,required:Te,reversed:Te,rows:ne,rowSpan:ne,sandbox:Je,scope:null,scoped:Te,seamless:Te,selected:Te,shadowRootClonable:Te,shadowRootDelegatesFocus:Te,shadowRootMode:null,shape:null,size:ne,sizes:null,slot:null,span:ne,spellCheck:ht,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ne,step:null,style:null,tabIndex:ne,target:null,title:null,translate:null,type:null,typeMustMatch:Te,useMap:null,value:ht,width:ne,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Je,axis:null,background:null,bgColor:null,border:ne,borderColor:null,bottomMargin:ne,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Te,declare:Te,event:null,face:null,frame:null,frameBorder:null,hSpace:ne,leftMargin:ne,link:null,longDesc:null,lowSrc:null,marginHeight:ne,marginWidth:ne,noResize:Te,noHref:Te,noShade:Te,noWrap:Te,object:null,profile:null,prompt:null,rev:null,rightMargin:ne,rules:null,scheme:null,scrolling:ht,standby:null,summary:null,text:null,topMargin:ne,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ne,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Te,disableRemotePlayback:Te,prefix:null,property:null,results:ne,security:null,unselectable:null},space:"html",transform:Yx}),PE=Rr({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:ln,accentHeight:ne,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ne,amplitude:ne,arabicForm:null,ascent:ne,attributeName:null,attributeType:null,azimuth:ne,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ne,by:null,calcMode:null,capHeight:ne,className:Je,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ne,diffuseConstant:ne,direction:null,display:null,dur:null,divisor:ne,dominantBaseline:null,download:Te,dx:null,dy:null,edgeMode:null,editable:null,elevation:ne,enableBackground:null,end:null,event:null,exponent:ne,externalResourcesRequired:null,fill:null,fillOpacity:ne,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:kr,g2:kr,glyphName:kr,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ne,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ne,horizOriginX:ne,horizOriginY:ne,id:null,ideographic:ne,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ne,k:ne,k1:ne,k2:ne,k3:ne,k4:ne,kernelMatrix:ln,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ne,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ne,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ne,overlineThickness:ne,paintOrder:null,panose1:null,path:null,pathLength:ne,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Je,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ne,pointsAtY:ne,pointsAtZ:ne,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ln,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ln,rev:ln,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ln,requiredFeatures:ln,requiredFonts:ln,requiredFormats:ln,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ne,specularExponent:ne,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ne,strikethroughThickness:ne,string:null,stroke:null,strokeDashArray:ln,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ne,strokeOpacity:ne,strokeWidth:null,style:null,surfaceScale:ne,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ln,tabIndex:ne,tableValues:null,target:null,targetX:ne,targetY:ne,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ln,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ne,underlineThickness:ne,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ne,values:null,vAlphabetic:ne,vMathematical:ne,vectorEffect:null,vHanging:ne,vIdeographic:ne,version:null,vertAdvY:ne,vertOriginX:ne,vertOriginY:ne,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ne,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Gx}),Kx=Rr({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,n){return"xlink:"+n.slice(5).toLowerCase()}}),Fx=Rr({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Yx}),Xx=Rr({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,n){return"xml:"+n.slice(3).toLowerCase()}}),GE={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},YE=/[A-Z]/g,ly=/-[a-z]/g,KE=/^data[-\w.:]+$/i;function FE(t,n){const a=Ef(n);let r=n,l=Xt;if(a in t.normal)return t.property[t.normal[a]];if(a.length>4&&a.slice(0,4)==="data"&&KE.test(n)){if(n.charAt(4)==="-"){const o=n.slice(5).replace(ly,QE);r="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{const o=n.slice(4);if(!ly.test(o)){let c=o.replace(YE,XE);c.charAt(0)!=="-"&&(c="-"+c),n="data"+c}}l=Jf}return new l(r,n)}function XE(t){return"-"+t.toLowerCase()}function QE(t){return t.charAt(1).toUpperCase()}const JE=Vx([Px,VE,Kx,Fx,Xx],"html"),Zf=Vx([Px,PE,Kx,Fx,Xx],"svg");function ZE(t){return t.join(" ").trim()}var pr={},Kd,oy;function WE(){if(oy)return Kd;oy=1;var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,a=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,l=/^:\s*/,o=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,c=/^[;\s]*/,d=/^\s+|\s+$/g,h=`
`,m="/",y="*",x="",v="comment",b="declaration";function k(C,E){if(typeof C!="string")throw new TypeError("First argument must be a string");if(!C)return[];E=E||{};var L=1,R=1;function P(se){var K=se.match(n);K&&(L+=K.length);var M=se.lastIndexOf(h);R=~M?se.length-M:R+se.length}function W(){var se={line:L,column:R};return function(K){return K.position=new z(se),ae(),K}}function z(se){this.start=se,this.end={line:L,column:R},this.source=E.source}z.prototype.content=C;function Y(se){var K=new Error(E.source+":"+L+":"+R+": "+se);if(K.reason=se,K.filename=E.source,K.line=L,K.column=R,K.source=C,!E.silent)throw K}function te(se){var K=se.exec(C);if(K){var M=K[0];return P(M),C=C.slice(M.length),K}}function ae(){te(a)}function fe(se){var K;for(se=se||[];K=I();)K!==!1&&se.push(K);return se}function I(){var se=W();if(!(m!=C.charAt(0)||y!=C.charAt(1))){for(var K=2;x!=C.charAt(K)&&(y!=C.charAt(K)||m!=C.charAt(K+1));)++K;if(K+=2,x===C.charAt(K-1))return Y("End of comment missing");var M=C.slice(2,K-2);return R+=2,P(M),C=C.slice(K),R+=2,se({type:v,comment:M})}}function Z(){var se=W(),K=te(r);if(K){if(I(),!te(l))return Y("property missing ':'");var M=te(o),J=se({type:b,property:N(K[0].replace(t,x)),value:M?N(M[0].replace(t,x)):x});return te(c),J}}function de(){var se=[];fe(se);for(var K;K=Z();)K!==!1&&(se.push(K),fe(se));return se}return ae(),de()}function N(C){return C?C.replace(d,x):x}return Kd=k,Kd}var uy;function ej(){if(uy)return pr;uy=1;var t=pr&&pr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pr,"__esModule",{value:!0}),pr.default=a;const n=t(WE());function a(r,l){let o=null;if(!r||typeof r!="string")return o;const c=(0,n.default)(r),d=typeof l=="function";return c.forEach(h=>{if(h.type!=="declaration")return;const{property:m,value:y}=h;d?l(m,y,h):y&&(o=o||{},o[m]=y)}),o}return pr}var Ts={},cy;function tj(){if(cy)return Ts;cy=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.camelCase=void 0;var t=/^--[a-zA-Z0-9_-]+$/,n=/-([a-z])/g,a=/^[^-]+$/,r=/^-(webkit|moz|ms|o|khtml)-/,l=/^-(ms)-/,o=function(m){return!m||a.test(m)||t.test(m)},c=function(m,y){return y.toUpperCase()},d=function(m,y){return"".concat(y,"-")},h=function(m,y){return y===void 0&&(y={}),o(m)?m:(m=m.toLowerCase(),y.reactCompat?m=m.replace(l,d):m=m.replace(r,d),m.replace(n,c))};return Ts.camelCase=h,Ts}var As,dy;function nj(){if(dy)return As;dy=1;var t=As&&As.__importDefault||function(l){return l&&l.__esModule?l:{default:l}},n=t(ej()),a=tj();function r(l,o){var c={};return!l||typeof l!="string"||(0,n.default)(l,function(d,h){d&&h&&(c[(0,a.camelCase)(d,o)]=h)}),c}return r.default=r,As=r,As}var ij=nj();const aj=Py(ij),Qx=Jx("end"),Wf=Jx("start");function Jx(t){return n;function n(a){const r=a&&a.position&&a.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function rj(t){const n=Wf(t),a=Qx(t);if(n&&a)return{start:n,end:a}}function Ms(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?fy(t.position):"start"in t||"end"in t?fy(t):"line"in t||"column"in t?Cf(t):""}function Cf(t){return hy(t&&t.line)+":"+hy(t&&t.column)}function fy(t){return Cf(t&&t.start)+"-"+Cf(t&&t.end)}function hy(t){return t&&typeof t=="number"?t:1}class Ot extends Error{constructor(n,a,r){super(),typeof a=="string"&&(r=a,a=void 0);let l="",o={},c=!1;if(a&&("line"in a&&"column"in a?o={place:a}:"start"in a&&"end"in a?o={place:a}:"type"in a?o={ancestors:[a],place:a.position}:o={...a}),typeof n=="string"?l=n:!o.cause&&n&&(c=!0,l=n.message,o.cause=n),!o.ruleId&&!o.source&&typeof r=="string"){const h=r.indexOf(":");h===-1?o.ruleId=r:(o.source=r.slice(0,h),o.ruleId=r.slice(h+1))}if(!o.place&&o.ancestors&&o.ancestors){const h=o.ancestors[o.ancestors.length-1];h&&(o.place=h.position)}const d=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=d?d.column:void 0,this.fatal=void 0,this.file="",this.message=l,this.line=d?d.line:void 0,this.name=Ms(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=c&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ot.prototype.file="";Ot.prototype.name="";Ot.prototype.reason="";Ot.prototype.message="";Ot.prototype.stack="";Ot.prototype.column=void 0;Ot.prototype.line=void 0;Ot.prototype.ancestors=void 0;Ot.prototype.cause=void 0;Ot.prototype.fatal=void 0;Ot.prototype.place=void 0;Ot.prototype.ruleId=void 0;Ot.prototype.source=void 0;const eh={}.hasOwnProperty,sj=new Map,lj=/[A-Z]/g,oj=new Set(["table","tbody","thead","tfoot","tr"]),uj=new Set(["td","th"]),Zx="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function cj(t,n){if(!n||n.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const a=n.filePath||void 0;let r;if(n.development){if(typeof n.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=xj(a,n.jsxDEV)}else{if(typeof n.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof n.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=yj(a,n.jsx,n.jsxs)}const l={Fragment:n.Fragment,ancestors:[],components:n.components||{},create:r,elementAttributeNameCase:n.elementAttributeNameCase||"react",evaluater:n.createEvaluater?n.createEvaluater():void 0,filePath:a,ignoreInvalidStyle:n.ignoreInvalidStyle||!1,passKeys:n.passKeys!==!1,passNode:n.passNode||!1,schema:n.space==="svg"?Zf:JE,stylePropertyNameCase:n.stylePropertyNameCase||"dom",tableCellAlignToStyle:n.tableCellAlignToStyle!==!1},o=Wx(l,t,void 0);return o&&typeof o!="string"?o:l.create(t,l.Fragment,{children:o||void 0},void 0)}function Wx(t,n,a){if(n.type==="element")return dj(t,n,a);if(n.type==="mdxFlowExpression"||n.type==="mdxTextExpression")return fj(t,n);if(n.type==="mdxJsxFlowElement"||n.type==="mdxJsxTextElement")return mj(t,n,a);if(n.type==="mdxjsEsm")return hj(t,n);if(n.type==="root")return pj(t,n,a);if(n.type==="text")return gj(t,n)}function dj(t,n,a){const r=t.schema;let l=r;n.tagName.toLowerCase()==="svg"&&r.space==="html"&&(l=Zf,t.schema=l),t.ancestors.push(n);const o=tb(t,n.tagName,!1),c=bj(t,n);let d=nh(t,n);return oj.has(n.tagName)&&(d=d.filter(function(h){return typeof h=="string"?!HE(h):!0})),eb(t,c,o,n),th(c,d),t.ancestors.pop(),t.schema=r,t.create(n,o,c,a)}function fj(t,n){if(n.data&&n.data.estree&&t.evaluater){const r=n.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}Qs(t,n.position)}function hj(t,n){if(n.data&&n.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(n.data.estree);Qs(t,n.position)}function mj(t,n,a){const r=t.schema;let l=r;n.name==="svg"&&r.space==="html"&&(l=Zf,t.schema=l),t.ancestors.push(n);const o=n.name===null?t.Fragment:tb(t,n.name,!0),c=vj(t,n),d=nh(t,n);return eb(t,c,o,n),th(c,d),t.ancestors.pop(),t.schema=r,t.create(n,o,c,a)}function pj(t,n,a){const r={};return th(r,nh(t,n)),t.create(n,t.Fragment,r,a)}function gj(t,n){return n.value}function eb(t,n,a,r){typeof a!="string"&&a!==t.Fragment&&t.passNode&&(n.node=r)}function th(t,n){if(n.length>0){const a=n.length>1?n:n[0];a&&(t.children=a)}}function yj(t,n,a){return r;function r(l,o,c,d){const m=Array.isArray(c.children)?a:n;return d?m(o,c,d):m(o,c)}}function xj(t,n){return a;function a(r,l,o,c){const d=Array.isArray(o.children),h=Wf(r);return n(l,o,c,d,{columnNumber:h?h.column-1:void 0,fileName:t,lineNumber:h?h.line:void 0},void 0)}}function bj(t,n){const a={};let r,l;for(l in n.properties)if(l!=="children"&&eh.call(n.properties,l)){const o=wj(t,l,n.properties[l]);if(o){const[c,d]=o;t.tableCellAlignToStyle&&c==="align"&&typeof d=="string"&&uj.has(n.tagName)?r=d:a[c]=d}}if(r){const o=a.style||(a.style={});o[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return a}function vj(t,n){const a={};for(const r of n.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const o=r.data.estree.body[0];o.type;const c=o.expression;c.type;const d=c.properties[0];d.type,Object.assign(a,t.evaluater.evaluateExpression(d.argument))}else Qs(t,n.position);else{const l=r.name;let o;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const d=r.value.data.estree.body[0];d.type,o=t.evaluater.evaluateExpression(d.expression)}else Qs(t,n.position);else o=r.value===null?!0:r.value;a[l]=o}return a}function nh(t,n){const a=[];let r=-1;const l=t.passKeys?new Map:sj;for(;++r<n.children.length;){const o=n.children[r];let c;if(t.passKeys){const h=o.type==="element"?o.tagName:o.type==="mdxJsxFlowElement"||o.type==="mdxJsxTextElement"?o.name:void 0;if(h){const m=l.get(h)||0;c=h+"-"+m,l.set(h,m+1)}}const d=Wx(t,o,c);d!==void 0&&a.push(d)}return a}function wj(t,n,a){const r=FE(t.schema,n);if(!(a==null||typeof a=="number"&&Number.isNaN(a))){if(Array.isArray(a)&&(a=r.commaSeparated?UE(a):ZE(a)),r.property==="style"){let l=typeof a=="object"?a:_j(t,String(a));return t.stylePropertyNameCase==="css"&&(l=Sj(l)),["style",l]}return[t.elementAttributeNameCase==="react"&&r.space?GE[r.property]||r.property:r.attribute,a]}}function _j(t,n){try{return aj(n,{reactCompat:!0})}catch(a){if(t.ignoreInvalidStyle)return{};const r=a,l=new Ot("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw l.file=t.filePath||void 0,l.url=Zx+"#cannot-parse-style-attribute",l}}function tb(t,n,a){let r;if(!a)r={type:"Literal",value:n};else if(n.includes(".")){const l=n.split(".");let o=-1,c;for(;++o<l.length;){const d=ay(l[o])?{type:"Identifier",name:l[o]}:{type:"Literal",value:l[o]};c=c?{type:"MemberExpression",object:c,property:d,computed:!!(o&&d.type==="Literal"),optional:!1}:d}r=c}else r=ay(n)&&!/^[a-z]/.test(n)?{type:"Identifier",name:n}:{type:"Literal",value:n};if(r.type==="Literal"){const l=r.value;return eh.call(t.components,l)?t.components[l]:l}if(t.evaluater)return t.evaluater.evaluateExpression(r);Qs(t)}function Qs(t,n){const a=new Ot("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:n,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw a.file=t.filePath||void 0,a.url=Zx+"#cannot-handle-mdx-estrees-without-createevaluater",a}function Sj(t){const n={};let a;for(a in t)eh.call(t,a)&&(n[kj(a)]=t[a]);return n}function kj(t){let n=t.replace(lj,Ej);return n.slice(0,3)==="ms-"&&(n="-"+n),n}function Ej(t){return"-"+t.toLowerCase()}const Fd={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},jj={};function Nj(t,n){const a=jj,r=typeof a.includeImageAlt=="boolean"?a.includeImageAlt:!0,l=typeof a.includeHtml=="boolean"?a.includeHtml:!0;return nb(t,r,l)}function nb(t,n,a){if(Cj(t)){if("value"in t)return t.type==="html"&&!a?"":t.value;if(n&&"alt"in t&&t.alt)return t.alt;if("children"in t)return my(t.children,n,a)}return Array.isArray(t)?my(t,n,a):""}function my(t,n,a){const r=[];let l=-1;for(;++l<t.length;)r[l]=nb(t[l],n,a);return r.join("")}function Cj(t){return!!(t&&typeof t=="object")}const py=document.createElement("i");function ih(t){const n="&"+t+";";py.innerHTML=n;const a=py.textContent;return a.charCodeAt(a.length-1)===59&&t!=="semi"||a===n?!1:a}function $n(t,n,a,r){const l=t.length;let o=0,c;if(n<0?n=-n>l?0:l+n:n=n>l?l:n,a=a>0?a:0,r.length<1e4)c=Array.from(r),c.unshift(n,a),t.splice(...c);else for(a&&t.splice(n,a);o<r.length;)c=r.slice(o,o+1e4),c.unshift(n,0),t.splice(...c),o+=1e4,n+=1e4}function wn(t,n){return t.length>0?($n(t,t.length,0,n),t):n}const gy={}.hasOwnProperty;function Tj(t){const n={};let a=-1;for(;++a<t.length;)Aj(n,t[a]);return n}function Aj(t,n){let a;for(a in n){const l=(gy.call(t,a)?t[a]:void 0)||(t[a]={}),o=n[a];let c;if(o)for(c in o){gy.call(l,c)||(l[c]=[]);const d=o[c];Rj(l[c],Array.isArray(d)?d:d?[d]:[])}}}function Rj(t,n){let a=-1;const r=[];for(;++a<n.length;)(n[a].add==="after"?t:r).push(n[a]);$n(t,0,0,r)}function ib(t,n){const a=Number.parseInt(t,n);return a<9||a===11||a>13&&a<32||a>126&&a<160||a>55295&&a<57344||a>64975&&a<65008||(a&65535)===65535||(a&65535)===65534||a>1114111?"":String.fromCodePoint(a)}function Er(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Bn=Fi(/[A-Za-z]/),un=Fi(/[\dA-Za-z]/),Oj=Fi(/[#-'*+\--9=?A-Z^-~]/);function Tf(t){return t!==null&&(t<32||t===127)}const Af=Fi(/\d/),Dj=Fi(/[\dA-Fa-f]/),Lj=Fi(/[!-/:-@[-`{-~]/);function Ee(t){return t!==null&&t<-2}function Kt(t){return t!==null&&(t<0||t===32)}function Ie(t){return t===-2||t===-1||t===32}const zj=Fi(new RegExp("\\p{P}|\\p{S}","u")),Uj=Fi(/\s/);function Fi(t){return n;function n(a){return a!==null&&a>-1&&t.test(String.fromCharCode(a))}}function Or(t){const n=[];let a=-1,r=0,l=0;for(;++a<t.length;){const o=t.charCodeAt(a);let c="";if(o===37&&un(t.charCodeAt(a+1))&&un(t.charCodeAt(a+2)))l=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(c=String.fromCharCode(o));else if(o>55295&&o<57344){const d=t.charCodeAt(a+1);o<56320&&d>56319&&d<57344?(c=String.fromCharCode(o,d),l=1):c=""}else c=String.fromCharCode(o);c&&(n.push(t.slice(r,a),encodeURIComponent(c)),r=a+l+1,c=""),l&&(a+=l,l=0)}return n.join("")+t.slice(r)}function Ze(t,n,a,r){const l=r?r-1:Number.POSITIVE_INFINITY;let o=0;return c;function c(h){return Ie(h)?(t.enter(a),d(h)):n(h)}function d(h){return Ie(h)&&o++<l?(t.consume(h),d):(t.exit(a),n(h))}}const Mj={tokenize:Bj};function Bj(t){const n=t.attempt(this.parser.constructs.contentInitial,r,l);let a;return n;function r(d){if(d===null){t.consume(d);return}return t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),Ze(t,n,"linePrefix")}function l(d){return t.enter("paragraph"),o(d)}function o(d){const h=t.enter("chunkText",{contentType:"text",previous:a});return a&&(a.next=h),a=h,c(d)}function c(d){if(d===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(d);return}return Ee(d)?(t.consume(d),t.exit("chunkText"),o):(t.consume(d),c)}}const qj={tokenize:Ij},yy={tokenize:Hj};function Ij(t){const n=this,a=[];let r=0,l,o,c;return d;function d(R){if(r<a.length){const P=a[r];return n.containerState=P[1],t.attempt(P[0].continuation,h,m)(R)}return m(R)}function h(R){if(r++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,l&&L();const P=n.events.length;let W=P,z;for(;W--;)if(n.events[W][0]==="exit"&&n.events[W][1].type==="chunkFlow"){z=n.events[W][1].end;break}E(r);let Y=P;for(;Y<n.events.length;)n.events[Y][1].end={...z},Y++;return $n(n.events,W+1,0,n.events.slice(P)),n.events.length=Y,m(R)}return d(R)}function m(R){if(r===a.length){if(!l)return v(R);if(l.currentConstruct&&l.currentConstruct.concrete)return k(R);n.interrupt=!!(l.currentConstruct&&!l._gfmTableDynamicInterruptHack)}return n.containerState={},t.check(yy,y,x)(R)}function y(R){return l&&L(),E(r),v(R)}function x(R){return n.parser.lazy[n.now().line]=r!==a.length,c=n.now().offset,k(R)}function v(R){return n.containerState={},t.attempt(yy,b,k)(R)}function b(R){return r++,a.push([n.currentConstruct,n.containerState]),v(R)}function k(R){if(R===null){l&&L(),E(0),t.consume(R);return}return l=l||n.parser.flow(n.now()),t.enter("chunkFlow",{_tokenizer:l,contentType:"flow",previous:o}),N(R)}function N(R){if(R===null){C(t.exit("chunkFlow"),!0),E(0),t.consume(R);return}return Ee(R)?(t.consume(R),C(t.exit("chunkFlow")),r=0,n.interrupt=void 0,d):(t.consume(R),N)}function C(R,P){const W=n.sliceStream(R);if(P&&W.push(null),R.previous=o,o&&(o.next=R),o=R,l.defineSkip(R.start),l.write(W),n.parser.lazy[R.start.line]){let z=l.events.length;for(;z--;)if(l.events[z][1].start.offset<c&&(!l.events[z][1].end||l.events[z][1].end.offset>c))return;const Y=n.events.length;let te=Y,ae,fe;for(;te--;)if(n.events[te][0]==="exit"&&n.events[te][1].type==="chunkFlow"){if(ae){fe=n.events[te][1].end;break}ae=!0}for(E(r),z=Y;z<n.events.length;)n.events[z][1].end={...fe},z++;$n(n.events,te+1,0,n.events.slice(Y)),n.events.length=z}}function E(R){let P=a.length;for(;P-- >R;){const W=a[P];n.containerState=W[1],W[0].exit.call(n,t)}a.length=R}function L(){l.write([null]),o=void 0,l=void 0,n.containerState._closeFlow=void 0}}function Hj(t,n,a){return Ze(t,t.attempt(this.parser.constructs.document,n,a),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function xy(t){if(t===null||Kt(t)||Uj(t))return 1;if(zj(t))return 2}function ah(t,n,a){const r=[];let l=-1;for(;++l<t.length;){const o=t[l].resolveAll;o&&!r.includes(o)&&(n=o(n,a),r.push(o))}return n}const Rf={name:"attention",resolveAll:$j,tokenize:Vj};function $j(t,n){let a=-1,r,l,o,c,d,h,m,y;for(;++a<t.length;)if(t[a][0]==="enter"&&t[a][1].type==="attentionSequence"&&t[a][1]._close){for(r=a;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&n.sliceSerialize(t[r][1]).charCodeAt(0)===n.sliceSerialize(t[a][1]).charCodeAt(0)){if((t[r][1]._close||t[a][1]._open)&&(t[a][1].end.offset-t[a][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[a][1].end.offset-t[a][1].start.offset)%3))continue;h=t[r][1].end.offset-t[r][1].start.offset>1&&t[a][1].end.offset-t[a][1].start.offset>1?2:1;const x={...t[r][1].end},v={...t[a][1].start};by(x,-h),by(v,h),c={type:h>1?"strongSequence":"emphasisSequence",start:x,end:{...t[r][1].end}},d={type:h>1?"strongSequence":"emphasisSequence",start:{...t[a][1].start},end:v},o={type:h>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[a][1].start}},l={type:h>1?"strong":"emphasis",start:{...c.start},end:{...d.end}},t[r][1].end={...c.start},t[a][1].start={...d.end},m=[],t[r][1].end.offset-t[r][1].start.offset&&(m=wn(m,[["enter",t[r][1],n],["exit",t[r][1],n]])),m=wn(m,[["enter",l,n],["enter",c,n],["exit",c,n],["enter",o,n]]),m=wn(m,ah(n.parser.constructs.insideSpan.null,t.slice(r+1,a),n)),m=wn(m,[["exit",o,n],["enter",d,n],["exit",d,n],["exit",l,n]]),t[a][1].end.offset-t[a][1].start.offset?(y=2,m=wn(m,[["enter",t[a][1],n],["exit",t[a][1],n]])):y=0,$n(t,r-1,a-r+3,m),a=r+m.length-y-2;break}}for(a=-1;++a<t.length;)t[a][1].type==="attentionSequence"&&(t[a][1].type="data");return t}function Vj(t,n){const a=this.parser.constructs.attentionMarkers.null,r=this.previous,l=xy(r);let o;return c;function c(h){return o=h,t.enter("attentionSequence"),d(h)}function d(h){if(h===o)return t.consume(h),d;const m=t.exit("attentionSequence"),y=xy(h),x=!y||y===2&&l||a.includes(h),v=!l||l===2&&y||a.includes(r);return m._open=!!(o===42?x:x&&(l||!v)),m._close=!!(o===42?v:v&&(y||!x)),n(h)}}function by(t,n){t.column+=n,t.offset+=n,t._bufferIndex+=n}const Pj={name:"autolink",tokenize:Gj};function Gj(t,n,a){let r=0;return l;function l(b){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(b),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),o}function o(b){return Bn(b)?(t.consume(b),c):b===64?a(b):m(b)}function c(b){return b===43||b===45||b===46||un(b)?(r=1,d(b)):m(b)}function d(b){return b===58?(t.consume(b),r=0,h):(b===43||b===45||b===46||un(b))&&r++<32?(t.consume(b),d):(r=0,m(b))}function h(b){return b===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(b),t.exit("autolinkMarker"),t.exit("autolink"),n):b===null||b===32||b===60||Tf(b)?a(b):(t.consume(b),h)}function m(b){return b===64?(t.consume(b),y):Oj(b)?(t.consume(b),m):a(b)}function y(b){return un(b)?x(b):a(b)}function x(b){return b===46?(t.consume(b),r=0,y):b===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(b),t.exit("autolinkMarker"),t.exit("autolink"),n):v(b)}function v(b){if((b===45||un(b))&&r++<63){const k=b===45?v:x;return t.consume(b),k}return a(b)}}const cu={partial:!0,tokenize:Yj};function Yj(t,n,a){return r;function r(o){return Ie(o)?Ze(t,l,"linePrefix")(o):l(o)}function l(o){return o===null||Ee(o)?n(o):a(o)}}const ab={continuation:{tokenize:Fj},exit:Xj,name:"blockQuote",tokenize:Kj};function Kj(t,n,a){const r=this;return l;function l(c){if(c===62){const d=r.containerState;return d.open||(t.enter("blockQuote",{_container:!0}),d.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(c),t.exit("blockQuoteMarker"),o}return a(c)}function o(c){return Ie(c)?(t.enter("blockQuotePrefixWhitespace"),t.consume(c),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),n):(t.exit("blockQuotePrefix"),n(c))}}function Fj(t,n,a){const r=this;return l;function l(c){return Ie(c)?Ze(t,o,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c):o(c)}function o(c){return t.attempt(ab,n,a)(c)}}function Xj(t){t.exit("blockQuote")}const rb={name:"characterEscape",tokenize:Qj};function Qj(t,n,a){return r;function r(o){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(o),t.exit("escapeMarker"),l}function l(o){return Lj(o)?(t.enter("characterEscapeValue"),t.consume(o),t.exit("characterEscapeValue"),t.exit("characterEscape"),n):a(o)}}const sb={name:"characterReference",tokenize:Jj};function Jj(t,n,a){const r=this;let l=0,o,c;return d;function d(x){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(x),t.exit("characterReferenceMarker"),h}function h(x){return x===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(x),t.exit("characterReferenceMarkerNumeric"),m):(t.enter("characterReferenceValue"),o=31,c=un,y(x))}function m(x){return x===88||x===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(x),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),o=6,c=Dj,y):(t.enter("characterReferenceValue"),o=7,c=Af,y(x))}function y(x){if(x===59&&l){const v=t.exit("characterReferenceValue");return c===un&&!ih(r.sliceSerialize(v))?a(x):(t.enter("characterReferenceMarker"),t.consume(x),t.exit("characterReferenceMarker"),t.exit("characterReference"),n)}return c(x)&&l++<o?(t.consume(x),y):a(x)}}const vy={partial:!0,tokenize:Wj},wy={concrete:!0,name:"codeFenced",tokenize:Zj};function Zj(t,n,a){const r=this,l={partial:!0,tokenize:W};let o=0,c=0,d;return h;function h(z){return m(z)}function m(z){const Y=r.events[r.events.length-1];return o=Y&&Y[1].type==="linePrefix"?Y[2].sliceSerialize(Y[1],!0).length:0,d=z,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),y(z)}function y(z){return z===d?(c++,t.consume(z),y):c<3?a(z):(t.exit("codeFencedFenceSequence"),Ie(z)?Ze(t,x,"whitespace")(z):x(z))}function x(z){return z===null||Ee(z)?(t.exit("codeFencedFence"),r.interrupt?n(z):t.check(vy,N,P)(z)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),v(z))}function v(z){return z===null||Ee(z)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),x(z)):Ie(z)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Ze(t,b,"whitespace")(z)):z===96&&z===d?a(z):(t.consume(z),v)}function b(z){return z===null||Ee(z)?x(z):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),k(z))}function k(z){return z===null||Ee(z)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),x(z)):z===96&&z===d?a(z):(t.consume(z),k)}function N(z){return t.attempt(l,P,C)(z)}function C(z){return t.enter("lineEnding"),t.consume(z),t.exit("lineEnding"),E}function E(z){return o>0&&Ie(z)?Ze(t,L,"linePrefix",o+1)(z):L(z)}function L(z){return z===null||Ee(z)?t.check(vy,N,P)(z):(t.enter("codeFlowValue"),R(z))}function R(z){return z===null||Ee(z)?(t.exit("codeFlowValue"),L(z)):(t.consume(z),R)}function P(z){return t.exit("codeFenced"),n(z)}function W(z,Y,te){let ae=0;return fe;function fe(K){return z.enter("lineEnding"),z.consume(K),z.exit("lineEnding"),I}function I(K){return z.enter("codeFencedFence"),Ie(K)?Ze(z,Z,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(K):Z(K)}function Z(K){return K===d?(z.enter("codeFencedFenceSequence"),de(K)):te(K)}function de(K){return K===d?(ae++,z.consume(K),de):ae>=c?(z.exit("codeFencedFenceSequence"),Ie(K)?Ze(z,se,"whitespace")(K):se(K)):te(K)}function se(K){return K===null||Ee(K)?(z.exit("codeFencedFence"),Y(K)):te(K)}}}function Wj(t,n,a){const r=this;return l;function l(c){return c===null?a(c):(t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),o)}function o(c){return r.parser.lazy[r.now().line]?a(c):n(c)}}const Xd={name:"codeIndented",tokenize:t3},e3={partial:!0,tokenize:n3};function t3(t,n,a){const r=this;return l;function l(m){return t.enter("codeIndented"),Ze(t,o,"linePrefix",5)(m)}function o(m){const y=r.events[r.events.length-1];return y&&y[1].type==="linePrefix"&&y[2].sliceSerialize(y[1],!0).length>=4?c(m):a(m)}function c(m){return m===null?h(m):Ee(m)?t.attempt(e3,c,h)(m):(t.enter("codeFlowValue"),d(m))}function d(m){return m===null||Ee(m)?(t.exit("codeFlowValue"),c(m)):(t.consume(m),d)}function h(m){return t.exit("codeIndented"),n(m)}}function n3(t,n,a){const r=this;return l;function l(c){return r.parser.lazy[r.now().line]?a(c):Ee(c)?(t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),l):Ze(t,o,"linePrefix",5)(c)}function o(c){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?n(c):Ee(c)?l(c):a(c)}}const i3={name:"codeText",previous:r3,resolve:a3,tokenize:s3};function a3(t){let n=t.length-4,a=3,r,l;if((t[a][1].type==="lineEnding"||t[a][1].type==="space")&&(t[n][1].type==="lineEnding"||t[n][1].type==="space")){for(r=a;++r<n;)if(t[r][1].type==="codeTextData"){t[a][1].type="codeTextPadding",t[n][1].type="codeTextPadding",a+=2,n-=2;break}}for(r=a-1,n++;++r<=n;)l===void 0?r!==n&&t[r][1].type!=="lineEnding"&&(l=r):(r===n||t[r][1].type==="lineEnding")&&(t[l][1].type="codeTextData",r!==l+2&&(t[l][1].end=t[r-1][1].end,t.splice(l+2,r-l-2),n-=r-l-2,r=l+2),l=void 0);return t}function r3(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function s3(t,n,a){let r=0,l,o;return c;function c(x){return t.enter("codeText"),t.enter("codeTextSequence"),d(x)}function d(x){return x===96?(t.consume(x),r++,d):(t.exit("codeTextSequence"),h(x))}function h(x){return x===null?a(x):x===32?(t.enter("space"),t.consume(x),t.exit("space"),h):x===96?(o=t.enter("codeTextSequence"),l=0,y(x)):Ee(x)?(t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),h):(t.enter("codeTextData"),m(x))}function m(x){return x===null||x===32||x===96||Ee(x)?(t.exit("codeTextData"),h(x)):(t.consume(x),m)}function y(x){return x===96?(t.consume(x),l++,y):l===r?(t.exit("codeTextSequence"),t.exit("codeText"),n(x)):(o.type="codeTextData",m(x))}}class l3{constructor(n){this.left=n?[...n]:[],this.right=[]}get(n){if(n<0||n>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+n+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return n<this.left.length?this.left[n]:this.right[this.right.length-n+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(n,a){const r=a??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(n,r):n>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-n+this.left.length).reverse():this.left.slice(n).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(n,a,r){const l=a||0;this.setCursor(Math.trunc(n));const o=this.right.splice(this.right.length-l,Number.POSITIVE_INFINITY);return r&&Rs(this.left,r),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(n){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(n)}pushMany(n){this.setCursor(Number.POSITIVE_INFINITY),Rs(this.left,n)}unshift(n){this.setCursor(0),this.right.push(n)}unshiftMany(n){this.setCursor(0),Rs(this.right,n.reverse())}setCursor(n){if(!(n===this.left.length||n>this.left.length&&this.right.length===0||n<0&&this.left.length===0))if(n<this.left.length){const a=this.left.splice(n,Number.POSITIVE_INFINITY);Rs(this.right,a.reverse())}else{const a=this.right.splice(this.left.length+this.right.length-n,Number.POSITIVE_INFINITY);Rs(this.left,a.reverse())}}}function Rs(t,n){let a=0;if(n.length<1e4)t.push(...n);else for(;a<n.length;)t.push(...n.slice(a,a+1e4)),a+=1e4}function lb(t){const n={};let a=-1,r,l,o,c,d,h,m;const y=new l3(t);for(;++a<y.length;){for(;a in n;)a=n[a];if(r=y.get(a),a&&r[1].type==="chunkFlow"&&y.get(a-1)[1].type==="listItemPrefix"&&(h=r[1]._tokenizer.events,o=0,o<h.length&&h[o][1].type==="lineEndingBlank"&&(o+=2),o<h.length&&h[o][1].type==="content"))for(;++o<h.length&&h[o][1].type!=="content";)h[o][1].type==="chunkText"&&(h[o][1]._isInFirstContentOfListItem=!0,o++);if(r[0]==="enter")r[1].contentType&&(Object.assign(n,o3(y,a)),a=n[a],m=!0);else if(r[1]._container){for(o=a,l=void 0;o--;)if(c=y.get(o),c[1].type==="lineEnding"||c[1].type==="lineEndingBlank")c[0]==="enter"&&(l&&(y.get(l)[1].type="lineEndingBlank"),c[1].type="lineEnding",l=o);else if(!(c[1].type==="linePrefix"||c[1].type==="listItemIndent"))break;l&&(r[1].end={...y.get(l)[1].start},d=y.slice(l,a),d.unshift(r),y.splice(l,a-l+1,d))}}return $n(t,0,Number.POSITIVE_INFINITY,y.slice(0)),!m}function o3(t,n){const a=t.get(n)[1],r=t.get(n)[2];let l=n-1;const o=[];let c=a._tokenizer;c||(c=r.parser[a.contentType](a.start),a._contentTypeTextTrailing&&(c._contentTypeTextTrailing=!0));const d=c.events,h=[],m={};let y,x,v=-1,b=a,k=0,N=0;const C=[N];for(;b;){for(;t.get(++l)[1]!==b;);o.push(l),b._tokenizer||(y=r.sliceStream(b),b.next||y.push(null),x&&c.defineSkip(b.start),b._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=!0),c.write(y),b._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=void 0)),x=b,b=b.next}for(b=a;++v<d.length;)d[v][0]==="exit"&&d[v-1][0]==="enter"&&d[v][1].type===d[v-1][1].type&&d[v][1].start.line!==d[v][1].end.line&&(N=v+1,C.push(N),b._tokenizer=void 0,b.previous=void 0,b=b.next);for(c.events=[],b?(b._tokenizer=void 0,b.previous=void 0):C.pop(),v=C.length;v--;){const E=d.slice(C[v],C[v+1]),L=o.pop();h.push([L,L+E.length-1]),t.splice(L,2,E)}for(h.reverse(),v=-1;++v<h.length;)m[k+h[v][0]]=k+h[v][1],k+=h[v][1]-h[v][0]-1;return m}const u3={resolve:d3,tokenize:f3},c3={partial:!0,tokenize:h3};function d3(t){return lb(t),t}function f3(t,n){let a;return r;function r(d){return t.enter("content"),a=t.enter("chunkContent",{contentType:"content"}),l(d)}function l(d){return d===null?o(d):Ee(d)?t.check(c3,c,o)(d):(t.consume(d),l)}function o(d){return t.exit("chunkContent"),t.exit("content"),n(d)}function c(d){return t.consume(d),t.exit("chunkContent"),a.next=t.enter("chunkContent",{contentType:"content",previous:a}),a=a.next,l}}function h3(t,n,a){const r=this;return l;function l(c){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),Ze(t,o,"linePrefix")}function o(c){if(c===null||Ee(c))return a(c);const d=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?n(c):t.interrupt(r.parser.constructs.flow,a,n)(c)}}function ob(t,n,a,r,l,o,c,d,h){const m=h||Number.POSITIVE_INFINITY;let y=0;return x;function x(E){return E===60?(t.enter(r),t.enter(l),t.enter(o),t.consume(E),t.exit(o),v):E===null||E===32||E===41||Tf(E)?a(E):(t.enter(r),t.enter(c),t.enter(d),t.enter("chunkString",{contentType:"string"}),N(E))}function v(E){return E===62?(t.enter(o),t.consume(E),t.exit(o),t.exit(l),t.exit(r),n):(t.enter(d),t.enter("chunkString",{contentType:"string"}),b(E))}function b(E){return E===62?(t.exit("chunkString"),t.exit(d),v(E)):E===null||E===60||Ee(E)?a(E):(t.consume(E),E===92?k:b)}function k(E){return E===60||E===62||E===92?(t.consume(E),b):b(E)}function N(E){return!y&&(E===null||E===41||Kt(E))?(t.exit("chunkString"),t.exit(d),t.exit(c),t.exit(r),n(E)):y<m&&E===40?(t.consume(E),y++,N):E===41?(t.consume(E),y--,N):E===null||E===32||E===40||Tf(E)?a(E):(t.consume(E),E===92?C:N)}function C(E){return E===40||E===41||E===92?(t.consume(E),N):N(E)}}function ub(t,n,a,r,l,o){const c=this;let d=0,h;return m;function m(b){return t.enter(r),t.enter(l),t.consume(b),t.exit(l),t.enter(o),y}function y(b){return d>999||b===null||b===91||b===93&&!h||b===94&&!d&&"_hiddenFootnoteSupport"in c.parser.constructs?a(b):b===93?(t.exit(o),t.enter(l),t.consume(b),t.exit(l),t.exit(r),n):Ee(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),y):(t.enter("chunkString",{contentType:"string"}),x(b))}function x(b){return b===null||b===91||b===93||Ee(b)||d++>999?(t.exit("chunkString"),y(b)):(t.consume(b),h||(h=!Ie(b)),b===92?v:x)}function v(b){return b===91||b===92||b===93?(t.consume(b),d++,x):x(b)}}function cb(t,n,a,r,l,o){let c;return d;function d(v){return v===34||v===39||v===40?(t.enter(r),t.enter(l),t.consume(v),t.exit(l),c=v===40?41:v,h):a(v)}function h(v){return v===c?(t.enter(l),t.consume(v),t.exit(l),t.exit(r),n):(t.enter(o),m(v))}function m(v){return v===c?(t.exit(o),h(c)):v===null?a(v):Ee(v)?(t.enter("lineEnding"),t.consume(v),t.exit("lineEnding"),Ze(t,m,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),y(v))}function y(v){return v===c||v===null||Ee(v)?(t.exit("chunkString"),m(v)):(t.consume(v),v===92?x:y)}function x(v){return v===c||v===92?(t.consume(v),y):y(v)}}function Bs(t,n){let a;return r;function r(l){return Ee(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a=!0,r):Ie(l)?Ze(t,r,a?"linePrefix":"lineSuffix")(l):n(l)}}const m3={name:"definition",tokenize:g3},p3={partial:!0,tokenize:y3};function g3(t,n,a){const r=this;let l;return o;function o(b){return t.enter("definition"),c(b)}function c(b){return ub.call(r,t,d,a,"definitionLabel","definitionLabelMarker","definitionLabelString")(b)}function d(b){return l=Er(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),b===58?(t.enter("definitionMarker"),t.consume(b),t.exit("definitionMarker"),h):a(b)}function h(b){return Kt(b)?Bs(t,m)(b):m(b)}function m(b){return ob(t,y,a,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(b)}function y(b){return t.attempt(p3,x,x)(b)}function x(b){return Ie(b)?Ze(t,v,"whitespace")(b):v(b)}function v(b){return b===null||Ee(b)?(t.exit("definition"),r.parser.defined.push(l),n(b)):a(b)}}function y3(t,n,a){return r;function r(d){return Kt(d)?Bs(t,l)(d):a(d)}function l(d){return cb(t,o,a,"definitionTitle","definitionTitleMarker","definitionTitleString")(d)}function o(d){return Ie(d)?Ze(t,c,"whitespace")(d):c(d)}function c(d){return d===null||Ee(d)?n(d):a(d)}}const x3={name:"hardBreakEscape",tokenize:b3};function b3(t,n,a){return r;function r(o){return t.enter("hardBreakEscape"),t.consume(o),l}function l(o){return Ee(o)?(t.exit("hardBreakEscape"),n(o)):a(o)}}const v3={name:"headingAtx",resolve:w3,tokenize:_3};function w3(t,n){let a=t.length-2,r=3,l,o;return t[r][1].type==="whitespace"&&(r+=2),a-2>r&&t[a][1].type==="whitespace"&&(a-=2),t[a][1].type==="atxHeadingSequence"&&(r===a-1||a-4>r&&t[a-2][1].type==="whitespace")&&(a-=r+1===a?2:4),a>r&&(l={type:"atxHeadingText",start:t[r][1].start,end:t[a][1].end},o={type:"chunkText",start:t[r][1].start,end:t[a][1].end,contentType:"text"},$n(t,r,a-r+1,[["enter",l,n],["enter",o,n],["exit",o,n],["exit",l,n]])),t}function _3(t,n,a){let r=0;return l;function l(y){return t.enter("atxHeading"),o(y)}function o(y){return t.enter("atxHeadingSequence"),c(y)}function c(y){return y===35&&r++<6?(t.consume(y),c):y===null||Kt(y)?(t.exit("atxHeadingSequence"),d(y)):a(y)}function d(y){return y===35?(t.enter("atxHeadingSequence"),h(y)):y===null||Ee(y)?(t.exit("atxHeading"),n(y)):Ie(y)?Ze(t,d,"whitespace")(y):(t.enter("atxHeadingText"),m(y))}function h(y){return y===35?(t.consume(y),h):(t.exit("atxHeadingSequence"),d(y))}function m(y){return y===null||y===35||Kt(y)?(t.exit("atxHeadingText"),d(y)):(t.consume(y),m)}}const S3=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],_y=["pre","script","style","textarea"],k3={concrete:!0,name:"htmlFlow",resolveTo:N3,tokenize:C3},E3={partial:!0,tokenize:A3},j3={partial:!0,tokenize:T3};function N3(t){let n=t.length;for(;n--&&!(t[n][0]==="enter"&&t[n][1].type==="htmlFlow"););return n>1&&t[n-2][1].type==="linePrefix"&&(t[n][1].start=t[n-2][1].start,t[n+1][1].start=t[n-2][1].start,t.splice(n-2,2)),t}function C3(t,n,a){const r=this;let l,o,c,d,h;return m;function m(j){return y(j)}function y(j){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(j),x}function x(j){return j===33?(t.consume(j),v):j===47?(t.consume(j),o=!0,N):j===63?(t.consume(j),l=3,r.interrupt?n:A):Bn(j)?(t.consume(j),c=String.fromCharCode(j),C):a(j)}function v(j){return j===45?(t.consume(j),l=2,b):j===91?(t.consume(j),l=5,d=0,k):Bn(j)?(t.consume(j),l=4,r.interrupt?n:A):a(j)}function b(j){return j===45?(t.consume(j),r.interrupt?n:A):a(j)}function k(j){const ie="CDATA[";return j===ie.charCodeAt(d++)?(t.consume(j),d===ie.length?r.interrupt?n:Z:k):a(j)}function N(j){return Bn(j)?(t.consume(j),c=String.fromCharCode(j),C):a(j)}function C(j){if(j===null||j===47||j===62||Kt(j)){const ie=j===47,ee=c.toLowerCase();return!ie&&!o&&_y.includes(ee)?(l=1,r.interrupt?n(j):Z(j)):S3.includes(c.toLowerCase())?(l=6,ie?(t.consume(j),E):r.interrupt?n(j):Z(j)):(l=7,r.interrupt&&!r.parser.lazy[r.now().line]?a(j):o?L(j):R(j))}return j===45||un(j)?(t.consume(j),c+=String.fromCharCode(j),C):a(j)}function E(j){return j===62?(t.consume(j),r.interrupt?n:Z):a(j)}function L(j){return Ie(j)?(t.consume(j),L):fe(j)}function R(j){return j===47?(t.consume(j),fe):j===58||j===95||Bn(j)?(t.consume(j),P):Ie(j)?(t.consume(j),R):fe(j)}function P(j){return j===45||j===46||j===58||j===95||un(j)?(t.consume(j),P):W(j)}function W(j){return j===61?(t.consume(j),z):Ie(j)?(t.consume(j),W):R(j)}function z(j){return j===null||j===60||j===61||j===62||j===96?a(j):j===34||j===39?(t.consume(j),h=j,Y):Ie(j)?(t.consume(j),z):te(j)}function Y(j){return j===h?(t.consume(j),h=null,ae):j===null||Ee(j)?a(j):(t.consume(j),Y)}function te(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Kt(j)?W(j):(t.consume(j),te)}function ae(j){return j===47||j===62||Ie(j)?R(j):a(j)}function fe(j){return j===62?(t.consume(j),I):a(j)}function I(j){return j===null||Ee(j)?Z(j):Ie(j)?(t.consume(j),I):a(j)}function Z(j){return j===45&&l===2?(t.consume(j),M):j===60&&l===1?(t.consume(j),J):j===62&&l===4?(t.consume(j),T):j===63&&l===3?(t.consume(j),A):j===93&&l===5?(t.consume(j),xe):Ee(j)&&(l===6||l===7)?(t.exit("htmlFlowData"),t.check(E3,B,de)(j)):j===null||Ee(j)?(t.exit("htmlFlowData"),de(j)):(t.consume(j),Z)}function de(j){return t.check(j3,se,B)(j)}function se(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),K}function K(j){return j===null||Ee(j)?de(j):(t.enter("htmlFlowData"),Z(j))}function M(j){return j===45?(t.consume(j),A):Z(j)}function J(j){return j===47?(t.consume(j),c="",ue):Z(j)}function ue(j){if(j===62){const ie=c.toLowerCase();return _y.includes(ie)?(t.consume(j),T):Z(j)}return Bn(j)&&c.length<8?(t.consume(j),c+=String.fromCharCode(j),ue):Z(j)}function xe(j){return j===93?(t.consume(j),A):Z(j)}function A(j){return j===62?(t.consume(j),T):j===45&&l===2?(t.consume(j),A):Z(j)}function T(j){return j===null||Ee(j)?(t.exit("htmlFlowData"),B(j)):(t.consume(j),T)}function B(j){return t.exit("htmlFlow"),n(j)}}function T3(t,n,a){const r=this;return l;function l(c){return Ee(c)?(t.enter("lineEnding"),t.consume(c),t.exit("lineEnding"),o):a(c)}function o(c){return r.parser.lazy[r.now().line]?a(c):n(c)}}function A3(t,n,a){return r;function r(l){return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),t.attempt(cu,n,a)}}const R3={name:"htmlText",tokenize:O3};function O3(t,n,a){const r=this;let l,o,c;return d;function d(A){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(A),h}function h(A){return A===33?(t.consume(A),m):A===47?(t.consume(A),W):A===63?(t.consume(A),R):Bn(A)?(t.consume(A),te):a(A)}function m(A){return A===45?(t.consume(A),y):A===91?(t.consume(A),o=0,k):Bn(A)?(t.consume(A),L):a(A)}function y(A){return A===45?(t.consume(A),b):a(A)}function x(A){return A===null?a(A):A===45?(t.consume(A),v):Ee(A)?(c=x,J(A)):(t.consume(A),x)}function v(A){return A===45?(t.consume(A),b):x(A)}function b(A){return A===62?M(A):A===45?v(A):x(A)}function k(A){const T="CDATA[";return A===T.charCodeAt(o++)?(t.consume(A),o===T.length?N:k):a(A)}function N(A){return A===null?a(A):A===93?(t.consume(A),C):Ee(A)?(c=N,J(A)):(t.consume(A),N)}function C(A){return A===93?(t.consume(A),E):N(A)}function E(A){return A===62?M(A):A===93?(t.consume(A),E):N(A)}function L(A){return A===null||A===62?M(A):Ee(A)?(c=L,J(A)):(t.consume(A),L)}function R(A){return A===null?a(A):A===63?(t.consume(A),P):Ee(A)?(c=R,J(A)):(t.consume(A),R)}function P(A){return A===62?M(A):R(A)}function W(A){return Bn(A)?(t.consume(A),z):a(A)}function z(A){return A===45||un(A)?(t.consume(A),z):Y(A)}function Y(A){return Ee(A)?(c=Y,J(A)):Ie(A)?(t.consume(A),Y):M(A)}function te(A){return A===45||un(A)?(t.consume(A),te):A===47||A===62||Kt(A)?ae(A):a(A)}function ae(A){return A===47?(t.consume(A),M):A===58||A===95||Bn(A)?(t.consume(A),fe):Ee(A)?(c=ae,J(A)):Ie(A)?(t.consume(A),ae):M(A)}function fe(A){return A===45||A===46||A===58||A===95||un(A)?(t.consume(A),fe):I(A)}function I(A){return A===61?(t.consume(A),Z):Ee(A)?(c=I,J(A)):Ie(A)?(t.consume(A),I):ae(A)}function Z(A){return A===null||A===60||A===61||A===62||A===96?a(A):A===34||A===39?(t.consume(A),l=A,de):Ee(A)?(c=Z,J(A)):Ie(A)?(t.consume(A),Z):(t.consume(A),se)}function de(A){return A===l?(t.consume(A),l=void 0,K):A===null?a(A):Ee(A)?(c=de,J(A)):(t.consume(A),de)}function se(A){return A===null||A===34||A===39||A===60||A===61||A===96?a(A):A===47||A===62||Kt(A)?ae(A):(t.consume(A),se)}function K(A){return A===47||A===62||Kt(A)?ae(A):a(A)}function M(A){return A===62?(t.consume(A),t.exit("htmlTextData"),t.exit("htmlText"),n):a(A)}function J(A){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),ue}function ue(A){return Ie(A)?Ze(t,xe,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):xe(A)}function xe(A){return t.enter("htmlTextData"),c(A)}}const rh={name:"labelEnd",resolveAll:U3,resolveTo:M3,tokenize:B3},D3={tokenize:q3},L3={tokenize:I3},z3={tokenize:H3};function U3(t){let n=-1;const a=[];for(;++n<t.length;){const r=t[n][1];if(a.push(t[n]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const l=r.type==="labelImage"?4:2;r.type="data",n+=l}}return t.length!==a.length&&$n(t,0,t.length,a),t}function M3(t,n){let a=t.length,r=0,l,o,c,d;for(;a--;)if(l=t[a][1],o){if(l.type==="link"||l.type==="labelLink"&&l._inactive)break;t[a][0]==="enter"&&l.type==="labelLink"&&(l._inactive=!0)}else if(c){if(t[a][0]==="enter"&&(l.type==="labelImage"||l.type==="labelLink")&&!l._balanced&&(o=a,l.type!=="labelLink")){r=2;break}}else l.type==="labelEnd"&&(c=a);const h={type:t[o][1].type==="labelLink"?"link":"image",start:{...t[o][1].start},end:{...t[t.length-1][1].end}},m={type:"label",start:{...t[o][1].start},end:{...t[c][1].end}},y={type:"labelText",start:{...t[o+r+2][1].end},end:{...t[c-2][1].start}};return d=[["enter",h,n],["enter",m,n]],d=wn(d,t.slice(o+1,o+r+3)),d=wn(d,[["enter",y,n]]),d=wn(d,ah(n.parser.constructs.insideSpan.null,t.slice(o+r+4,c-3),n)),d=wn(d,[["exit",y,n],t[c-2],t[c-1],["exit",m,n]]),d=wn(d,t.slice(c+1)),d=wn(d,[["exit",h,n]]),$n(t,o,t.length,d),t}function B3(t,n,a){const r=this;let l=r.events.length,o,c;for(;l--;)if((r.events[l][1].type==="labelImage"||r.events[l][1].type==="labelLink")&&!r.events[l][1]._balanced){o=r.events[l][1];break}return d;function d(v){return o?o._inactive?x(v):(c=r.parser.defined.includes(Er(r.sliceSerialize({start:o.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(v),t.exit("labelMarker"),t.exit("labelEnd"),h):a(v)}function h(v){return v===40?t.attempt(D3,y,c?y:x)(v):v===91?t.attempt(L3,y,c?m:x)(v):c?y(v):x(v)}function m(v){return t.attempt(z3,y,x)(v)}function y(v){return n(v)}function x(v){return o._balanced=!0,a(v)}}function q3(t,n,a){return r;function r(x){return t.enter("resource"),t.enter("resourceMarker"),t.consume(x),t.exit("resourceMarker"),l}function l(x){return Kt(x)?Bs(t,o)(x):o(x)}function o(x){return x===41?y(x):ob(t,c,d,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(x)}function c(x){return Kt(x)?Bs(t,h)(x):y(x)}function d(x){return a(x)}function h(x){return x===34||x===39||x===40?cb(t,m,a,"resourceTitle","resourceTitleMarker","resourceTitleString")(x):y(x)}function m(x){return Kt(x)?Bs(t,y)(x):y(x)}function y(x){return x===41?(t.enter("resourceMarker"),t.consume(x),t.exit("resourceMarker"),t.exit("resource"),n):a(x)}}function I3(t,n,a){const r=this;return l;function l(d){return ub.call(r,t,o,c,"reference","referenceMarker","referenceString")(d)}function o(d){return r.parser.defined.includes(Er(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?n(d):a(d)}function c(d){return a(d)}}function H3(t,n,a){return r;function r(o){return t.enter("reference"),t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),l}function l(o){return o===93?(t.enter("referenceMarker"),t.consume(o),t.exit("referenceMarker"),t.exit("reference"),n):a(o)}}const $3={name:"labelStartImage",resolveAll:rh.resolveAll,tokenize:V3};function V3(t,n,a){const r=this;return l;function l(d){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(d),t.exit("labelImageMarker"),o}function o(d){return d===91?(t.enter("labelMarker"),t.consume(d),t.exit("labelMarker"),t.exit("labelImage"),c):a(d)}function c(d){return d===94&&"_hiddenFootnoteSupport"in r.parser.constructs?a(d):n(d)}}const P3={name:"labelStartLink",resolveAll:rh.resolveAll,tokenize:G3};function G3(t,n,a){const r=this;return l;function l(c){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(c),t.exit("labelMarker"),t.exit("labelLink"),o}function o(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?a(c):n(c)}}const Qd={name:"lineEnding",tokenize:Y3};function Y3(t,n){return a;function a(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Ze(t,n,"linePrefix")}}const Vo={name:"thematicBreak",tokenize:K3};function K3(t,n,a){let r=0,l;return o;function o(m){return t.enter("thematicBreak"),c(m)}function c(m){return l=m,d(m)}function d(m){return m===l?(t.enter("thematicBreakSequence"),h(m)):r>=3&&(m===null||Ee(m))?(t.exit("thematicBreak"),n(m)):a(m)}function h(m){return m===l?(t.consume(m),r++,h):(t.exit("thematicBreakSequence"),Ie(m)?Ze(t,d,"whitespace")(m):d(m))}}const Yt={continuation:{tokenize:J3},exit:W3,name:"list",tokenize:Q3},F3={partial:!0,tokenize:e4},X3={partial:!0,tokenize:Z3};function Q3(t,n,a){const r=this,l=r.events[r.events.length-1];let o=l&&l[1].type==="linePrefix"?l[2].sliceSerialize(l[1],!0).length:0,c=0;return d;function d(b){const k=r.containerState.type||(b===42||b===43||b===45?"listUnordered":"listOrdered");if(k==="listUnordered"?!r.containerState.marker||b===r.containerState.marker:Af(b)){if(r.containerState.type||(r.containerState.type=k,t.enter(k,{_container:!0})),k==="listUnordered")return t.enter("listItemPrefix"),b===42||b===45?t.check(Vo,a,m)(b):m(b);if(!r.interrupt||b===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),h(b)}return a(b)}function h(b){return Af(b)&&++c<10?(t.consume(b),h):(!r.interrupt||c<2)&&(r.containerState.marker?b===r.containerState.marker:b===41||b===46)?(t.exit("listItemValue"),m(b)):a(b)}function m(b){return t.enter("listItemMarker"),t.consume(b),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||b,t.check(cu,r.interrupt?a:y,t.attempt(F3,v,x))}function y(b){return r.containerState.initialBlankLine=!0,o++,v(b)}function x(b){return Ie(b)?(t.enter("listItemPrefixWhitespace"),t.consume(b),t.exit("listItemPrefixWhitespace"),v):a(b)}function v(b){return r.containerState.size=o+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,n(b)}}function J3(t,n,a){const r=this;return r.containerState._closeFlow=void 0,t.check(cu,l,o);function l(d){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Ze(t,n,"listItemIndent",r.containerState.size+1)(d)}function o(d){return r.containerState.furtherBlankLines||!Ie(d)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,c(d)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(X3,n,c)(d))}function c(d){return r.containerState._closeFlow=!0,r.interrupt=void 0,Ze(t,t.attempt(Yt,n,a),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d)}}function Z3(t,n,a){const r=this;return Ze(t,l,"listItemIndent",r.containerState.size+1);function l(o){const c=r.events[r.events.length-1];return c&&c[1].type==="listItemIndent"&&c[2].sliceSerialize(c[1],!0).length===r.containerState.size?n(o):a(o)}}function W3(t){t.exit(this.containerState.type)}function e4(t,n,a){const r=this;return Ze(t,l,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function l(o){const c=r.events[r.events.length-1];return!Ie(o)&&c&&c[1].type==="listItemPrefixWhitespace"?n(o):a(o)}}const Sy={name:"setextUnderline",resolveTo:t4,tokenize:n4};function t4(t,n){let a=t.length,r,l,o;for(;a--;)if(t[a][0]==="enter"){if(t[a][1].type==="content"){r=a;break}t[a][1].type==="paragraph"&&(l=a)}else t[a][1].type==="content"&&t.splice(a,1),!o&&t[a][1].type==="definition"&&(o=a);const c={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[l][1].type="setextHeadingText",o?(t.splice(l,0,["enter",c,n]),t.splice(o+1,0,["exit",t[r][1],n]),t[r][1].end={...t[o][1].end}):t[r][1]=c,t.push(["exit",c,n]),t}function n4(t,n,a){const r=this;let l;return o;function o(m){let y=r.events.length,x;for(;y--;)if(r.events[y][1].type!=="lineEnding"&&r.events[y][1].type!=="linePrefix"&&r.events[y][1].type!=="content"){x=r.events[y][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||x)?(t.enter("setextHeadingLine"),l=m,c(m)):a(m)}function c(m){return t.enter("setextHeadingLineSequence"),d(m)}function d(m){return m===l?(t.consume(m),d):(t.exit("setextHeadingLineSequence"),Ie(m)?Ze(t,h,"lineSuffix")(m):h(m))}function h(m){return m===null||Ee(m)?(t.exit("setextHeadingLine"),n(m)):a(m)}}const i4={tokenize:a4};function a4(t){const n=this,a=t.attempt(cu,r,t.attempt(this.parser.constructs.flowInitial,l,Ze(t,t.attempt(this.parser.constructs.flow,l,t.attempt(u3,l)),"linePrefix")));return a;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEndingBlank"),t.consume(o),t.exit("lineEndingBlank"),n.currentConstruct=void 0,a}function l(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),n.currentConstruct=void 0,a}}const r4={resolveAll:fb()},s4=db("string"),l4=db("text");function db(t){return{resolveAll:fb(t==="text"?o4:void 0),tokenize:n};function n(a){const r=this,l=this.parser.constructs[t],o=a.attempt(l,c,d);return c;function c(y){return m(y)?o(y):d(y)}function d(y){if(y===null){a.consume(y);return}return a.enter("data"),a.consume(y),h}function h(y){return m(y)?(a.exit("data"),o(y)):(a.consume(y),h)}function m(y){if(y===null)return!0;const x=l[y];let v=-1;if(x)for(;++v<x.length;){const b=x[v];if(!b.previous||b.previous.call(r,r.previous))return!0}return!1}}}function fb(t){return n;function n(a,r){let l=-1,o;for(;++l<=a.length;)o===void 0?a[l]&&a[l][1].type==="data"&&(o=l,l++):(!a[l]||a[l][1].type!=="data")&&(l!==o+2&&(a[o][1].end=a[l-1][1].end,a.splice(o+2,l-o-2),l=o+2),o=void 0);return t?t(a,r):a}}function o4(t,n){let a=0;for(;++a<=t.length;)if((a===t.length||t[a][1].type==="lineEnding")&&t[a-1][1].type==="data"){const r=t[a-1][1],l=n.sliceStream(r);let o=l.length,c=-1,d=0,h;for(;o--;){const m=l[o];if(typeof m=="string"){for(c=m.length;m.charCodeAt(c-1)===32;)d++,c--;if(c)break;c=-1}else if(m===-2)h=!0,d++;else if(m!==-1){o++;break}}if(n._contentTypeTextTrailing&&a===t.length&&(d=0),d){const m={type:a===t.length||h||d<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:o?c:r.start._bufferIndex+c,_index:r.start._index+o,line:r.end.line,column:r.end.column-d,offset:r.end.offset-d},end:{...r.end}};r.end={...m.start},r.start.offset===r.end.offset?Object.assign(r,m):(t.splice(a,0,["enter",m,n],["exit",m,n]),a+=2)}a++}return t}const u4={42:Yt,43:Yt,45:Yt,48:Yt,49:Yt,50:Yt,51:Yt,52:Yt,53:Yt,54:Yt,55:Yt,56:Yt,57:Yt,62:ab},c4={91:m3},d4={[-2]:Xd,[-1]:Xd,32:Xd},f4={35:v3,42:Vo,45:[Sy,Vo],60:k3,61:Sy,95:Vo,96:wy,126:wy},h4={38:sb,92:rb},m4={[-5]:Qd,[-4]:Qd,[-3]:Qd,33:$3,38:sb,42:Rf,60:[Pj,R3],91:P3,92:[x3,rb],93:rh,95:Rf,96:i3},p4={null:[Rf,r4]},g4={null:[42,95]},y4={null:[]},x4=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:g4,contentInitial:c4,disable:y4,document:u4,flow:f4,flowInitial:d4,insideSpan:p4,string:h4,text:m4},Symbol.toStringTag,{value:"Module"}));function b4(t,n,a){let r={_bufferIndex:-1,_index:0,line:a&&a.line||1,column:a&&a.column||1,offset:a&&a.offset||0};const l={},o=[];let c=[],d=[];const h={attempt:Y(W),check:Y(z),consume:L,enter:R,exit:P,interrupt:Y(z,{interrupt:!0})},m={code:null,containerState:{},defineSkip:N,events:[],now:k,parser:t,previous:null,sliceSerialize:v,sliceStream:b,write:x};let y=n.tokenize.call(m,h);return n.resolveAll&&o.push(n),m;function x(I){return c=wn(c,I),C(),c[c.length-1]!==null?[]:(te(n,0),m.events=ah(o,m.events,m),m.events)}function v(I,Z){return w4(b(I),Z)}function b(I){return v4(c,I)}function k(){const{_bufferIndex:I,_index:Z,line:de,column:se,offset:K}=r;return{_bufferIndex:I,_index:Z,line:de,column:se,offset:K}}function N(I){l[I.line]=I.column,fe()}function C(){let I;for(;r._index<c.length;){const Z=c[r._index];if(typeof Z=="string")for(I=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===I&&r._bufferIndex<Z.length;)E(Z.charCodeAt(r._bufferIndex));else E(Z)}}function E(I){y=y(I)}function L(I){Ee(I)?(r.line++,r.column=1,r.offset+=I===-3?2:1,fe()):I!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===c[r._index].length&&(r._bufferIndex=-1,r._index++)),m.previous=I}function R(I,Z){const de=Z||{};return de.type=I,de.start=k(),m.events.push(["enter",de,m]),d.push(de),de}function P(I){const Z=d.pop();return Z.end=k(),m.events.push(["exit",Z,m]),Z}function W(I,Z){te(I,Z.from)}function z(I,Z){Z.restore()}function Y(I,Z){return de;function de(se,K,M){let J,ue,xe,A;return Array.isArray(se)?B(se):"tokenize"in se?B([se]):T(se);function T(ce){return ke;function ke(Ue){const re=Ue!==null&&ce[Ue],tt=Ue!==null&&ce.null,me=[...Array.isArray(re)?re:re?[re]:[],...Array.isArray(tt)?tt:tt?[tt]:[]];return B(me)(Ue)}}function B(ce){return J=ce,ue=0,ce.length===0?M:j(ce[ue])}function j(ce){return ke;function ke(Ue){return A=ae(),xe=ce,ce.partial||(m.currentConstruct=ce),ce.name&&m.parser.constructs.disable.null.includes(ce.name)?ee():ce.tokenize.call(Z?Object.assign(Object.create(m),Z):m,h,ie,ee)(Ue)}}function ie(ce){return I(xe,A),K}function ee(ce){return A.restore(),++ue<J.length?j(J[ue]):M}}}function te(I,Z){I.resolveAll&&!o.includes(I)&&o.push(I),I.resolve&&$n(m.events,Z,m.events.length-Z,I.resolve(m.events.slice(Z),m)),I.resolveTo&&(m.events=I.resolveTo(m.events,m))}function ae(){const I=k(),Z=m.previous,de=m.currentConstruct,se=m.events.length,K=Array.from(d);return{from:se,restore:M};function M(){r=I,m.previous=Z,m.currentConstruct=de,m.events.length=se,d=K,fe()}}function fe(){r.line in l&&r.column<2&&(r.column=l[r.line],r.offset+=l[r.line]-1)}}function v4(t,n){const a=n.start._index,r=n.start._bufferIndex,l=n.end._index,o=n.end._bufferIndex;let c;if(a===l)c=[t[a].slice(r,o)];else{if(c=t.slice(a,l),r>-1){const d=c[0];typeof d=="string"?c[0]=d.slice(r):c.shift()}o>0&&c.push(t[l].slice(0,o))}return c}function w4(t,n){let a=-1;const r=[];let l;for(;++a<t.length;){const o=t[a];let c;if(typeof o=="string")c=o;else switch(o){case-5:{c="\r";break}case-4:{c=`
`;break}case-3:{c=`\r
`;break}case-2:{c=n?" ":"	";break}case-1:{if(!n&&l)continue;c=" ";break}default:c=String.fromCharCode(o)}l=o===-2,r.push(c)}return r.join("")}function _4(t){const r={constructs:Tj([x4,...(t||{}).extensions||[]]),content:l(Mj),defined:[],document:l(qj),flow:l(i4),lazy:{},string:l(s4),text:l(l4)};return r;function l(o){return c;function c(d){return b4(r,o,d)}}}function S4(t){for(;!lb(t););return t}const ky=/[\0\t\n\r]/g;function k4(){let t=1,n="",a=!0,r;return l;function l(o,c,d){const h=[];let m,y,x,v,b;for(o=n+(typeof o=="string"?o.toString():new TextDecoder(c||void 0).decode(o)),x=0,n="",a&&(o.charCodeAt(0)===65279&&x++,a=void 0);x<o.length;){if(ky.lastIndex=x,m=ky.exec(o),v=m&&m.index!==void 0?m.index:o.length,b=o.charCodeAt(v),!m){n=o.slice(x);break}if(b===10&&x===v&&r)h.push(-3),r=void 0;else switch(r&&(h.push(-5),r=void 0),x<v&&(h.push(o.slice(x,v)),t+=v-x),b){case 0:{h.push(65533),t++;break}case 9:{for(y=Math.ceil(t/4)*4,h.push(-2);t++<y;)h.push(-1);break}case 10:{h.push(-4),t=1;break}default:r=!0,t=1}x=v+1}return d&&(r&&h.push(-5),n&&h.push(n),h.push(null)),h}}const E4=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function j4(t){return t.replace(E4,N4)}function N4(t,n,a){if(n)return n;if(a.charCodeAt(0)===35){const l=a.charCodeAt(1),o=l===120||l===88;return ib(a.slice(o?2:1),o?16:10)}return ih(a)||t}const hb={}.hasOwnProperty;function C4(t,n,a){return n&&typeof n=="object"&&(a=n,n=void 0),T4(a)(S4(_4(a).document().write(k4()(t,n,!0))))}function T4(t){const n={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Sa),autolinkProtocol:ae,autolinkEmail:ae,atxHeading:o(Mt),blockQuote:o(tt),characterEscape:ae,characterReference:ae,codeFenced:o(me),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:o(me,c),codeText:o(Ke,c),codeTextData:ae,data:ae,codeFlowValue:ae,definition:o(Ut),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:o(Qt),hardBreakEscape:o(Gn),hardBreakTrailing:o(Gn),htmlFlow:o(rl,c),htmlFlowData:ae,htmlText:o(rl,c),htmlTextData:ae,image:o(sl),label:c,link:o(Sa),listItem:o(Dr),listItemValue:v,listOrdered:o(ka,x),listUnordered:o(ka),paragraph:o(hu),reference:j,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:o(Mt),strong:o(mu),thematicBreak:o(pu)},exit:{atxHeading:h(),atxHeadingSequence:W,autolink:h(),autolinkEmail:re,autolinkProtocol:Ue,blockQuote:h(),characterEscapeValue:fe,characterReferenceMarkerHexadecimal:ee,characterReferenceMarkerNumeric:ee,characterReferenceValue:ce,characterReference:ke,codeFenced:h(C),codeFencedFence:N,codeFencedFenceInfo:b,codeFencedFenceMeta:k,codeFlowValue:fe,codeIndented:h(E),codeText:h(K),codeTextData:fe,data:fe,definition:h(),definitionDestinationString:P,definitionLabelString:L,definitionTitleString:R,emphasis:h(),hardBreakEscape:h(Z),hardBreakTrailing:h(Z),htmlFlow:h(de),htmlFlowData:fe,htmlText:h(se),htmlTextData:fe,image:h(J),label:xe,labelText:ue,lineEnding:I,link:h(M),listItem:h(),listOrdered:h(),listUnordered:h(),paragraph:h(),referenceString:ie,resourceDestinationString:A,resourceTitleString:T,resource:B,setextHeading:h(te),setextHeadingLineSequence:Y,setextHeadingText:z,strong:h(),thematicBreak:h()}};mb(n,(t||{}).mdastExtensions||[]);const a={};return r;function r(F){let le={type:"root",children:[]};const Se={stack:[le],tokenStack:[],config:n,enter:d,exit:m,buffer:c,resume:y,data:a},Ae=[];let He=-1;for(;++He<F.length;)if(F[He][1].type==="listOrdered"||F[He][1].type==="listUnordered")if(F[He][0]==="enter")Ae.push(He);else{const Jt=Ae.pop();He=l(F,Jt,He)}for(He=-1;++He<F.length;){const Jt=n[F[He][0]];hb.call(Jt,F[He][1].type)&&Jt[F[He][1].type].call(Object.assign({sliceSerialize:F[He][2].sliceSerialize},Se),F[He][1])}if(Se.tokenStack.length>0){const Jt=Se.tokenStack[Se.tokenStack.length-1];(Jt[1]||Ey).call(Se,void 0,Jt[0])}for(le.position={start:Vi(F.length>0?F[0][1].start:{line:1,column:1,offset:0}),end:Vi(F.length>0?F[F.length-2][1].end:{line:1,column:1,offset:0})},He=-1;++He<n.transforms.length;)le=n.transforms[He](le)||le;return le}function l(F,le,Se){let Ae=le-1,He=-1,Jt=!1,Yn,Lt,gt,Bt;for(;++Ae<=Se;){const Fe=F[Ae];switch(Fe[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Fe[0]==="enter"?He++:He--,Bt=void 0;break}case"lineEndingBlank":{Fe[0]==="enter"&&(Yn&&!Bt&&!He&&!gt&&(gt=Ae),Bt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Bt=void 0}if(!He&&Fe[0]==="enter"&&Fe[1].type==="listItemPrefix"||He===-1&&Fe[0]==="exit"&&(Fe[1].type==="listUnordered"||Fe[1].type==="listOrdered")){if(Yn){let yi=Ae;for(Lt=void 0;yi--;){const kn=F[yi];if(kn[1].type==="lineEnding"||kn[1].type==="lineEndingBlank"){if(kn[0]==="exit")continue;Lt&&(F[Lt][1].type="lineEndingBlank",Jt=!0),kn[1].type="lineEnding",Lt=yi}else if(!(kn[1].type==="linePrefix"||kn[1].type==="blockQuotePrefix"||kn[1].type==="blockQuotePrefixWhitespace"||kn[1].type==="blockQuoteMarker"||kn[1].type==="listItemIndent"))break}gt&&(!Lt||gt<Lt)&&(Yn._spread=!0),Yn.end=Object.assign({},Lt?F[Lt][1].start:Fe[1].end),F.splice(Lt||Ae,0,["exit",Yn,Fe[2]]),Ae++,Se++}if(Fe[1].type==="listItemPrefix"){const yi={type:"listItem",_spread:!1,start:Object.assign({},Fe[1].start),end:void 0};Yn=yi,F.splice(Ae,0,["enter",yi,Fe[2]]),Ae++,Se++,gt=void 0,Bt=!0}}}return F[le][1]._spread=Jt,Se}function o(F,le){return Se;function Se(Ae){d.call(this,F(Ae),Ae),le&&le.call(this,Ae)}}function c(){this.stack.push({type:"fragment",children:[]})}function d(F,le,Se){this.stack[this.stack.length-1].children.push(F),this.stack.push(F),this.tokenStack.push([le,Se||void 0]),F.position={start:Vi(le.start),end:void 0}}function h(F){return le;function le(Se){F&&F.call(this,Se),m.call(this,Se)}}function m(F,le){const Se=this.stack.pop(),Ae=this.tokenStack.pop();if(Ae)Ae[0].type!==F.type&&(le?le.call(this,F,Ae[0]):(Ae[1]||Ey).call(this,F,Ae[0]));else throw new Error("Cannot close `"+F.type+"` ("+Ms({start:F.start,end:F.end})+"): its not open");Se.position.end=Vi(F.end)}function y(){return Nj(this.stack.pop())}function x(){this.data.expectingFirstListItemValue=!0}function v(F){if(this.data.expectingFirstListItemValue){const le=this.stack[this.stack.length-2];le.start=Number.parseInt(this.sliceSerialize(F),10),this.data.expectingFirstListItemValue=void 0}}function b(){const F=this.resume(),le=this.stack[this.stack.length-1];le.lang=F}function k(){const F=this.resume(),le=this.stack[this.stack.length-1];le.meta=F}function N(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function C(){const F=this.resume(),le=this.stack[this.stack.length-1];le.value=F.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function E(){const F=this.resume(),le=this.stack[this.stack.length-1];le.value=F.replace(/(\r?\n|\r)$/g,"")}function L(F){const le=this.resume(),Se=this.stack[this.stack.length-1];Se.label=le,Se.identifier=Er(this.sliceSerialize(F)).toLowerCase()}function R(){const F=this.resume(),le=this.stack[this.stack.length-1];le.title=F}function P(){const F=this.resume(),le=this.stack[this.stack.length-1];le.url=F}function W(F){const le=this.stack[this.stack.length-1];if(!le.depth){const Se=this.sliceSerialize(F).length;le.depth=Se}}function z(){this.data.setextHeadingSlurpLineEnding=!0}function Y(F){const le=this.stack[this.stack.length-1];le.depth=this.sliceSerialize(F).codePointAt(0)===61?1:2}function te(){this.data.setextHeadingSlurpLineEnding=void 0}function ae(F){const Se=this.stack[this.stack.length-1].children;let Ae=Se[Se.length-1];(!Ae||Ae.type!=="text")&&(Ae=Dt(),Ae.position={start:Vi(F.start),end:void 0},Se.push(Ae)),this.stack.push(Ae)}function fe(F){const le=this.stack.pop();le.value+=this.sliceSerialize(F),le.position.end=Vi(F.end)}function I(F){const le=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Se=le.children[le.children.length-1];Se.position.end=Vi(F.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&n.canContainEols.includes(le.type)&&(ae.call(this,F),fe.call(this,F))}function Z(){this.data.atHardBreak=!0}function de(){const F=this.resume(),le=this.stack[this.stack.length-1];le.value=F}function se(){const F=this.resume(),le=this.stack[this.stack.length-1];le.value=F}function K(){const F=this.resume(),le=this.stack[this.stack.length-1];le.value=F}function M(){const F=this.stack[this.stack.length-1];if(this.data.inReference){const le=this.data.referenceType||"shortcut";F.type+="Reference",F.referenceType=le,delete F.url,delete F.title}else delete F.identifier,delete F.label;this.data.referenceType=void 0}function J(){const F=this.stack[this.stack.length-1];if(this.data.inReference){const le=this.data.referenceType||"shortcut";F.type+="Reference",F.referenceType=le,delete F.url,delete F.title}else delete F.identifier,delete F.label;this.data.referenceType=void 0}function ue(F){const le=this.sliceSerialize(F),Se=this.stack[this.stack.length-2];Se.label=j4(le),Se.identifier=Er(le).toLowerCase()}function xe(){const F=this.stack[this.stack.length-1],le=this.resume(),Se=this.stack[this.stack.length-1];if(this.data.inReference=!0,Se.type==="link"){const Ae=F.children;Se.children=Ae}else Se.alt=le}function A(){const F=this.resume(),le=this.stack[this.stack.length-1];le.url=F}function T(){const F=this.resume(),le=this.stack[this.stack.length-1];le.title=F}function B(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function ie(F){const le=this.resume(),Se=this.stack[this.stack.length-1];Se.label=le,Se.identifier=Er(this.sliceSerialize(F)).toLowerCase(),this.data.referenceType="full"}function ee(F){this.data.characterReferenceType=F.type}function ce(F){const le=this.sliceSerialize(F),Se=this.data.characterReferenceType;let Ae;Se?(Ae=ib(le,Se==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Ae=ih(le);const He=this.stack[this.stack.length-1];He.value+=Ae}function ke(F){const le=this.stack.pop();le.position.end=Vi(F.end)}function Ue(F){fe.call(this,F);const le=this.stack[this.stack.length-1];le.url=this.sliceSerialize(F)}function re(F){fe.call(this,F);const le=this.stack[this.stack.length-1];le.url="mailto:"+this.sliceSerialize(F)}function tt(){return{type:"blockquote",children:[]}}function me(){return{type:"code",lang:null,meta:null,value:""}}function Ke(){return{type:"inlineCode",value:""}}function Ut(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Qt(){return{type:"emphasis",children:[]}}function Mt(){return{type:"heading",depth:0,children:[]}}function Gn(){return{type:"break"}}function rl(){return{type:"html",value:""}}function sl(){return{type:"image",title:null,url:"",alt:null}}function Sa(){return{type:"link",title:null,url:"",children:[]}}function ka(F){return{type:"list",ordered:F.type==="listOrdered",start:null,spread:F._spread,children:[]}}function Dr(F){return{type:"listItem",spread:F._spread,checked:null,children:[]}}function hu(){return{type:"paragraph",children:[]}}function mu(){return{type:"strong",children:[]}}function Dt(){return{type:"text",value:""}}function pu(){return{type:"thematicBreak"}}}function Vi(t){return{line:t.line,column:t.column,offset:t.offset}}function mb(t,n){let a=-1;for(;++a<n.length;){const r=n[a];Array.isArray(r)?mb(t,r):A4(t,r)}}function A4(t,n){let a;for(a in n)if(hb.call(n,a))switch(a){case"canContainEols":{const r=n[a];r&&t[a].push(...r);break}case"transforms":{const r=n[a];r&&t[a].push(...r);break}case"enter":case"exit":{const r=n[a];r&&Object.assign(t[a],r);break}}}function Ey(t,n){throw t?new Error("Cannot close `"+t.type+"` ("+Ms({start:t.start,end:t.end})+"): a different token (`"+n.type+"`, "+Ms({start:n.start,end:n.end})+") is open"):new Error("Cannot close document, a token (`"+n.type+"`, "+Ms({start:n.start,end:n.end})+") is still open")}function R4(t){const n=this;n.parser=a;function a(r){return C4(r,{...n.data("settings"),...t,extensions:n.data("micromarkExtensions")||[],mdastExtensions:n.data("fromMarkdownExtensions")||[]})}}function O4(t,n){const a={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(n),!0)};return t.patch(n,a),t.applyData(n,a)}function D4(t,n){const a={type:"element",tagName:"br",properties:{},children:[]};return t.patch(n,a),[t.applyData(n,a),{type:"text",value:`
`}]}function L4(t,n){const a=n.value?n.value+`
`:"",r={},l=n.lang?n.lang.split(/\s+/):[];l.length>0&&(r.className=["language-"+l[0]]);let o={type:"element",tagName:"code",properties:r,children:[{type:"text",value:a}]};return n.meta&&(o.data={meta:n.meta}),t.patch(n,o),o=t.applyData(n,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(n,o),o}function z4(t,n){const a={type:"element",tagName:"del",properties:{},children:t.all(n)};return t.patch(n,a),t.applyData(n,a)}function U4(t,n){const a={type:"element",tagName:"em",properties:{},children:t.all(n)};return t.patch(n,a),t.applyData(n,a)}function M4(t,n){const a=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(n.identifier).toUpperCase(),l=Or(r.toLowerCase()),o=t.footnoteOrder.indexOf(r);let c,d=t.footnoteCounts.get(r);d===void 0?(d=0,t.footnoteOrder.push(r),c=t.footnoteOrder.length):c=o+1,d+=1,t.footnoteCounts.set(r,d);const h={type:"element",tagName:"a",properties:{href:"#"+a+"fn-"+l,id:a+"fnref-"+l+(d>1?"-"+d:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(c)}]};t.patch(n,h);const m={type:"element",tagName:"sup",properties:{},children:[h]};return t.patch(n,m),t.applyData(n,m)}function B4(t,n){const a={type:"element",tagName:"h"+n.depth,properties:{},children:t.all(n)};return t.patch(n,a),t.applyData(n,a)}function q4(t,n){if(t.options.allowDangerousHtml){const a={type:"raw",value:n.value};return t.patch(n,a),t.applyData(n,a)}}function pb(t,n){const a=n.referenceType;let r="]";if(a==="collapsed"?r+="[]":a==="full"&&(r+="["+(n.label||n.identifier)+"]"),n.type==="imageReference")return[{type:"text",value:"!["+n.alt+r}];const l=t.all(n),o=l[0];o&&o.type==="text"?o.value="["+o.value:l.unshift({type:"text",value:"["});const c=l[l.length-1];return c&&c.type==="text"?c.value+=r:l.push({type:"text",value:r}),l}function I4(t,n){const a=String(n.identifier).toUpperCase(),r=t.definitionById.get(a);if(!r)return pb(t,n);const l={src:Or(r.url||""),alt:n.alt};r.title!==null&&r.title!==void 0&&(l.title=r.title);const o={type:"element",tagName:"img",properties:l,children:[]};return t.patch(n,o),t.applyData(n,o)}function H4(t,n){const a={src:Or(n.url)};n.alt!==null&&n.alt!==void 0&&(a.alt=n.alt),n.title!==null&&n.title!==void 0&&(a.title=n.title);const r={type:"element",tagName:"img",properties:a,children:[]};return t.patch(n,r),t.applyData(n,r)}function $4(t,n){const a={type:"text",value:n.value.replace(/\r?\n|\r/g," ")};t.patch(n,a);const r={type:"element",tagName:"code",properties:{},children:[a]};return t.patch(n,r),t.applyData(n,r)}function V4(t,n){const a=String(n.identifier).toUpperCase(),r=t.definitionById.get(a);if(!r)return pb(t,n);const l={href:Or(r.url||"")};r.title!==null&&r.title!==void 0&&(l.title=r.title);const o={type:"element",tagName:"a",properties:l,children:t.all(n)};return t.patch(n,o),t.applyData(n,o)}function P4(t,n){const a={href:Or(n.url)};n.title!==null&&n.title!==void 0&&(a.title=n.title);const r={type:"element",tagName:"a",properties:a,children:t.all(n)};return t.patch(n,r),t.applyData(n,r)}function G4(t,n,a){const r=t.all(n),l=a?Y4(a):gb(n),o={},c=[];if(typeof n.checked=="boolean"){const y=r[0];let x;y&&y.type==="element"&&y.tagName==="p"?x=y:(x={type:"element",tagName:"p",properties:{},children:[]},r.unshift(x)),x.children.length>0&&x.children.unshift({type:"text",value:" "}),x.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:n.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let d=-1;for(;++d<r.length;){const y=r[d];(l||d!==0||y.type!=="element"||y.tagName!=="p")&&c.push({type:"text",value:`
`}),y.type==="element"&&y.tagName==="p"&&!l?c.push(...y.children):c.push(y)}const h=r[r.length-1];h&&(l||h.type!=="element"||h.tagName!=="p")&&c.push({type:"text",value:`
`});const m={type:"element",tagName:"li",properties:o,children:c};return t.patch(n,m),t.applyData(n,m)}function Y4(t){let n=!1;if(t.type==="list"){n=t.spread||!1;const a=t.children;let r=-1;for(;!n&&++r<a.length;)n=gb(a[r])}return n}function gb(t){const n=t.spread;return n??t.children.length>1}function K4(t,n){const a={},r=t.all(n);let l=-1;for(typeof n.start=="number"&&n.start!==1&&(a.start=n.start);++l<r.length;){const c=r[l];if(c.type==="element"&&c.tagName==="li"&&c.properties&&Array.isArray(c.properties.className)&&c.properties.className.includes("task-list-item")){a.className=["contains-task-list"];break}}const o={type:"element",tagName:n.ordered?"ol":"ul",properties:a,children:t.wrap(r,!0)};return t.patch(n,o),t.applyData(n,o)}function F4(t,n){const a={type:"element",tagName:"p",properties:{},children:t.all(n)};return t.patch(n,a),t.applyData(n,a)}function X4(t,n){const a={type:"root",children:t.wrap(t.all(n))};return t.patch(n,a),t.applyData(n,a)}function Q4(t,n){const a={type:"element",tagName:"strong",properties:{},children:t.all(n)};return t.patch(n,a),t.applyData(n,a)}function J4(t,n){const a=t.all(n),r=a.shift(),l=[];if(r){const c={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(n.children[0],c),l.push(c)}if(a.length>0){const c={type:"element",tagName:"tbody",properties:{},children:t.wrap(a,!0)},d=Wf(n.children[1]),h=Qx(n.children[n.children.length-1]);d&&h&&(c.position={start:d,end:h}),l.push(c)}const o={type:"element",tagName:"table",properties:{},children:t.wrap(l,!0)};return t.patch(n,o),t.applyData(n,o)}function Z4(t,n,a){const r=a?a.children:void 0,o=(r?r.indexOf(n):1)===0?"th":"td",c=a&&a.type==="table"?a.align:void 0,d=c?c.length:n.children.length;let h=-1;const m=[];for(;++h<d;){const x=n.children[h],v={},b=c?c[h]:void 0;b&&(v.align=b);let k={type:"element",tagName:o,properties:v,children:[]};x&&(k.children=t.all(x),t.patch(x,k),k=t.applyData(x,k)),m.push(k)}const y={type:"element",tagName:"tr",properties:{},children:t.wrap(m,!0)};return t.patch(n,y),t.applyData(n,y)}function W4(t,n){const a={type:"element",tagName:"td",properties:{},children:t.all(n)};return t.patch(n,a),t.applyData(n,a)}const jy=9,Ny=32;function eN(t){const n=String(t),a=/\r?\n|\r/g;let r=a.exec(n),l=0;const o=[];for(;r;)o.push(Cy(n.slice(l,r.index),l>0,!0),r[0]),l=r.index+r[0].length,r=a.exec(n);return o.push(Cy(n.slice(l),l>0,!1)),o.join("")}function Cy(t,n,a){let r=0,l=t.length;if(n){let o=t.codePointAt(r);for(;o===jy||o===Ny;)r++,o=t.codePointAt(r)}if(a){let o=t.codePointAt(l-1);for(;o===jy||o===Ny;)l--,o=t.codePointAt(l-1)}return l>r?t.slice(r,l):""}function tN(t,n){const a={type:"text",value:eN(String(n.value))};return t.patch(n,a),t.applyData(n,a)}function nN(t,n){const a={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(n,a),t.applyData(n,a)}const iN={blockquote:O4,break:D4,code:L4,delete:z4,emphasis:U4,footnoteReference:M4,heading:B4,html:q4,imageReference:I4,image:H4,inlineCode:$4,linkReference:V4,link:P4,listItem:G4,list:K4,paragraph:F4,root:X4,strong:Q4,table:J4,tableCell:W4,tableRow:Z4,text:tN,thematicBreak:nN,toml:zo,yaml:zo,definition:zo,footnoteDefinition:zo};function zo(){}const yb=-1,du=0,qs=1,Wo=2,sh=3,lh=4,oh=5,uh=6,xb=7,bb=8,Ty=typeof self=="object"?self:globalThis,aN=(t,n)=>{const a=(l,o)=>(t.set(o,l),l),r=l=>{if(t.has(l))return t.get(l);const[o,c]=n[l];switch(o){case du:case yb:return a(c,l);case qs:{const d=a([],l);for(const h of c)d.push(r(h));return d}case Wo:{const d=a({},l);for(const[h,m]of c)d[r(h)]=r(m);return d}case sh:return a(new Date(c),l);case lh:{const{source:d,flags:h}=c;return a(new RegExp(d,h),l)}case oh:{const d=a(new Map,l);for(const[h,m]of c)d.set(r(h),r(m));return d}case uh:{const d=a(new Set,l);for(const h of c)d.add(r(h));return d}case xb:{const{name:d,message:h}=c;return a(new Ty[d](h),l)}case bb:return a(BigInt(c),l);case"BigInt":return a(Object(BigInt(c)),l);case"ArrayBuffer":return a(new Uint8Array(c).buffer,c);case"DataView":{const{buffer:d}=new Uint8Array(c);return a(new DataView(d),c)}}return a(new Ty[o](c),l)};return r},Ay=t=>aN(new Map,t)(0),gr="",{toString:rN}={},{keys:sN}=Object,Os=t=>{const n=typeof t;if(n!=="object"||!t)return[du,n];const a=rN.call(t).slice(8,-1);switch(a){case"Array":return[qs,gr];case"Object":return[Wo,gr];case"Date":return[sh,gr];case"RegExp":return[lh,gr];case"Map":return[oh,gr];case"Set":return[uh,gr];case"DataView":return[qs,a]}return a.includes("Array")?[qs,a]:a.includes("Error")?[xb,a]:[Wo,a]},Uo=([t,n])=>t===du&&(n==="function"||n==="symbol"),lN=(t,n,a,r)=>{const l=(c,d)=>{const h=r.push(c)-1;return a.set(d,h),h},o=c=>{if(a.has(c))return a.get(c);let[d,h]=Os(c);switch(d){case du:{let y=c;switch(h){case"bigint":d=bb,y=c.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+h);y=null;break;case"undefined":return l([yb],c)}return l([d,y],c)}case qs:{if(h){let v=c;return h==="DataView"?v=new Uint8Array(c.buffer):h==="ArrayBuffer"&&(v=new Uint8Array(c)),l([h,[...v]],c)}const y=[],x=l([d,y],c);for(const v of c)y.push(o(v));return x}case Wo:{if(h)switch(h){case"BigInt":return l([h,c.toString()],c);case"Boolean":case"Number":case"String":return l([h,c.valueOf()],c)}if(n&&"toJSON"in c)return o(c.toJSON());const y=[],x=l([d,y],c);for(const v of sN(c))(t||!Uo(Os(c[v])))&&y.push([o(v),o(c[v])]);return x}case sh:return l([d,c.toISOString()],c);case lh:{const{source:y,flags:x}=c;return l([d,{source:y,flags:x}],c)}case oh:{const y=[],x=l([d,y],c);for(const[v,b]of c)(t||!(Uo(Os(v))||Uo(Os(b))))&&y.push([o(v),o(b)]);return x}case uh:{const y=[],x=l([d,y],c);for(const v of c)(t||!Uo(Os(v)))&&y.push(o(v));return x}}const{message:m}=c;return l([d,{name:h,message:m}],c)};return o},Ry=(t,{json:n,lossy:a}={})=>{const r=[];return lN(!(n||a),!!n,new Map,r)(t),r},eu=typeof structuredClone=="function"?(t,n)=>n&&("json"in n||"lossy"in n)?Ay(Ry(t,n)):structuredClone(t):(t,n)=>Ay(Ry(t,n));function oN(t,n){const a=[{type:"text",value:""}];return n>1&&a.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(n)}]}),a}function uN(t,n){return"Back to reference "+(t+1)+(n>1?"-"+n:"")}function cN(t){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",a=t.options.footnoteBackContent||oN,r=t.options.footnoteBackLabel||uN,l=t.options.footnoteLabel||"Footnotes",o=t.options.footnoteLabelTagName||"h2",c=t.options.footnoteLabelProperties||{className:["sr-only"]},d=[];let h=-1;for(;++h<t.footnoteOrder.length;){const m=t.footnoteById.get(t.footnoteOrder[h]);if(!m)continue;const y=t.all(m),x=String(m.identifier).toUpperCase(),v=Or(x.toLowerCase());let b=0;const k=[],N=t.footnoteCounts.get(x);for(;N!==void 0&&++b<=N;){k.length>0&&k.push({type:"text",value:" "});let L=typeof a=="string"?a:a(h,b);typeof L=="string"&&(L={type:"text",value:L}),k.push({type:"element",tagName:"a",properties:{href:"#"+n+"fnref-"+v+(b>1?"-"+b:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(h,b),className:["data-footnote-backref"]},children:Array.isArray(L)?L:[L]})}const C=y[y.length-1];if(C&&C.type==="element"&&C.tagName==="p"){const L=C.children[C.children.length-1];L&&L.type==="text"?L.value+=" ":C.children.push({type:"text",value:" "}),C.children.push(...k)}else y.push(...k);const E={type:"element",tagName:"li",properties:{id:n+"fn-"+v},children:t.wrap(y,!0)};t.patch(m,E),d.push(E)}if(d.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...eu(c),id:"footnote-label"},children:[{type:"text",value:l}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(d,!0)},{type:"text",value:`
`}]}}const vb=(function(t){if(t==null)return mN;if(typeof t=="function")return fu(t);if(typeof t=="object")return Array.isArray(t)?dN(t):fN(t);if(typeof t=="string")return hN(t);throw new Error("Expected function, string, or object as test")});function dN(t){const n=[];let a=-1;for(;++a<t.length;)n[a]=vb(t[a]);return fu(r);function r(...l){let o=-1;for(;++o<n.length;)if(n[o].apply(this,l))return!0;return!1}}function fN(t){const n=t;return fu(a);function a(r){const l=r;let o;for(o in t)if(l[o]!==n[o])return!1;return!0}}function hN(t){return fu(n);function n(a){return a&&a.type===t}}function fu(t){return n;function n(a,r,l){return!!(pN(a)&&t.call(this,a,typeof r=="number"?r:void 0,l||void 0))}}function mN(){return!0}function pN(t){return t!==null&&typeof t=="object"&&"type"in t}const wb=[],gN=!0,Oy=!1,yN="skip";function xN(t,n,a,r){let l;typeof n=="function"&&typeof a!="function"?(r=a,a=n):l=n;const o=vb(l),c=r?-1:1;d(t,void 0,[])();function d(h,m,y){const x=h&&typeof h=="object"?h:{};if(typeof x.type=="string"){const b=typeof x.tagName=="string"?x.tagName:typeof x.name=="string"?x.name:void 0;Object.defineProperty(v,"name",{value:"node ("+(h.type+(b?"<"+b+">":""))+")"})}return v;function v(){let b=wb,k,N,C;if((!n||o(h,m,y[y.length-1]||void 0))&&(b=bN(a(h,y)),b[0]===Oy))return b;if("children"in h&&h.children){const E=h;if(E.children&&b[0]!==yN)for(N=(r?E.children.length:-1)+c,C=y.concat(E);N>-1&&N<E.children.length;){const L=E.children[N];if(k=d(L,N,C)(),k[0]===Oy)return k;N=typeof k[1]=="number"?k[1]:N+c}}return b}}}function bN(t){return Array.isArray(t)?t:typeof t=="number"?[gN,t]:t==null?wb:[t]}function _b(t,n,a,r){let l,o,c;typeof n=="function"&&typeof a!="function"?(o=void 0,c=n,l=a):(o=n,c=a,l=r),xN(t,o,d,l);function d(h,m){const y=m[m.length-1],x=y?y.children.indexOf(h):void 0;return c(h,x,y)}}const Of={}.hasOwnProperty,vN={};function wN(t,n){const a=n||vN,r=new Map,l=new Map,o=new Map,c={...iN,...a.handlers},d={all:m,applyData:SN,definitionById:r,footnoteById:l,footnoteCounts:o,footnoteOrder:[],handlers:c,one:h,options:a,patch:_N,wrap:EN};return _b(t,function(y){if(y.type==="definition"||y.type==="footnoteDefinition"){const x=y.type==="definition"?r:l,v=String(y.identifier).toUpperCase();x.has(v)||x.set(v,y)}}),d;function h(y,x){const v=y.type,b=d.handlers[v];if(Of.call(d.handlers,v)&&b)return b(d,y,x);if(d.options.passThrough&&d.options.passThrough.includes(v)){if("children"in y){const{children:N,...C}=y,E=eu(C);return E.children=d.all(y),E}return eu(y)}return(d.options.unknownHandler||kN)(d,y,x)}function m(y){const x=[];if("children"in y){const v=y.children;let b=-1;for(;++b<v.length;){const k=d.one(v[b],y);if(k){if(b&&v[b-1].type==="break"&&(!Array.isArray(k)&&k.type==="text"&&(k.value=Dy(k.value)),!Array.isArray(k)&&k.type==="element")){const N=k.children[0];N&&N.type==="text"&&(N.value=Dy(N.value))}Array.isArray(k)?x.push(...k):x.push(k)}}}return x}}function _N(t,n){t.position&&(n.position=rj(t))}function SN(t,n){let a=n;if(t&&t.data){const r=t.data.hName,l=t.data.hChildren,o=t.data.hProperties;if(typeof r=="string")if(a.type==="element")a.tagName=r;else{const c="children"in a?a.children:[a];a={type:"element",tagName:r,properties:{},children:c}}a.type==="element"&&o&&Object.assign(a.properties,eu(o)),"children"in a&&a.children&&l!==null&&l!==void 0&&(a.children=l)}return a}function kN(t,n){const a=n.data||{},r="value"in n&&!(Of.call(a,"hProperties")||Of.call(a,"hChildren"))?{type:"text",value:n.value}:{type:"element",tagName:"div",properties:{},children:t.all(n)};return t.patch(n,r),t.applyData(n,r)}function EN(t,n){const a=[];let r=-1;for(n&&a.push({type:"text",value:`
`});++r<t.length;)r&&a.push({type:"text",value:`
`}),a.push(t[r]);return n&&t.length>0&&a.push({type:"text",value:`
`}),a}function Dy(t){let n=0,a=t.charCodeAt(n);for(;a===9||a===32;)n++,a=t.charCodeAt(n);return t.slice(n)}function Ly(t,n){const a=wN(t,n),r=a.one(t,void 0),l=cN(a),o=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return l&&o.children.push({type:"text",value:`
`},l),o}function jN(t,n){return t&&"run"in t?async function(a,r){const l=Ly(a,{file:r,...n});await t.run(l,r)}:function(a,r){return Ly(a,{file:r,...t||n})}}function zy(t){if(t)throw t}var Jd,Uy;function NN(){if(Uy)return Jd;Uy=1;var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,a=Object.defineProperty,r=Object.getOwnPropertyDescriptor,l=function(m){return typeof Array.isArray=="function"?Array.isArray(m):n.call(m)==="[object Array]"},o=function(m){if(!m||n.call(m)!=="[object Object]")return!1;var y=t.call(m,"constructor"),x=m.constructor&&m.constructor.prototype&&t.call(m.constructor.prototype,"isPrototypeOf");if(m.constructor&&!y&&!x)return!1;var v;for(v in m);return typeof v>"u"||t.call(m,v)},c=function(m,y){a&&y.name==="__proto__"?a(m,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):m[y.name]=y.newValue},d=function(m,y){if(y==="__proto__")if(t.call(m,y)){if(r)return r(m,y).value}else return;return m[y]};return Jd=function h(){var m,y,x,v,b,k,N=arguments[0],C=1,E=arguments.length,L=!1;for(typeof N=="boolean"&&(L=N,N=arguments[1]||{},C=2),(N==null||typeof N!="object"&&typeof N!="function")&&(N={});C<E;++C)if(m=arguments[C],m!=null)for(y in m)x=d(N,y),v=d(m,y),N!==v&&(L&&v&&(o(v)||(b=l(v)))?(b?(b=!1,k=x&&l(x)?x:[]):k=x&&o(x)?x:{},c(N,{name:y,newValue:h(L,k,v)})):typeof v<"u"&&c(N,{name:y,newValue:v}));return N},Jd}var CN=NN();const Zd=Py(CN);function Df(t){if(typeof t!="object"||t===null)return!1;const n=Object.getPrototypeOf(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function TN(){const t=[],n={run:a,use:r};return n;function a(...l){let o=-1;const c=l.pop();if(typeof c!="function")throw new TypeError("Expected function as last argument, not "+c);d(null,...l);function d(h,...m){const y=t[++o];let x=-1;if(h){c(h);return}for(;++x<l.length;)(m[x]===null||m[x]===void 0)&&(m[x]=l[x]);l=m,y?AN(y,d)(...m):c(null,...m)}}function r(l){if(typeof l!="function")throw new TypeError("Expected `middelware` to be a function, not "+l);return t.push(l),n}}function AN(t,n){let a;return r;function r(...c){const d=t.length>c.length;let h;d&&c.push(l);try{h=t.apply(this,c)}catch(m){const y=m;if(d&&a)throw y;return l(y)}d||(h&&h.then&&typeof h.then=="function"?h.then(o,l):h instanceof Error?l(h):o(h))}function l(c,...d){a||(a=!0,n(c,...d))}function o(c){l(null,c)}}const Mn={basename:RN,dirname:ON,extname:DN,join:LN,sep:"/"};function RN(t,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');al(t);let a=0,r=-1,l=t.length,o;if(n===void 0||n.length===0||n.length>t.length){for(;l--;)if(t.codePointAt(l)===47){if(o){a=l+1;break}}else r<0&&(o=!0,r=l+1);return r<0?"":t.slice(a,r)}if(n===t)return"";let c=-1,d=n.length-1;for(;l--;)if(t.codePointAt(l)===47){if(o){a=l+1;break}}else c<0&&(o=!0,c=l+1),d>-1&&(t.codePointAt(l)===n.codePointAt(d--)?d<0&&(r=l):(d=-1,r=c));return a===r?r=c:r<0&&(r=t.length),t.slice(a,r)}function ON(t){if(al(t),t.length===0)return".";let n=-1,a=t.length,r;for(;--a;)if(t.codePointAt(a)===47){if(r){n=a;break}}else r||(r=!0);return n<0?t.codePointAt(0)===47?"/":".":n===1&&t.codePointAt(0)===47?"//":t.slice(0,n)}function DN(t){al(t);let n=t.length,a=-1,r=0,l=-1,o=0,c;for(;n--;){const d=t.codePointAt(n);if(d===47){if(c){r=n+1;break}continue}a<0&&(c=!0,a=n+1),d===46?l<0?l=n:o!==1&&(o=1):l>-1&&(o=-1)}return l<0||a<0||o===0||o===1&&l===a-1&&l===r+1?"":t.slice(l,a)}function LN(...t){let n=-1,a;for(;++n<t.length;)al(t[n]),t[n]&&(a=a===void 0?t[n]:a+"/"+t[n]);return a===void 0?".":zN(a)}function zN(t){al(t);const n=t.codePointAt(0)===47;let a=UN(t,!n);return a.length===0&&!n&&(a="."),a.length>0&&t.codePointAt(t.length-1)===47&&(a+="/"),n?"/"+a:a}function UN(t,n){let a="",r=0,l=-1,o=0,c=-1,d,h;for(;++c<=t.length;){if(c<t.length)d=t.codePointAt(c);else{if(d===47)break;d=47}if(d===47){if(!(l===c-1||o===1))if(l!==c-1&&o===2){if(a.length<2||r!==2||a.codePointAt(a.length-1)!==46||a.codePointAt(a.length-2)!==46){if(a.length>2){if(h=a.lastIndexOf("/"),h!==a.length-1){h<0?(a="",r=0):(a=a.slice(0,h),r=a.length-1-a.lastIndexOf("/")),l=c,o=0;continue}}else if(a.length>0){a="",r=0,l=c,o=0;continue}}n&&(a=a.length>0?a+"/..":"..",r=2)}else a.length>0?a+="/"+t.slice(l+1,c):a=t.slice(l+1,c),r=c-l-1;l=c,o=0}else d===46&&o>-1?o++:o=-1}return a}function al(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const MN={cwd:BN};function BN(){return"/"}function Lf(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function qN(t){if(typeof t=="string")t=new URL(t);else if(!Lf(t)){const n=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw n.code="ERR_INVALID_ARG_TYPE",n}if(t.protocol!=="file:"){const n=new TypeError("The URL must be of scheme file");throw n.code="ERR_INVALID_URL_SCHEME",n}return IN(t)}function IN(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const n=t.pathname;let a=-1;for(;++a<n.length;)if(n.codePointAt(a)===37&&n.codePointAt(a+1)===50){const r=n.codePointAt(a+2);if(r===70||r===102){const l=new TypeError("File URL path must not include encoded / characters");throw l.code="ERR_INVALID_FILE_URL_PATH",l}}return decodeURIComponent(n)}const Wd=["history","path","basename","stem","extname","dirname"];class Sb{constructor(n){let a;n?Lf(n)?a={path:n}:typeof n=="string"||HN(n)?a={value:n}:a=n:a={},this.cwd="cwd"in a?"":MN.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Wd.length;){const o=Wd[r];o in a&&a[o]!==void 0&&a[o]!==null&&(this[o]=o==="history"?[...a[o]]:a[o])}let l;for(l in a)Wd.includes(l)||(this[l]=a[l])}get basename(){return typeof this.path=="string"?Mn.basename(this.path):void 0}set basename(n){tf(n,"basename"),ef(n,"basename"),this.path=Mn.join(this.dirname||"",n)}get dirname(){return typeof this.path=="string"?Mn.dirname(this.path):void 0}set dirname(n){My(this.basename,"dirname"),this.path=Mn.join(n||"",this.basename)}get extname(){return typeof this.path=="string"?Mn.extname(this.path):void 0}set extname(n){if(ef(n,"extname"),My(this.dirname,"extname"),n){if(n.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(n.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Mn.join(this.dirname,this.stem+(n||""))}get path(){return this.history[this.history.length-1]}set path(n){Lf(n)&&(n=qN(n)),tf(n,"path"),this.path!==n&&this.history.push(n)}get stem(){return typeof this.path=="string"?Mn.basename(this.path,this.extname):void 0}set stem(n){tf(n,"stem"),ef(n,"stem"),this.path=Mn.join(this.dirname||"",n+(this.extname||""))}fail(n,a,r){const l=this.message(n,a,r);throw l.fatal=!0,l}info(n,a,r){const l=this.message(n,a,r);return l.fatal=void 0,l}message(n,a,r){const l=new Ot(n,a,r);return this.path&&(l.name=this.path+":"+l.name,l.file=this.path),l.fatal=!1,this.messages.push(l),l}toString(n){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(n||void 0).decode(this.value)}}function ef(t,n){if(t&&t.includes(Mn.sep))throw new Error("`"+n+"` cannot be a path: did not expect `"+Mn.sep+"`")}function tf(t,n){if(!t)throw new Error("`"+n+"` cannot be empty")}function My(t,n){if(!t)throw new Error("Setting `"+n+"` requires `path` to be set too")}function HN(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const $N=(function(t){const r=this.constructor.prototype,l=r[t],o=function(){return l.apply(o,arguments)};return Object.setPrototypeOf(o,r),o}),VN={}.hasOwnProperty;class ch extends $N{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=TN()}copy(){const n=new ch;let a=-1;for(;++a<this.attachers.length;){const r=this.attachers[a];n.use(...r)}return n.data(Zd(!0,{},this.namespace)),n}data(n,a){return typeof n=="string"?arguments.length===2?(rf("data",this.frozen),this.namespace[n]=a,this):VN.call(this.namespace,n)&&this.namespace[n]||void 0:n?(rf("data",this.frozen),this.namespace=n,this):this.namespace}freeze(){if(this.frozen)return this;const n=this;for(;++this.freezeIndex<this.attachers.length;){const[a,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const l=a.call(n,...r);typeof l=="function"&&this.transformers.use(l)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(n){this.freeze();const a=Mo(n),r=this.parser||this.Parser;return nf("parse",r),r(String(a),a)}process(n,a){const r=this;return this.freeze(),nf("process",this.parser||this.Parser),af("process",this.compiler||this.Compiler),a?l(void 0,a):new Promise(l);function l(o,c){const d=Mo(n),h=r.parse(d);r.run(h,d,function(y,x,v){if(y||!x||!v)return m(y);const b=x,k=r.stringify(b,v);YN(k)?v.value=k:v.result=k,m(y,v)});function m(y,x){y||!x?c(y):o?o(x):a(void 0,x)}}}processSync(n){let a=!1,r;return this.freeze(),nf("processSync",this.parser||this.Parser),af("processSync",this.compiler||this.Compiler),this.process(n,l),qy("processSync","process",a),r;function l(o,c){a=!0,zy(o),r=c}}run(n,a,r){By(n),this.freeze();const l=this.transformers;return!r&&typeof a=="function"&&(r=a,a=void 0),r?o(void 0,r):new Promise(o);function o(c,d){const h=Mo(a);l.run(n,h,m);function m(y,x,v){const b=x||n;y?d(y):c?c(b):r(void 0,b,v)}}}runSync(n,a){let r=!1,l;return this.run(n,a,o),qy("runSync","run",r),l;function o(c,d){zy(c),l=d,r=!0}}stringify(n,a){this.freeze();const r=Mo(a),l=this.compiler||this.Compiler;return af("stringify",l),By(n),l(n,r)}use(n,...a){const r=this.attachers,l=this.namespace;if(rf("use",this.frozen),n!=null)if(typeof n=="function")h(n,a);else if(typeof n=="object")Array.isArray(n)?d(n):c(n);else throw new TypeError("Expected usable value, not `"+n+"`");return this;function o(m){if(typeof m=="function")h(m,[]);else if(typeof m=="object")if(Array.isArray(m)){const[y,...x]=m;h(y,x)}else c(m);else throw new TypeError("Expected usable value, not `"+m+"`")}function c(m){if(!("plugins"in m)&&!("settings"in m))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");d(m.plugins),m.settings&&(l.settings=Zd(!0,l.settings,m.settings))}function d(m){let y=-1;if(m!=null)if(Array.isArray(m))for(;++y<m.length;){const x=m[y];o(x)}else throw new TypeError("Expected a list of plugins, not `"+m+"`")}function h(m,y){let x=-1,v=-1;for(;++x<r.length;)if(r[x][0]===m){v=x;break}if(v===-1)r.push([m,...y]);else if(y.length>0){let[b,...k]=y;const N=r[v][1];Df(N)&&Df(b)&&(b=Zd(!0,N,b)),r[v]=[m,b,...k]}}}}const PN=new ch().freeze();function nf(t,n){if(typeof n!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function af(t,n){if(typeof n!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function rf(t,n){if(n)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function By(t){if(!Df(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function qy(t,n,a){if(!a)throw new Error("`"+t+"` finished async. Use `"+n+"` instead")}function Mo(t){return GN(t)?t:new Sb(t)}function GN(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function YN(t){return typeof t=="string"||KN(t)}function KN(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const FN="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Iy=[],Hy={allowDangerousHtml:!0},XN=/^(https?|ircs?|mailto|xmpp)$/i,QN=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function JN(t){const n=ZN(t),a=WN(t);return eC(n.runSync(n.parse(a),a),t)}function ZN(t){const n=t.rehypePlugins||Iy,a=t.remarkPlugins||Iy,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...Hy}:Hy;return PN().use(R4).use(a).use(jN,r).use(n)}function WN(t){const n=t.children||"",a=new Sb;return typeof n=="string"&&(a.value=n),a}function eC(t,n){const a=n.allowedElements,r=n.allowElement,l=n.components,o=n.disallowedElements,c=n.skipHtml,d=n.unwrapDisallowed,h=n.urlTransform||tC;for(const y of QN)Object.hasOwn(n,y.from)&&(""+y.from+(y.to?"use `"+y.to+"` instead":"remove it")+FN+y.id,void 0);return n.className&&(t={type:"element",tagName:"div",properties:{className:n.className},children:t.type==="root"?t.children:[t]}),_b(t,m),cj(t,{Fragment:p.Fragment,components:l,ignoreInvalidStyle:!0,jsx:p.jsx,jsxs:p.jsxs,passKeys:!0,passNode:!0});function m(y,x,v){if(y.type==="raw"&&v&&typeof x=="number")return c?v.children.splice(x,1):v.children[x]={type:"text",value:y.value},x;if(y.type==="element"){let b;for(b in Fd)if(Object.hasOwn(Fd,b)&&Object.hasOwn(y.properties,b)){const k=y.properties[b],N=Fd[b];(N===null||N.includes(y.tagName))&&(y.properties[b]=h(String(k||""),b,y))}}if(y.type==="element"){let b=a?!a.includes(y.tagName):o?o.includes(y.tagName):!1;if(!b&&r&&typeof x=="number"&&(b=!r(y,x,v)),b&&v&&typeof x=="number")return d&&y.children?v.children.splice(x,1,...y.children):v.children.splice(x,1),x}}}function tC(t){const n=t.indexOf(":"),a=t.indexOf("?"),r=t.indexOf("#"),l=t.indexOf("/");return n===-1||l!==-1&&n>l||a!==-1&&n>a||r!==-1&&n>r||XN.test(t.slice(0,n))?t:""}function dh({content:t,className:n=""}){return p.jsx("div",{className:`prose max-w-none text-charcoal ${n}`,children:p.jsx(JN,{components:{h1:({children:a})=>p.jsx("h1",{className:"text-2xl font-bold text-navy mb-4",children:a}),h2:({children:a})=>p.jsx("h2",{className:"text-xl font-semibold text-navy mb-3 mt-6",children:a}),h3:({children:a})=>p.jsx("h3",{className:"text-base font-semibold text-navy mb-2 mt-4",children:a}),p:({children:a})=>p.jsx("p",{className:"text-sm text-charcoal mb-3 leading-relaxed",children:a}),ul:({children:a})=>p.jsx("ul",{className:"list-disc list-inside mb-3 space-y-1",children:a}),ol:({children:a})=>p.jsx("ol",{className:"list-decimal list-inside mb-3 space-y-1",children:a}),li:({children:a})=>p.jsx("li",{className:"text-sm text-charcoal",children:a}),a:({href:a,children:r})=>p.jsx("a",{href:a,className:"text-primark-blue hover:text-primark-blue-dark underline",children:r}),strong:({children:a})=>p.jsx("strong",{className:"font-semibold text-navy",children:a}),blockquote:({children:a})=>p.jsx("blockquote",{className:"border-l-4 border-primark-blue pl-4 italic text-mid-grey my-3",children:a}),hr:()=>p.jsx("hr",{className:"border-border-grey my-4"})},children:t})})}function kb({site:t,onComplete:n,loading:a=!1}){const[r,l]=S.useState(!1);return p.jsxs("div",{className:"space-y-6",children:[t.hs_video_url&&p.jsx("div",{className:"rounded-xl overflow-hidden bg-black aspect-video",children:p.jsx("iframe",{src:t.hs_video_url,className:"w-full h-full",allowFullScreen:!0,title:"Health & Safety Induction Video"})}),t.hs_written_content&&p.jsx("div",{className:"bg-light-grey rounded-xl p-5 max-h-96 overflow-y-auto",children:p.jsx(dh,{content:t.hs_written_content})}),p.jsxs("label",{className:"flex items-start gap-3 cursor-pointer group",children:[p.jsx("input",{type:"checkbox",checked:r,onChange:o=>l(o.target.checked),className:"mt-0.5 w-5 h-5 rounded border-border-grey text-primark-blue focus:ring-primark-blue shrink-0"}),p.jsxs("span",{className:"text-sm text-charcoal leading-snug group-hover:text-navy",children:["I confirm I have read and understood the Health & Safety induction for ",t.name,"."]})]}),p.jsx("button",{onClick:n,disabled:!r||a,className:"w-full bg-primark-blue text-white py-4 rounded-xl font-semibold hover:bg-primark-blue-dark transition-colors disabled:opacity-50 min-h-btn-primary",children:a?"Completing...":"Complete Induction"})]})}function Eb({documents:t,onAcceptAll:n,loading:a=!1}){const[r,l]=S.useState(new Set),o=t.length>0&&r.size===t.length;function c(d){l(h=>{const m=new Set(h);return m.has(d)?m.delete(d):m.add(d),m})}return p.jsxs("div",{className:"space-y-6",children:[t.map(d=>p.jsxs("div",{className:"border border-border-grey rounded-xl overflow-hidden",children:[p.jsx("div",{className:"bg-navy px-5 py-3",children:p.jsx("h3",{className:"text-white font-semibold text-base",children:d.document_name})}),p.jsx("div",{className:"p-5 max-h-72 overflow-y-auto bg-light-grey",children:p.jsx(dh,{content:d.document_content})}),p.jsx("div",{className:"px-5 py-4 border-t border-border-grey bg-white",children:p.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:r.has(d.id),onChange:()=>c(d.id),className:"w-5 h-5 rounded border-border-grey text-primark-blue focus:ring-primark-blue"}),p.jsxs("span",{className:"text-sm text-charcoal",children:["I accept the terms of this document: ",p.jsx("strong",{children:d.document_name})]})]})})]},d.id)),p.jsx("button",{onClick:n,disabled:!o||a,className:"w-full bg-primark-blue text-white py-4 rounded-xl font-semibold hover:bg-primark-blue-dark transition-colors disabled:opacity-50 min-h-btn-primary",children:a?"Saving...":"Accept All Documents"})]})}function nC(){const{visitId:t}=Bf(),n=Ft(),{user:a,site:r,activeEvacuation:l}=pt(),{getVisitById:o,updateVisit:c}=tl(),{checkInductionValid:d,completeInduction:h}=$x(),{getForVisitorSite:m}=Xf(),{checkDenyList:y}=Qf(),{sendNotification:x}=Ar(),{log:v}=Pn(),[b,k]=S.useState(null),[N,C]=S.useState(1),[E,L]=S.useState(!0),[R,P]=S.useState(!1),[W,z]=S.useState(null),[Y,te]=S.useState(!1),[ae,fe]=S.useState([]),[I,Z]=S.useState(null),[de,se]=S.useState(null),[K,M]=S.useState(!1);S.useEffect(()=>{!t||!r||o(t).then(async B=>{if(!B){L(!1);return}k(B);const{valid:j,record:ie}=await d(B.visitor.id,r);te(j),z(ie);const{data:ee}=await oe.from("visit_documents").select("*").eq("visit_id",B.id).eq("accepted",!1);fe(ee??[]),L(!1)})},[t,r,o,d]);async function J(){if(!(!b||!r)){if(l){we.error("Evacuation in progress  check-ins are suspended");return}if(b.status==="checked_in"){we.error("This visitor is already checked in");return}Y?ae.length===0?await A():C(3):C(2)}}async function ue(){if(!(!b||!r)){P(!0);try{await h(b.visitor.id,r.id,r.hs_content_version,b.id),te(!0),await v("induction_completed","induction_record",b.id,(a==null?void 0:a.id)??null,{visitor_id:b.visitor.id,content_version:r.hs_content_version}),ae.length===0?await A():C(3)}catch{we.error("Failed to complete induction")}finally{P(!1)}}}async function xe(){if(b){P(!0);try{const B=new Date().toISOString();await oe.from("visit_documents").update({accepted:!0,accepted_at:B}).eq("visit_id",b.id),await c(b.id,{documents_accepted:!0,documents_accepted_at:B}),await v("document_accepted","visit_document",b.id,(a==null?void 0:a.id)??null),await A()}catch{we.error("Failed to save document acceptance")}finally{P(!1)}}}async function A(){if(!b||!r)return;C(4);const B=await y(b.visitor,r.id);if(B){Z(B);const{data:j}=await oe.from("users").select("id").eq("site_id",r.id).in("role",["reception","site_admin"]).eq("is_active",!0);j&&await Promise.all(j.map(ie=>x({recipient_type:"user",recipient_user_id:ie.id,visit_id:b.id,notification_type:"deny_list_alert",title:`Denied visitor: ${b.visitor.name}`,body:`${b.visitor.name} from ${b.visitor.company??"Unknown"} attempted to check in but is on the deny list. Reason: ${B.reason}`}))),await v("deny_list_check_blocked","visit",b.id,(a==null?void 0:a.id)??null,{visitor_id:b.visitor.id,deny_list_id:B.id})}else Z(null),C(5),await T()}async function T(){if(!(!b||!r||!a)){P(!0);try{let B;b.visitor.visitor_type==="internal_staff"?B="unescorted":B=await m(b.visitor.id,r.id)?"unescorted":"awaiting_escort",se(B),await c(b.id,{status:"checked_in",actual_arrival:new Date().toISOString(),access_status:B,checked_in_by:a.id});const{data:j}=await oe.from("visit_host_contacts").select("user_id").eq("visit_id",b.id);j&&(await Promise.all(j.map(ie=>x({recipient_type:"user",recipient_user_id:ie.user_id,visit_id:b.id,notification_type:"checkin_host_alert",title:`${b.visitor.name} has checked in`,body:`${b.visitor.name} from ${b.visitor.company??"Unknown"} has arrived for: ${b.purpose}. Access: ${B==="unescorted"?"Unescorted":"Awaiting Escort"}.`}))),B==="awaiting_escort"&&await Promise.all(j.map(ie=>x({recipient_type:"user",recipient_user_id:ie.user_id,visit_id:b.id,notification_type:"escort_required",title:`Visitor awaiting escort: ${b.visitor.name}`,body:`${b.visitor.name} from ${b.visitor.company??"Unknown"} has checked in for ${b.purpose}. They require an escort  please acknowledge and collect.`,requires_acknowledgement:!0})))),await v("visit_checked_in","visit",b.id,a.id,{visitor_id:b.visitor.id,access_status:B}),M(!0)}catch{we.error("Check-in failed")}finally{P(!1)}}}return E?p.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[p.jsx("div",{className:"h-8 w-48 skeleton rounded mb-6"}),p.jsx("div",{className:"space-y-4",children:[...Array(4)].map((B,j)=>p.jsx("div",{className:"h-16 skeleton rounded-xl"},j))})]}):b?N===4&&I?p.jsxs("div",{className:"min-h-screen bg-danger flex flex-col items-center justify-center p-6 text-white text-center",children:[p.jsx("svg",{className:"w-20 h-20 mb-6",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),p.jsx("h1",{className:"text-3xl font-bold mb-3",children:"THIS VISITOR IS ON THE DENY LIST"}),p.jsx("p",{className:"text-xl font-semibold mb-2",children:b.visitor.name}),p.jsx("p",{className:"text-red-200 mb-6 max-w-md",children:I.reason}),p.jsx("p",{className:"text-sm text-red-200 mb-8",children:"Check-in blocked. Reception and site admin have been notified."}),p.jsx("button",{onClick:()=>n("/"),className:"bg-white text-danger font-bold px-8 py-4 rounded-xl hover:bg-red-50 transition-colors",children:"Return to Dashboard"})]}):K&&de?p.jsx("div",{className:"min-h-screen bg-light-grey flex flex-col items-center justify-center p-6 text-center",children:p.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-10 max-w-md w-full",children:[p.jsx("div",{className:"w-20 h-20 bg-success-bg rounded-full flex items-center justify-center mx-auto mb-6",children:p.jsx("svg",{className:"w-10 h-10 text-success",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),p.jsxs("h1",{className:"text-2xl font-bold text-navy mb-2",children:[b.visitor.name," checked in"]}),p.jsx("p",{className:"text-mid-grey mb-6",children:b.visitor.company}),p.jsx("div",{className:`inline-flex items-center px-5 py-3 rounded-full text-base font-semibold mb-8 ${de==="unescorted"?"bg-success-bg text-success":"bg-warning-bg text-warning"}`,children:de==="unescorted"?"Unescorted Access":"Awaiting Escort  Host Notified"}),p.jsx("button",{onClick:()=>n("/"),className:"w-full bg-primark-blue text-white py-4 rounded-xl font-semibold hover:bg-primark-blue-dark transition-colors min-h-btn-primary",children:"Back to Dashboard"})]})}):p.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[p.jsx(Vn,{title:"Check-In",subtitle:`${b.visitor.name}  ${b.visitor.company??""}`,backTo:"/"}),p.jsx("div",{className:"flex items-center gap-2 mb-8",children:[1,2,3].map(B=>p.jsxs("div",{className:`flex items-center gap-2 ${B<[1,2,3].length?"flex-1":""}`,children:[p.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold shrink-0 ${N>B?"bg-success text-white":N===B?"bg-primark-blue text-white":"bg-light-grey text-mid-grey"}`,children:N>B?"":B}),B<3&&p.jsx("div",{className:`flex-1 h-0.5 ${N>B?"bg-success":"bg-border-grey"}`})]},B))}),N===1&&p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 space-y-4",children:[p.jsx("h2",{className:"text-lg font-semibold text-navy",children:"Confirm Visit Details"}),l&&p.jsx("div",{className:"bg-danger-bg border border-danger rounded-lg p-3",children:p.jsx("p",{className:"text-sm font-semibold text-danger",children:"Evacuation in progress  check-ins are suspended"})}),p.jsxs("dl",{className:"space-y-3",children:[p.jsx(pa,{label:"Visitor",value:b.visitor.name}),p.jsx(pa,{label:"Company",value:b.visitor.company??""}),p.jsx(pa,{label:"Type",value:b.visitor.visitor_type==="internal_staff"?"Internal Staff":"Third Party"}),p.jsx(pa,{label:"Purpose",value:b.purpose}),p.jsx(pa,{label:"Host",value:b.host.name}),p.jsx(pa,{label:"Planned Arrival",value:Rt(b.planned_arrival,"absolute")}),p.jsx(pa,{label:"Planned Departure",value:Rt(b.planned_departure,"absolute")}),p.jsxs("div",{children:[p.jsx("dt",{className:"text-xs font-medium text-mid-grey uppercase tracking-wide mb-1",children:"Pre-Arrival Status"}),p.jsxs("dd",{className:"flex gap-3",children:[p.jsxs("span",{className:`text-sm font-medium ${b.induction_completed?"text-success":"text-warning"}`,children:[b.induction_completed?"":""," H&S Induction"]}),p.jsxs("span",{className:`text-sm font-medium ${b.documents_accepted?"text-success":"text-mid-grey"}`,children:[b.documents_accepted?"":""," Documents"]})]})]})]}),p.jsx("button",{onClick:J,disabled:!!l,className:"w-full bg-primark-blue text-white py-4 rounded-xl font-semibold hover:bg-primark-blue-dark transition-colors disabled:opacity-50 min-h-btn-primary",children:"Confirm & Continue"})]}),N===2&&r&&p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6",children:[p.jsx("h2",{className:"text-lg font-semibold text-navy mb-2",children:"Health & Safety Induction"}),p.jsx("p",{className:"text-sm text-mid-grey mb-6",children:W?"Induction is outdated or expired  visitor must re-complete.":"No induction on record for this site."}),p.jsx(kb,{site:r,onComplete:ue,loading:R})]}),N===3&&p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6",children:[p.jsx("h2",{className:"text-lg font-semibold text-navy mb-2",children:"Document Acceptance"}),p.jsx("p",{className:"text-sm text-mid-grey mb-6",children:"Please review and accept the following documents before proceeding."}),p.jsx(Eb,{documents:ae,onAcceptAll:xe,loading:R})]}),N===4&&!I&&p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 text-center py-12",children:[p.jsx("div",{className:"w-12 h-12 border-4 border-primark-blue border-t-transparent rounded-full animate-spin mx-auto mb-4"}),p.jsx("p",{className:"text-mid-grey",children:"Checking security records..."})]}),N===5&&!K&&p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-6 text-center py-12",children:[p.jsx("div",{className:"w-12 h-12 border-4 border-primark-blue border-t-transparent rounded-full animate-spin mx-auto mb-4"}),p.jsx("p",{className:"text-mid-grey",children:"Completing check-in..."})]})]}):p.jsx("div",{className:"p-6 text-center text-mid-grey",children:"Visit not found"})}function pa({label:t,value:n}){return p.jsxs("div",{className:"flex",children:[p.jsx("dt",{className:"text-xs font-medium text-mid-grey uppercase tracking-wide w-36 shrink-0 pt-0.5",children:t}),p.jsx("dd",{className:"text-sm text-charcoal flex-1",children:n})]})}const iC={visit_scheduled:"",visit_cancelled:"",visit_amended:"",checkin_host_alert:"",escort_required:"",escalation:"",escalation_reception:"",host_reminder:"",pre_approval_request:"",pre_approval_decision:"",deny_list_alert:"",evacuation_activated:"",walk_in_host_confirm:""};function jb({notification:t,onClick:n,onAcknowledge:a}){return p.jsxs("div",{className:`flex items-start gap-3 p-4 rounded-xl cursor-pointer transition-colors ${t.is_read?"bg-white":"bg-primark-blue-light"} hover:bg-light-grey`,onClick:n,children:[p.jsx("div",{className:"w-10 h-10 rounded-full bg-white shadow-card flex items-center justify-center text-lg shrink-0",children:iC[t.notification_type]??""}),p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsx("p",{className:`text-sm font-semibold ${t.is_read?"text-charcoal":"text-navy"} leading-snug`,children:t.title}),p.jsx("span",{className:"text-xs text-mid-grey whitespace-nowrap shrink-0",children:Rt(t.created_at,"relative")})]}),p.jsx("p",{className:"text-xs text-mid-grey mt-0.5 line-clamp-2",children:t.body}),t.requires_acknowledgement&&!t.acknowledged_at&&a&&p.jsx("button",{onClick:r=>{r.stopPropagation(),a()},className:"mt-2 text-xs font-semibold text-white bg-primark-blue px-3 py-1.5 rounded-lg hover:bg-primark-blue-dark transition-colors",children:"Acknowledge  I'm coming to collect"}),t.acknowledged_at&&p.jsxs("p",{className:"mt-1 text-xs text-success font-medium",children:[" Acknowledged ",Rt(t.acknowledged_at,"relative")]})]}),!t.is_read&&p.jsx("div",{className:"w-2.5 h-2.5 bg-primark-blue rounded-full shrink-0 mt-1.5"})]})}function aC(){const{user:t}=pt(),{notifications:n,loading:a,markRead:r,acknowledge:l}=Ar(t==null?void 0:t.id),{log:o}=Pn();async function c(h){await l(h),t&&await o("notification_acknowledged","notification",h,t.id)}const d=n.filter(h=>!h.is_read).length;return p.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[p.jsx(Vn,{title:"Inbox",subtitle:d>0?`${d} unread notification${d>1?"s":""}`:"All caught up"}),a?p.jsx("div",{className:"space-y-3",children:[...Array(4)].map((h,m)=>p.jsx("div",{className:"h-20 skeleton rounded-xl"},m))}):n.length===0?p.jsx(va,{icon:"",title:"No notifications",message:"You'll receive alerts here for visitor check-ins, escort requests, and other events."}):p.jsx("div",{className:"bg-white rounded-xl shadow-card divide-y divide-border-grey overflow-hidden",children:n.map(h=>p.jsx(jb,{notification:h,onClick:()=>r(h.id),onAcknowledge:h.requires_acknowledgement&&!h.acknowledged_at?()=>c(h.id):void 0},h.id))})]})}function rC(){const{token:t}=Bf(),{getByToken:n,updateVisitor:a}=wa(),{getVisitsForVisitor:r,updateVisit:l}=tl(),{checkInductionValid:o,completeInduction:c}=$x(),[d,h]=S.useState(null),[m,y]=S.useState(""),[x,v]=S.useState(!0),[b,k]=S.useState(null),[N,C]=S.useState([]),[E,L]=S.useState([]),[R,P]=S.useState(null),[W,z]=S.useState(!1),[Y,te]=S.useState("home"),[ae,fe]=S.useState(!1),[I,Z]=S.useState(""),[de,se]=S.useState(!1),[K,M]=S.useState(!1),[J,ue]=S.useState(!1),{notifications:xe,markRead:A}=Ar(void 0,d==null?void 0:d.id);S.useEffect(()=>{if(!t){y("Invalid link"),v(!1);return}n(t).then(async me=>{if(!me||me.is_anonymised){y("This link has expired or is invalid."),v(!1);return}h(me),Z(me.phone??"");const Ke=await r(me.id);if(C(Ke),Ke.length>0){const{data:Ut}=await oe.from("sites").select("*").eq("id",Ke[0].site_id).single();if(Ut){k(Ut);const{valid:Mt}=await o(me.id,Ut);z(!Mt)}const Qt=Ke.filter(Mt=>Mt.status==="scheduled").map(Mt=>Mt.id);if(Qt.length>0){const{data:Mt}=await oe.from("visit_documents").select("*").in("visit_id",Qt).eq("accepted",!1),Gn=Mt??[];L(Gn),Gn.length>0&&P(Qt[0])}}v(!1)})},[t,n,r,o]);async function T(){if(d){se(!0);try{await a(d.id,{phone:I||null}),h(me=>me&&{...me,phone:I||null}),fe(!1),we.success("Phone number updated")}catch{we.error("Failed to update phone")}finally{se(!1)}}}async function B(){!d||!b||!R||(await c(d.id,b.id,b.hs_content_version,R),z(!1),te("home"),we.success("Induction completed"))}async function j(){if(!R)return;const me=new Date().toISOString();await oe.from("visit_documents").update({accepted:!0,accepted_at:me}).eq("visit_id",R),await l(R,{documents_accepted:!0,documents_accepted_at:me}),L([]),te("home"),we.success("Documents accepted")}async function ie(){if(!d||!b)return;const me=N.find(Ke=>Ke.status==="scheduled"&&kf(Ke.planned_arrival));if(!me){we.error("No visit scheduled for today");return}M(!0);try{await l(me.id,{status:"checked_in",actual_arrival:new Date().toISOString(),access_status:"unescorted"});const Ke=await r(d.id);C(Ke),we.success("Checked in successfully")}catch{we.error("Check-in failed")}finally{M(!1)}}async function ee(){if(!d)return;const me=N.find(Ke=>Ke.status==="checked_in");if(!me){we.error("No active check-in found");return}ue(!0);try{await l(me.id,{status:"departed",actual_departure:new Date().toISOString()});const Ke=await r(d.id);C(Ke),we.success("Signed out  goodbye!")}catch{we.error("Sign-out failed")}finally{ue(!1)}}async function ce(me){if(!d||!b)return;const{data:Ke}=await oe.from("users").select("id").eq("site_id",b.id).eq("role","site_admin").eq("is_active",!0);Ke&&Ke.length>0&&await oe.from("notifications").insert(Ke.map(Ut=>({recipient_type:"user",recipient_user_id:Ut.id,notification_type:"checkin_host_alert",title:`GDPR ${me==="access"?"Data Access":"Data Deletion"} Request`,body:`Visitor ${d.name} (${d.email}) has submitted a GDPR ${me==="access"?"data access":"data deletion"} request. Please action via the Visitor Profile screen.`}))),we.success(`${me==="access"?"Data access":"Data deletion"} request submitted`),te("home")}if(x)return p.jsx("div",{className:"min-h-screen bg-light-grey flex items-center justify-center",children:p.jsx("div",{className:"w-10 h-10 border-4 border-primark-blue border-t-transparent rounded-full animate-spin"})});if(m||!d)return p.jsx("div",{className:"min-h-screen bg-light-grey flex items-center justify-center p-6",children:p.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-10 max-w-sm w-full text-center",children:[p.jsx("div",{className:"text-5xl mb-4",children:""}),p.jsx("h1",{className:"text-xl font-bold text-navy mb-2",children:"Link expired or invalid"}),p.jsx("p",{className:"text-mid-grey text-sm",children:m||"This self-service link is no longer valid."})]})});const ke=N.find(me=>me.status==="scheduled"&&kf(me.planned_arrival)),Ue=N.find(me=>me.status==="checked_in"),re=N.filter(me=>me.status==="scheduled"),tt=xe.filter(me=>!me.is_read).length;return p.jsxs("div",{className:"min-h-screen bg-light-grey",children:[p.jsx("div",{className:"bg-navy px-6 py-4",children:p.jsxs("div",{className:"max-w-lg mx-auto flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-primark-blue font-bold uppercase tracking-[0.15em] text-lg",children:"PRIMARK"}),p.jsx("div",{className:"text-mid-grey text-xs",children:"SafePass  Visitor Portal"})]}),p.jsx("span",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${d.visitor_type==="internal_staff"?"bg-primark-blue-light text-primark-blue":"bg-light-grey text-mid-grey"}`,children:d.visitor_type==="internal_staff"?"Internal Staff":"Third Party"})]})}),p.jsxs("div",{className:"max-w-lg mx-auto p-6 space-y-4",children:[Y==="home"&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[p.jsxs("div",{className:"flex items-start justify-between mb-4",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-xl font-bold text-navy",children:d.name}),p.jsx("p",{className:"text-sm text-mid-grey",children:d.email}),d.company&&p.jsx("p",{className:"text-sm text-mid-grey",children:d.company})]}),p.jsx("div",{className:"w-12 h-12 rounded-full bg-primark-blue-light flex items-center justify-center text-primark-blue font-bold text-xl",children:d.name.charAt(0).toUpperCase()})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsx("span",{className:"text-xs font-medium text-mid-grey uppercase tracking-wide",children:"Phone"}),!ae&&p.jsx("button",{onClick:()=>fe(!0),className:"text-xs text-primark-blue hover:underline",children:"Edit"})]}),ae?p.jsxs("div",{className:"flex gap-2",children:[p.jsx("input",{type:"tel",value:I,onChange:me=>Z(me.target.value),className:"flex-1 px-3 py-2 border border-border-grey rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primark-blue",placeholder:"+353 85 123 4567"}),p.jsx("button",{onClick:T,disabled:de,className:"px-3 py-2 bg-primark-blue text-white rounded-lg text-sm font-medium disabled:opacity-50",children:"Save"}),p.jsx("button",{onClick:()=>fe(!1),className:"px-3 py-2 border border-border-grey rounded-lg text-sm text-charcoal",children:"Cancel"})]}):p.jsx("p",{className:"text-sm text-charcoal",children:d.phone??"Not provided"})]})]}),(W||E.length>0||ke&&d.visitor_type==="internal_staff"||Ue)&&p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[p.jsx("h2",{className:"text-base font-semibold text-navy mb-4",children:"Actions Required"}),p.jsxs("div",{className:"space-y-3",children:[W&&b&&p.jsx(Bo,{icon:"",label:"Complete H&S Induction",description:"Required before your next visit",colour:"amber",onClick:()=>te("induction")}),E.length>0&&p.jsx(Bo,{icon:"",label:`Review Documents (${E.length})`,description:"Documents requiring your acceptance",colour:"amber",onClick:()=>te("documents")}),ke&&d.visitor_type==="internal_staff"&&!Ue&&p.jsx(Bo,{icon:"",label:"Check In",description:`${ke.purpose}  ${Rt(ke.planned_arrival,"time-only")}`,colour:"blue",onClick:ie,loading:K}),Ue&&p.jsx(Bo,{icon:"",label:"Sign Out",description:`Currently checked in  Since ${Rt(Ue.actual_arrival,"time-only")}`,colour:"green",onClick:ee,loading:J})]})]}),re.length>0&&p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[p.jsx("h2",{className:"text-base font-semibold text-navy mb-4",children:"Upcoming Visits"}),p.jsx("div",{className:"space-y-3",children:re.slice(0,5).map(me=>p.jsxs("div",{className:"p-3 bg-light-grey rounded-lg",children:[p.jsx("div",{className:"text-sm font-semibold text-navy",children:me.purpose}),p.jsxs("div",{className:"text-xs text-mid-grey mt-0.5",children:[Rt(me.planned_arrival,"absolute"),"  Host: ",me.host.name]})]},me.id))})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("button",{onClick:()=>te("notifications"),className:"relative p-4 bg-white rounded-xl shadow-card text-left hover:bg-light-grey transition-colors",children:[p.jsx("div",{className:"text-2xl mb-1",children:""}),p.jsx("div",{className:"text-sm font-semibold text-navy",children:"Notifications"}),tt>0&&p.jsx("span",{className:"absolute top-3 right-3 bg-danger text-white text-xs font-bold rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1",children:tt})]}),p.jsxs("button",{onClick:()=>te("gdpr"),className:"p-4 bg-white rounded-xl shadow-card text-left hover:bg-light-grey transition-colors",children:[p.jsx("div",{className:"text-2xl mb-1",children:""}),p.jsx("div",{className:"text-sm font-semibold text-navy",children:"Privacy & Data"})]})]})]}),Y==="induction"&&b&&p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[p.jsxs("div",{className:"flex items-center justify-between mb-5",children:[p.jsx("h2",{className:"text-base font-semibold text-navy",children:"H&S Induction"}),p.jsx("button",{onClick:()=>te("home"),className:"text-sm text-primark-blue hover:underline",children:" Back"})]}),p.jsx(kb,{site:b,onComplete:B})]}),Y==="documents"&&p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[p.jsxs("div",{className:"flex items-center justify-between mb-5",children:[p.jsx("h2",{className:"text-base font-semibold text-navy",children:"Documents"}),p.jsx("button",{onClick:()=>te("home"),className:"text-sm text-primark-blue hover:underline",children:" Back"})]}),p.jsx(Eb,{documents:E,onAcceptAll:j})]}),Y==="notifications"&&p.jsxs("div",{className:"bg-white rounded-xl shadow-card overflow-hidden",children:[p.jsxs("div",{className:"px-5 py-4 border-b border-border-grey flex items-center justify-between",children:[p.jsx("h2",{className:"text-base font-semibold text-navy",children:"Notifications"}),p.jsx("button",{onClick:()=>te("home"),className:"text-sm text-primark-blue hover:underline",children:" Back"})]}),xe.length===0?p.jsx("div",{className:"p-8 text-center text-mid-grey text-sm",children:"No notifications yet"}):p.jsx("div",{className:"divide-y divide-border-grey",children:xe.map(me=>p.jsx(jb,{notification:me,onClick:()=>A(me.id)},me.id))})]}),Y==="gdpr"&&p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5 space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-base font-semibold text-navy",children:"Privacy & Data Rights"}),p.jsx("button",{onClick:()=>te("home"),className:"text-sm text-primark-blue hover:underline",children:" Back"})]}),p.jsx("p",{className:"text-sm text-charcoal",children:"Under GDPR, you have the right to access, correct, and request deletion of your personal data held by Primark."}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("button",{onClick:()=>ce("access"),className:"w-full py-3 border border-primark-blue text-primark-blue rounded-xl font-semibold text-sm hover:bg-primark-blue-light transition-colors",children:"Request My Data"}),p.jsx("button",{onClick:()=>ce("deletion"),className:"w-full py-3 border border-danger text-danger rounded-xl font-semibold text-sm hover:bg-danger-bg transition-colors",children:"Request Data Deletion"})]}),p.jsx("p",{className:"text-xs text-mid-grey",children:"Your request will be sent to the site data controller. Note: some data may be retained for safety compliance and audit purposes."})]})]})]})}function Bo({icon:t,label:n,description:a,colour:r,onClick:l,loading:o=!1}){const c={blue:"border-primark-blue bg-primark-blue-light text-primark-blue",amber:"border-warning bg-warning-bg text-warning",green:"border-success bg-success-bg text-success"}[r];return p.jsxs("button",{onClick:l,disabled:o,className:`w-full flex items-center gap-3 p-4 border-2 rounded-xl text-left transition-opacity disabled:opacity-60 ${c}`,children:[p.jsx("span",{className:"text-2xl shrink-0",children:t}),p.jsxs("div",{className:"flex-1",children:[p.jsx("div",{className:"font-semibold text-sm",children:o?"Please wait...":n}),a&&p.jsx("div",{className:"text-xs opacity-75 mt-0.5",children:a})]}),p.jsx("svg",{className:"w-4 h-4 shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}function sC(){const{user:t,site:n,isSiteAdmin:a}=pt(),{getAll:r,getForUser:l,approve:o,reject:c,revoke:d,request:h}=Xf(),{search:m,visitors:y}=wa(),{sendNotification:x}=Ar(),{log:v}=Pn(),[b,k]=S.useState([]),[N,C]=S.useState(!0),[E,L]=S.useState(null),[R,P]=S.useState(""),[W,z]=S.useState(null),[Y,te]=S.useState(!1),[ae,fe]=S.useState(null),[I,Z]=S.useState(""),[de,se]=S.useState(""),[K,M]=S.useState(!1),J=S.useCallback(async()=>{if(!n||!t)return;C(!0);const ee=a?await r(n.id):await l(t.id),ce=await Promise.all(ee.map(async ke=>{const{data:Ue}=await oe.from("visitors").select("*").eq("id",ke.visitor_id).single(),{data:re}=await oe.from("users").select("id,name,username,email,site_id,role,is_active,created_at,updated_at").eq("id",ke.requested_by).single();return{...ke,visitor:Ue,requester:re}}));k(ce),C(!1)},[n,t,a,r,l]);S.useEffect(()=>{J()},[J]);async function ue(ee,ce){if(!(!t||!n))try{await o(ee,t.id,n.pre_approval_default_days),await x({recipient_type:"user",recipient_user_id:t.id,notification_type:"pre_approval_decision",title:"Pre-approval request approved",body:`Unescorted access has been approved. The approval expires in ${n.pre_approval_default_days} days.`}),await v("pre_approval_approved","pre_approval",ee,t.id,{visitor_id:ce}),we.success("Pre-approval approved"),J()}catch{we.error("Failed to approve")}}async function xe(){if(!(!E||!t))try{await c(E,R,t.id),await v("pre_approval_rejected","pre_approval",E,t.id,{reason:R}),we.success("Request rejected"),L(null),P(""),J()}catch{we.error("Failed to reject")}}async function A(ee){if(t)try{await d(ee,t.id),await v("pre_approval_revoked","pre_approval",ee,t.id),we.success("Pre-approval revoked"),z(null),J()}catch{we.error("Failed to revoke")}}async function T(){if(!(!ae||!t||!n)){M(!0);try{await h({visitor_id:ae.id,site_id:n.id,requested_by:t.id,reason:I});const{data:ee}=await oe.from("users").select("id").eq("site_id",n.id).eq("role","site_admin").eq("is_active",!0);ee&&await Promise.all(ee.map(ce=>x({recipient_type:"user",recipient_user_id:ce.id,notification_type:"pre_approval_request",title:`Pre-approval request: ${ae.name}`,body:`${t.name} has requested unescorted access for ${ae.name} (${ae.company??"No company"}). Justification: ${I||"None provided"}`}))),await v("pre_approval_requested","pre_approval",null,t.id,{visitor_id:ae.id}),we.success("Request submitted"),te(!1),fe(null),Z(""),J()}catch{we.error("Failed to submit request")}finally{M(!1)}}}const B=b.filter(ee=>ee.status==="pending"),j=b.filter(ee=>ee.status==="approved"),ie=b.filter(ee=>!["pending","approved"].includes(ee.status));return p.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[p.jsx(Vn,{title:"Pre-Approvals",subtitle:"Manage unescorted access for third-party visitors",actions:a?void 0:p.jsx("button",{onClick:()=>te(!0),className:"bg-primark-blue text-white px-5 py-2.5 rounded-xl font-semibold text-sm hover:bg-primark-blue-dark transition-colors min-h-btn",children:"+ Request Access"})}),Y&&!a&&p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5 mb-6",children:[p.jsx("h2",{className:"text-base font-semibold text-navy mb-4",children:"Request Unescorted Access"}),ae?p.jsxs("div",{className:"flex items-center justify-between p-3 bg-primark-blue-light rounded-lg mb-4",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-sm font-semibold text-navy",children:ae.name}),p.jsx("div",{className:"text-xs text-mid-grey",children:ae.email})]}),p.jsx("button",{onClick:()=>fe(null),className:"text-xs text-primark-blue hover:underline",children:"Change"})]}):p.jsxs("div",{className:"mb-4",children:[p.jsx(nl,{placeholder:"Search for a third-party visitor...",onSearch:ee=>{se(ee),ee&&m(ee)},className:"mb-2"}),de&&y.filter(ee=>ee.visitor_type==="third_party").length>0&&p.jsx("div",{className:"border border-border-grey rounded-lg divide-y max-h-40 overflow-y-auto",children:y.filter(ee=>ee.visitor_type==="third_party").map(ee=>p.jsxs("button",{type:"button",onClick:()=>{fe(ee),se("")},className:"w-full text-left px-4 py-2.5 hover:bg-light-grey text-sm",children:[ee.name,"  ",ee.company]},ee.id))})]}),p.jsxs("div",{className:"mb-4",children:[p.jsx("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:"Justification (optional)"}),p.jsx("textarea",{value:I,onChange:ee=>Z(ee.target.value),rows:3,placeholder:"Why does this visitor need unescorted access?",className:"w-full px-3 py-2.5 border border-border-grey rounded-lg text-sm resize-none focus:outline-none focus:ring-2 focus:ring-primark-blue"})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>te(!1),className:"flex-1 py-2.5 border border-border-grey rounded-xl text-sm text-charcoal",children:"Cancel"}),p.jsx("button",{onClick:T,disabled:!ae||K,className:"flex-1 py-2.5 bg-primark-blue text-white rounded-xl text-sm font-semibold disabled:opacity-50",children:K?"Submitting...":"Submit Request"})]})]}),N?p.jsx("div",{className:"space-y-3",children:[...Array(3)].map((ee,ce)=>p.jsx("div",{className:"h-20 skeleton rounded-xl"},ce))}):p.jsxs("div",{className:"space-y-6",children:[B.length>0&&p.jsx(sf,{title:"Pending Requests",items:B,onApprove:a?ue:void 0,onReject:a?ee=>L(ee):void 0}),j.length>0&&p.jsx(sf,{title:"Active Approvals",items:j,onRevoke:a?ee=>z(ee):void 0}),ie.length>0&&p.jsx(sf,{title:"History",items:ie}),b.length===0&&p.jsx(va,{icon:"",title:"No pre-approvals",message:"No pre-approval requests yet."})]}),E&&p.jsx(Hn,{title:"Reject pre-approval request",message:"Please provide a reason for rejection.",confirmLabel:"Reject",variant:"danger",onConfirm:xe,onCancel:()=>{L(null),P("")},children:p.jsx("textarea",{value:R,onChange:ee=>P(ee.target.value),placeholder:"Reason for rejection (required)",rows:3,className:"w-full px-3 py-2 border border-border-grey rounded-lg text-sm resize-none focus:outline-none focus:ring-2 focus:ring-primark-blue"})}),W&&p.jsx(Hn,{title:"Revoke this pre-approval?",message:"This will immediately revoke the visitor's unescorted access status. They will require an escort on their next visit.",confirmLabel:"Revoke Access",variant:"danger",onConfirm:()=>A(W),onCancel:()=>z(null)})]})}function sf({title:t,items:n,onApprove:a,onReject:r,onRevoke:l}){return p.jsxs("div",{className:"bg-white rounded-xl shadow-card overflow-hidden",children:[p.jsx("div",{className:"px-5 py-3 border-b border-border-grey",children:p.jsxs("h2",{className:"text-sm font-semibold text-navy uppercase tracking-wide",children:[t," (",n.length,")"]})}),p.jsx("div",{className:"divide-y divide-border-grey",children:n.map(o=>{var c,d,h;return p.jsxs("div",{className:"px-5 py-4 flex items-center justify-between gap-4",children:[p.jsxs("div",{className:"flex-1 min-w-0",children:[p.jsx("div",{className:"text-sm font-semibold text-navy",children:((c=o.visitor)==null?void 0:c.name)??"Unknown visitor"}),p.jsxs("div",{className:"text-xs text-mid-grey",children:[(d=o.visitor)==null?void 0:d.company,"  Requested by ",((h=o.requester)==null?void 0:h.name)??""]}),o.expires_at&&p.jsxs("div",{className:"text-xs text-mid-grey",children:["Expires ",Rt(o.expires_at,"date-only")]}),o.reason&&p.jsxs("div",{className:"text-xs text-charcoal mt-1 italic",children:['"',o.reason,'"']})]}),p.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[p.jsx(Zo,{status:o.status}),a&&o.status==="pending"&&p.jsx("button",{onClick:()=>a(o.id,o.visitor_id),className:"text-xs font-semibold text-white bg-success px-3 py-1.5 rounded-lg hover:opacity-90",children:"Approve"}),r&&o.status==="pending"&&p.jsx("button",{onClick:()=>r(o.id),className:"text-xs font-semibold text-danger border border-danger px-3 py-1.5 rounded-lg hover:bg-danger-bg",children:"Reject"}),l&&o.status==="approved"&&p.jsx("button",{onClick:()=>l(o.id),className:"text-xs font-semibold text-danger border border-danger px-3 py-1.5 rounded-lg hover:bg-danger-bg",children:"Revoke"})]})]},o.id)})})]})}function lC(){const{user:t,site:n}=pt(),{getDenyListEntries:a,addToDenyList:r,removeDenyListEntry:l}=Qf(),{search:o,visitors:c}=wa(),{log:d}=Pn(),[h,m]=S.useState([]),[y,x]=S.useState(!0),[v,b]=S.useState(!1),[k,N]=S.useState(null),[C,E]=S.useState(null),[L,R]=S.useState(""),[P,W]=S.useState(""),[z,Y]=S.useState(""),[te,ae]=S.useState(!0),[fe,I]=S.useState(""),[Z,de]=S.useState(""),[se,K]=S.useState(!1),M=S.useCallback(async()=>{if(!n)return;x(!0);const T=await a(n.id);m(T),x(!1)},[n,a]);S.useEffect(()=>{M()},[M]);async function J(){if(!t||!n)return;if(!z.trim()){we.error("Reason is required");return}const T=(C==null?void 0:C.name)||L.trim();if(!T){we.error("Visitor name is required");return}K(!0);try{await r({visitor_id:C==null?void 0:C.id,visitor_name:T,visitor_email:(C==null?void 0:C.email)||P.trim()||void 0,site_id:n.id,reason:z.trim(),is_permanent:te,expires_at:!te&&fe?new Date(fe).toISOString():void 0,added_by:t.id}),await d("deny_list_added","deny_list",null,t.id,{visitor_name:T}),we.success("Added to deny list"),xe(),M()}catch{we.error("Failed to add to deny list")}finally{K(!1)}}async function ue(T){if(t)try{await l(T),await d("deny_list_removed","deny_list",T,t.id),we.success("Entry removed"),N(null),M()}catch{we.error("Failed to remove entry")}}function xe(){E(null),R(""),W(""),Y(""),ae(!0),I(""),de(""),b(!1)}const A=new Date().toISOString().slice(0,10);return p.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[p.jsx(Vn,{title:"Deny List",subtitle:"Manage visitors who are not permitted on-site",actions:p.jsx("button",{onClick:()=>b(!0),className:"bg-danger text-white px-5 py-2.5 rounded-xl font-semibold text-sm hover:bg-red-700 transition-colors min-h-btn",children:"+ Add to Deny List"})}),v&&p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5 mb-6 space-y-4",children:[p.jsx("h2",{className:"text-base font-semibold text-navy",children:"Add to Deny List"}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:"Link to existing visitor profile (optional)"}),C?p.jsxs("div",{className:"flex items-center justify-between p-3 bg-primark-blue-light rounded-lg",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-sm font-semibold text-navy",children:C.name}),p.jsx("div",{className:"text-xs text-mid-grey",children:C.email})]}),p.jsx("button",{onClick:()=>E(null),className:"text-xs text-primark-blue hover:underline",children:"Remove link"})]}):p.jsxs("div",{children:[p.jsx(nl,{placeholder:"Search for visitor to link...",onSearch:T=>{de(T),T&&o(T)},className:"mb-2"}),Z&&c.length>0&&p.jsx("div",{className:"border border-border-grey rounded-lg divide-y max-h-40 overflow-y-auto",children:c.map(T=>p.jsxs("button",{type:"button",onClick:()=>{E(T),de("")},className:"w-full text-left px-4 py-2.5 hover:bg-light-grey text-sm",children:[T.name,"  ",T.email]},T.id))})]})]}),!C&&p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:["Name ",p.jsx("span",{className:"text-danger",children:"*"})]}),p.jsx("input",{type:"text",value:L,onChange:T=>R(T.target.value),placeholder:"Full name",className:"w-full px-3 py-2.5 border border-border-grey rounded-lg text-sm min-h-input focus:outline-none focus:ring-2 focus:ring-primark-blue"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:"Email"}),p.jsx("input",{type:"email",value:P,onChange:T=>W(T.target.value),placeholder:"email@example.com",className:"w-full px-3 py-2.5 border border-border-grey rounded-lg text-sm min-h-input focus:outline-none focus:ring-2 focus:ring-primark-blue"})]})]}),p.jsxs("div",{children:[p.jsxs("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:["Reason ",p.jsx("span",{className:"text-danger",children:"*"})]}),p.jsx("textarea",{value:z,onChange:T=>Y(T.target.value),rows:3,placeholder:"Reason for denial (required)",className:"w-full px-3 py-2.5 border border-border-grey rounded-lg text-sm resize-none focus:outline-none focus:ring-2 focus:ring-primark-blue"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[p.jsx("input",{type:"checkbox",checked:te,onChange:T=>ae(T.target.checked),className:"w-4 h-4 rounded border-border-grey text-primark-blue focus:ring-primark-blue"}),p.jsx("span",{className:"text-sm text-charcoal font-medium",children:"Permanent ban"})]}),!te&&p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-medium text-mid-grey uppercase tracking-wide mr-2",children:"Expires"}),p.jsx("input",{type:"date",value:fe,onChange:T=>I(T.target.value),min:A,className:"px-3 py-1.5 border border-border-grey rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primark-blue"})]})]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:xe,className:"flex-1 py-2.5 border border-border-grey rounded-xl text-sm text-charcoal",children:"Cancel"}),p.jsx("button",{onClick:J,disabled:se,className:"flex-1 py-2.5 bg-danger text-white rounded-xl text-sm font-semibold hover:bg-red-700 disabled:opacity-50",children:se?"Adding...":"Add to Deny List"})]})]}),y?p.jsx("div",{className:"space-y-3",children:[...Array(3)].map((T,B)=>p.jsx("div",{className:"h-16 skeleton rounded-xl"},B))}):h.length===0?p.jsx(va,{icon:"",title:"Deny list is empty",message:"No visitors are currently on the deny list."}):p.jsx("div",{className:"bg-white rounded-xl shadow-card overflow-hidden",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-light-grey",children:[p.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-mid-grey uppercase tracking-wide",children:"Visitor"}),p.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-mid-grey uppercase tracking-wide hidden sm:table-cell",children:"Reason"}),p.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-mid-grey uppercase tracking-wide hidden md:table-cell",children:"Expiry"}),p.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-mid-grey uppercase tracking-wide",children:"Status"}),p.jsx("th",{className:"py-3 px-5"})]})}),p.jsx("tbody",{children:h.map(T=>{const B=T.is_active&&(T.is_permanent||!T.expires_at||new Date(T.expires_at)>new Date);return p.jsxs("tr",{className:"border-t border-border-grey hover:bg-light-grey",children:[p.jsxs("td",{className:"py-4 px-5",children:[p.jsx("div",{className:"text-sm font-semibold text-navy",children:T.visitor_name}),T.visitor_email&&p.jsx("div",{className:"text-xs text-mid-grey",children:T.visitor_email})]}),p.jsx("td",{className:"py-4 px-5 hidden sm:table-cell",children:p.jsx("div",{className:"text-sm text-charcoal max-w-xs truncate",children:T.reason})}),p.jsx("td",{className:"py-4 px-5 hidden md:table-cell",children:p.jsx("div",{className:"text-sm text-charcoal",children:T.is_permanent?"Permanent":T.expires_at?Rt(T.expires_at,"date-only"):""})}),p.jsx("td",{className:"py-4 px-5",children:p.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${B?"bg-danger-bg text-danger":"bg-light-grey text-mid-grey"}`,children:B?"Active":"Expired"})}),p.jsx("td",{className:"py-4 px-5",children:p.jsx("button",{onClick:()=>N(T.id),className:"text-xs text-mid-grey hover:text-danger transition-colors",children:"Remove"})})]},T.id)})})]})}),k&&p.jsx(Hn,{title:"Remove deny list entry?",message:"This visitor will no longer be blocked from checking in.",confirmLabel:"Remove Entry",variant:"danger",onConfirm:()=>ue(k),onCancel:()=>N(null)})]})}function oC(){const{user:t,site:n}=pt(),{log:a}=Pn(),[r,l]=S.useState((n==null?void 0:n.hs_video_url)??""),[o,c]=S.useState((n==null?void 0:n.hs_written_content)??""),[d,h]=S.useState((n==null?void 0:n.notification_escalation_minutes)??10),[m,y]=S.useState((n==null?void 0:n.pre_approval_default_days)??90),[x,v]=S.useState(!1),[b,k]=S.useState(!1),[N,C]=S.useState(!1);S.useEffect(()=>{n&&(l(n.hs_video_url??""),c(n.hs_written_content??""),h(n.notification_escalation_minutes),y(n.pre_approval_default_days))},[n]);async function E(){if(!(!t||!n)){C(!0);try{const R=n.hs_content_version+1;await oe.from("sites").update({hs_video_url:r.trim()||null,hs_written_content:o,hs_content_version:R,updated_at:new Date().toISOString()}).eq("id",n.id),await a("hs_content_published","site",n.id,t.id,{new_version:R,old_version:n.hs_content_version}),we.success(`H&S content published (v${R})  all visitors must re-complete induction`),v(!1)}catch{we.error("Failed to publish content")}finally{C(!1)}}}async function L(){if(!(!t||!n)){C(!0);try{await oe.from("sites").update({notification_escalation_minutes:d,pre_approval_default_days:m,updated_at:new Date().toISOString()}).eq("id",n.id),await a("site_config_updated","site",n.id,t.id,{notification_escalation_minutes:d,pre_approval_default_days:m}),we.success("Settings saved")}catch{we.error("Failed to save settings")}finally{C(!1)}}}return p.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[p.jsx(Vn,{title:"Site Configuration",subtitle:n==null?void 0:n.name}),p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5 mb-6",children:[p.jsx("h2",{className:"text-base font-semibold text-navy mb-4",children:"Site Details"}),p.jsxs("dl",{className:"grid grid-cols-2 gap-4 text-sm",children:[p.jsxs("div",{children:[p.jsx("dt",{className:"text-xs text-mid-grey uppercase tracking-wide mb-0.5",children:"Name"}),p.jsx("dd",{className:"text-charcoal",children:n==null?void 0:n.name})]}),p.jsxs("div",{children:[p.jsx("dt",{className:"text-xs text-mid-grey uppercase tracking-wide mb-0.5",children:"Site Code"}),p.jsx("dd",{className:"text-charcoal",children:n==null?void 0:n.site_code})]}),p.jsxs("div",{children:[p.jsx("dt",{className:"text-xs text-mid-grey uppercase tracking-wide mb-0.5",children:"Address"}),p.jsx("dd",{className:"text-charcoal",children:(n==null?void 0:n.address)??""})]}),p.jsxs("div",{children:[p.jsx("dt",{className:"text-xs text-mid-grey uppercase tracking-wide mb-0.5",children:"H&S Content Version"}),p.jsxs("dd",{className:"text-charcoal font-semibold",children:["v",n==null?void 0:n.hs_content_version]})]})]})]}),p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5 mb-6 space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("h2",{className:"text-base font-semibold text-navy",children:"Health & Safety Content"}),p.jsx("button",{onClick:()=>k(R=>!R),className:"text-sm text-primark-blue hover:underline",children:b?"Edit":"Preview"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:"Video URL"}),p.jsx("input",{type:"url",value:r,onChange:R=>l(R.target.value),placeholder:"https://www.youtube.com/embed/...",className:"w-full px-3 py-2.5 border border-border-grey rounded-lg text-sm min-h-input focus:outline-none focus:ring-2 focus:ring-primark-blue"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:"Written Content (Markdown)"}),b?p.jsx("div",{className:"border border-border-grey rounded-xl p-4 min-h-64 bg-light-grey",children:p.jsx(dh,{content:o})}):p.jsx("textarea",{value:o,onChange:R=>c(R.target.value),rows:12,className:"w-full px-3 py-2.5 border border-border-grey rounded-lg text-sm font-mono resize-y focus:outline-none focus:ring-2 focus:ring-primark-blue",placeholder:`## Welcome to Primark

Enter H&S content in Markdown format...`})]}),p.jsx("div",{className:"bg-warning-bg border border-warning rounded-lg p-3",children:p.jsx("p",{className:"text-sm text-warning font-medium",children:" Saving H&S content increments the version number and requires ALL visitors to re-complete their induction on their next visit."})}),p.jsx("button",{onClick:()=>v(!0),className:"bg-primark-blue text-white px-6 py-3 rounded-xl font-semibold text-sm hover:bg-primark-blue-dark transition-colors min-h-btn",children:"Save & Publish H&S Content"})]}),p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-5",children:[p.jsx("h2",{className:"text-base font-semibold text-navy mb-4",children:"Notification Settings"}),p.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:"Escort Escalation Timeout (minutes)"}),p.jsx("input",{type:"number",min:1,max:60,value:d,onChange:R=>h(Number(R.target.value)),className:"w-full px-3 py-2.5 border border-border-grey rounded-lg text-sm min-h-input focus:outline-none focus:ring-2 focus:ring-primark-blue"}),p.jsx("p",{className:"text-xs text-mid-grey mt-1",children:"Time before escalating to backup contact if host doesn't acknowledge"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:"Pre-Approval Default Duration (days)"}),p.jsx("input",{type:"number",min:1,max:365,value:m,onChange:R=>y(Number(R.target.value)),className:"w-full px-3 py-2.5 border border-border-grey rounded-lg text-sm min-h-input focus:outline-none focus:ring-2 focus:ring-primark-blue"}),p.jsx("p",{className:"text-xs text-mid-grey mt-1",children:"How long a pre-approval lasts before expiry"})]})]}),p.jsx("button",{onClick:L,disabled:N,className:"mt-5 bg-primark-blue text-white px-6 py-3 rounded-xl font-semibold text-sm hover:bg-primark-blue-dark transition-colors disabled:opacity-50 min-h-btn",children:N?"Saving...":"Save Settings"})]}),x&&p.jsx(Hn,{title:"Publish new H&S content?",message:`This will increment the H&S content version to v${((n==null?void 0:n.hs_content_version)??0)+1} and require ALL visitors to re-complete their induction on their next visit. This cannot be undone.`,confirmLabel:N?"Publishing...":"Publish",variant:"danger",onConfirm:E,onCancel:()=>v(!1)})]})}function uC(){const t=S.useCallback(async(l,o,c)=>{const{data:d,error:h}=await oe.from("evacuation_events").insert({site_id:l,activated_by:o,headcount_at_activation:c}).select().single();if(h)throw h;return d},[]),n=S.useCallback(async(l,o,c)=>{const{error:d}=await oe.from("evacuation_events").update({closed_at:new Date().toISOString(),closed_by:o,notes:c??null}).eq("id",l);if(d)throw d},[]),a=S.useCallback(async(l,o)=>{const{error:c}=await oe.from("evacuation_events").update({headcount_accounted:o}).eq("id",l);if(c)throw c},[]),r=S.useCallback(async l=>{const{data:o}=await oe.from("visits").select(`
        *,
        visitor:visitors(*),
        host:users!visits_host_user_id_fkey(id,name,username,email,site_id,role,is_active,created_at,updated_at)
      `).eq("site_id",l).eq("status","checked_in").order("actual_arrival");return o??[]},[]);return{activate:t,close:n,updateHeadcount:a,getCheckedInVisitors:r}}function cC(){const t=Ft(),[n]=Vf(),{user:a,site:r,activeEvacuation:l}=pt(),{activate:o,close:c,updateHeadcount:d,getCheckedInVisitors:h}=uC(),{sendNotification:m}=Ar(),{log:y}=Pn(),[x,v]=S.useState([]),[b,k]=S.useState(new Set),[N,C]=S.useState(!1),[E,L]=S.useState(n.get("activate")==="true"),[R,P]=S.useState(!1),[W,z]=S.useState(""),[Y,te]=S.useState(!1),ae=S.useRef(!1);S.useEffect(()=>{l&&r&&!ae.current&&(ae.current=!0,h(r.id).then(v))},[l,r,h]);async function fe(){if(!(!a||!r)){C(!0);try{const K=await h(r.id),M=await o(r.id,a.id,K.length);v(K);const{data:J}=await oe.from("users").select("id").eq("site_id",r.id).eq("is_active",!0);J&&await Promise.all(J.map(ue=>m({recipient_type:"user",recipient_user_id:ue.id,notification_type:"evacuation_activated",title:" EVACUATION ACTIVATED",body:`Emergency evacuation has been activated at ${r.name} by ${a.name}. Please proceed to the assembly point.`}))),await y("evacuation_activated","evacuation_event",M.id,a.id,{headcount:K.length}),L(!1),we.error("Evacuation activated",{duration:1e4})}catch{we.error("Failed to activate evacuation")}finally{C(!1)}}}async function I(K){const M=new Set(b);M.has(K)?M.delete(K):M.add(K),k(M),l&&await d(l.id,M.size)}async function Z(){if(!(!a||!l)){te(!0);try{await c(l.id,a.id,W),await y("evacuation_closed","evacuation_event",l.id,a.id,{headcount_at_activation:l.headcount_at_activation,headcount_accounted:b.size,notes:W}),we.success("Evacuation closed  normal operations resumed"),P(!1),t("/")}catch{we.error("Failed to close evacuation")}finally{te(!1)}}}if(!l&&!E)return p.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[p.jsxs("div",{className:"bg-white rounded-xl shadow-card p-8 text-center",children:[p.jsx("div",{className:"w-16 h-16 bg-danger-bg rounded-full flex items-center justify-center mx-auto mb-4",children:p.jsx("svg",{className:"w-8 h-8 text-danger",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),p.jsx("h2",{className:"text-xl font-bold text-navy mb-2",children:"Emergency Evacuation"}),p.jsx("p",{className:"text-mid-grey mb-6 text-sm",children:"No active evacuation event. Use this only in a genuine emergency."}),p.jsx("button",{onClick:()=>L(!0),className:"bg-danger text-white px-8 py-4 rounded-xl font-bold text-base hover:bg-red-700 transition-colors",children:"Activate Evacuation"})]}),E&&p.jsx(Hn,{title:"Activate Emergency Evacuation?",message:"This will suspend all check-ins and sign-outs and display a full-screen evacuation alert to all users. Only use in a genuine emergency.",confirmLabel:N?"Activating...":"Activate Evacuation",variant:"danger",onConfirm:fe,onCancel:()=>L(!1)})]});const de=x.filter(K=>K.visitor.visitor_type==="internal_staff"),se=x.filter(K=>K.visitor.visitor_type==="third_party");return p.jsxs("div",{className:"min-h-screen bg-alert-red text-white no-print",children:[p.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[p.jsxs("div",{className:"text-center py-8 border-4 border-white/30 rounded-2xl mb-8 animate-pulse",children:[p.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),p.jsx("h1",{className:"text-4xl font-black uppercase tracking-widest mb-2",children:"EMERGENCY EVACUATION ACTIVE"}),p.jsx("p",{className:"text-red-200",children:"Check-ins and sign-outs are suspended"})]}),p.jsxs("div",{className:"bg-alert-red-dark rounded-xl p-5 mb-6 flex items-center justify-between",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-4xl font-black",children:x.length}),p.jsx("div",{className:"text-red-200 text-sm",children:"Visitors on-site"})]}),p.jsx("div",{className:"text-4xl font-bold text-red-200",children:"vs"}),p.jsxs("div",{className:"text-right",children:[p.jsx("div",{className:"text-4xl font-black text-white",children:b.size}),p.jsx("div",{className:"text-red-200 text-sm",children:"Accounted for"})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("div",{className:`text-4xl font-black ${b.size>=x.length?"text-green-300":"text-yellow-300"}`,children:x.length-b.size}),p.jsx("div",{className:"text-red-200 text-sm",children:"Unaccounted"})]})]}),p.jsxs("div",{className:"flex gap-4 mb-6",children:[p.jsx("button",{onClick:()=>window.print(),className:"flex-1 bg-white text-alert-red font-bold py-3 rounded-xl hover:bg-red-50 transition-colors",children:"Print Headcount List"}),p.jsx("button",{onClick:()=>P(!0),className:"flex-1 bg-alert-red-dark text-white font-bold py-3 rounded-xl border-2 border-white hover:bg-red-900 transition-colors",children:"Close Evacuation"})]}),de.length>0&&p.jsx($y,{title:"Internal Staff",visitors:de,accounted:b,onToggle:I}),se.length>0&&p.jsx($y,{title:"Third Party Visitors",visitors:se,accounted:b,onToggle:I}),x.length===0&&p.jsx("div",{className:"text-center py-12 text-red-200",children:p.jsx("p",{className:"text-xl font-semibold",children:"No visitors currently on-site"})})]}),E&&p.jsx(Hn,{title:"Activate Emergency Evacuation?",message:"This will suspend all check-ins and sign-outs and display a full-screen evacuation alert to all users.",confirmLabel:N?"Activating...":"Activate Evacuation",variant:"danger",onConfirm:fe,onCancel:()=>L(!1)}),R&&p.jsx(Hn,{title:"Close evacuation event?",message:"This will end the evacuation, remove the alert from all screens, and resume normal operations.",confirmLabel:Y?"Closing...":"Close Evacuation",variant:"danger",onConfirm:Z,onCancel:()=>P(!1),children:p.jsx("textarea",{value:W,onChange:K=>z(K.target.value),placeholder:"Optional notes about the incident...",rows:3,className:"w-full px-3 py-2 border border-border-grey rounded-lg text-sm text-charcoal resize-none focus:outline-none"})})]})}function $y({title:t,visitors:n,accounted:a,onToggle:r}){return p.jsxs("div",{className:"mb-6",children:[p.jsxs("h2",{className:"text-lg font-bold uppercase tracking-wide mb-3 text-red-200",children:[t," (",n.length,")"]}),p.jsx("div",{className:"space-y-2",children:n.map(l=>p.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl transition-colors ${a.has(l.id)?"bg-green-900/40 border-2 border-green-400":"bg-alert-red-dark"}`,children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("input",{type:"checkbox",checked:a.has(l.id),onChange:()=>r(l.id),className:"w-6 h-6 rounded border-white text-green-500 focus:ring-green-400"}),p.jsxs("div",{children:[p.jsx("div",{className:"font-semibold text-white",children:l.visitor.name}),p.jsxs("div",{className:"text-sm text-red-200",children:[l.visitor.company,"  Host: ",l.host.name,"  In since ",Rt(l.actual_arrival,"time-only")]})]})]}),a.has(l.id)&&p.jsx("span",{className:"text-green-300 font-bold text-sm",children:" ACCOUNTED"})]},l.id))})]})}const Vy={name:"",username:"",email:"",role:"host",pin:"",pinConfirm:""};function dC(){const{user:t,site:n}=pt(),{log:a}=Pn(),[r,l]=S.useState([]),[o,c]=S.useState(!0),[d,h]=S.useState(!1),[m,y]=S.useState(null),[x,v]=S.useState(Vy),[b,k]=S.useState({}),[N,C]=S.useState(!1),[E,L]=S.useState(null),R=S.useCallback(async()=>{if(!n)return;c(!0);const{data:I}=await oe.from("users").select("id,name,username,email,site_id,role,is_active,created_at,updated_at").eq("site_id",n.id).order("name");l(I??[]),c(!1)},[n]);S.useEffect(()=>{R()},[R]);function P(){y(null),v(Vy),k({}),h(!0)}function W(I){y(I),v({name:I.name,username:I.username,email:I.email??"",role:I.role,pin:"",pinConfirm:""}),k({}),h(!0)}function z(I,Z){v(de=>({...de,[I]:Z})),k(de=>({...de,[I]:""}))}async function Y(){const I={};if((!x.name.trim()||x.name.trim().length<2)&&(I.name="Name must be at least 2 characters"),x.username.trim()||(I.username="Username is required"),x.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x.email)&&(I.email="Enter a valid email"),m?x.pin&&(/^\d{4}$/.test(x.pin)||(I.pin="PIN must be exactly 4 digits"),x.pin!==x.pinConfirm&&(I.pinConfirm="PINs do not match")):(/^\d{4}$/.test(x.pin)||(I.pin="PIN must be exactly 4 digits"),x.pin!==x.pinConfirm&&(I.pinConfirm="PINs do not match")),x.username.trim()&&x.username!==(m==null?void 0:m.username)){const{data:Z}=await oe.from("users").select("id").eq("username",x.username.trim()).maybeSingle();Z&&(I.username="Username already taken")}return k(I),Object.keys(I).length===0}async function te(){if(!(!t||!n||!await Y())){C(!0);try{if(m){const Z={name:x.name.trim(),email:x.email.trim()||null,role:x.role,updated_at:new Date().toISOString()};x.pin&&(Z.pin_hash=await ey(x.pin)),await oe.from("users").update(Z).eq("id",m.id),await a("user_updated","user",m.id,t.id,{role:x.role}),we.success("User updated")}else{const Z=await ey(x.pin),{data:de,error:se}=await oe.from("users").insert({name:x.name.trim(),username:x.username.trim().toLowerCase(),email:x.email.trim()||null,role:x.role,pin_hash:Z,site_id:n.id}).select().single();if(se)throw se;await a("user_created","user",de.id,t.id,{role:x.role}),we.success("User created")}h(!1),R()}catch{we.error("Failed to save user")}finally{C(!1)}}}async function ae(I){if(!t)return;const Z=r.filter(de=>de.role==="site_admin"&&de.is_active).length;if(I.role==="site_admin"&&Z<=1){we.error("Cannot deactivate the last site admin");return}try{await oe.from("users").update({is_active:!I.is_active,updated_at:new Date().toISOString()}).eq("id",I.id),await a(I.is_active?"user_deactivated":"user_updated","user",I.id,t.id),we.success(I.is_active?"User deactivated":"User activated"),L(null),R()}catch{we.error("Failed to update user")}}const fe={host:"bg-primark-blue-light text-primark-blue",reception:"bg-warning-bg text-warning",site_admin:"bg-danger-bg text-danger"};return p.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[p.jsx(Vn,{title:"Admin",subtitle:"Manage users and site settings",actions:p.jsxs("div",{className:"flex gap-3",children:[p.jsx("a",{href:"/site-config",className:"border border-border-grey text-charcoal px-4 py-2 rounded-xl text-sm font-medium hover:bg-light-grey transition-colors",children:"Site Config"}),p.jsx("button",{onClick:P,className:"bg-primark-blue text-white px-5 py-2.5 rounded-xl font-semibold text-sm hover:bg-primark-blue-dark transition-colors min-h-btn",children:"+ Add User"})]})}),d&&p.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[p.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>h(!1)}),p.jsxs("div",{className:"relative bg-white rounded-2xl shadow-xl w-full max-w-lg p-6 overflow-y-auto max-h-screen",children:[p.jsx("h2",{className:"text-lg font-semibold text-navy mb-5",children:m?"Edit User":"Add New User"}),p.jsxs("div",{className:"space-y-4",children:[p.jsx(yr,{label:"Full Name *",error:b.name,children:p.jsx("input",{value:x.name,onChange:I=>z("name",I.target.value),className:"input-base",placeholder:"Jane Smith"})}),p.jsx(yr,{label:"Username *",error:b.username,children:p.jsx("input",{value:x.username,onChange:I=>z("username",I.target.value),disabled:!!m,className:`input-base ${m?"bg-light-grey cursor-not-allowed":""}`,placeholder:"jane.s"})}),p.jsx(yr,{label:"Email",error:b.email,children:p.jsx("input",{type:"email",value:x.email,onChange:I=>z("email",I.target.value),className:"input-base",placeholder:"jane@primark.ie"})}),p.jsx(yr,{label:"Role *",children:p.jsxs("select",{value:x.role,onChange:I=>z("role",I.target.value),className:"input-base",children:[p.jsx("option",{value:"host",children:"Host"}),p.jsx("option",{value:"reception",children:"Reception"}),p.jsx("option",{value:"site_admin",children:"Site Admin"})]})}),p.jsx(yr,{label:m?"4-Digit PIN (leave blank to keep current)":"4-Digit PIN *",error:b.pin,children:p.jsx("input",{type:"password",value:x.pin,onChange:I=>z("pin",I.target.value.replace(/\D/g,"").slice(0,4)),className:"input-base",placeholder:"",maxLength:4})}),(x.pin||!m)&&p.jsx(yr,{label:"Confirm PIN *",error:b.pinConfirm,children:p.jsx("input",{type:"password",value:x.pinConfirm,onChange:I=>z("pinConfirm",I.target.value.replace(/\D/g,"").slice(0,4)),className:"input-base",placeholder:"",maxLength:4})})]}),p.jsxs("div",{className:"flex gap-3 mt-6",children:[p.jsx("button",{onClick:()=>h(!1),className:"flex-1 py-3 border border-border-grey rounded-xl text-charcoal text-sm font-medium",children:"Cancel"}),p.jsx("button",{onClick:te,disabled:N,className:"flex-1 py-3 bg-primark-blue text-white rounded-xl text-sm font-semibold disabled:opacity-50",children:N?"Saving...":m?"Save Changes":"Create User"})]})]})]}),o?p.jsx("div",{className:"space-y-3",children:[...Array(4)].map((I,Z)=>p.jsx("div",{className:"h-16 skeleton rounded-xl"},Z))}):r.length===0?p.jsx(va,{icon:"",title:"No users",action:{label:"Add First User",onClick:P}}):p.jsx("div",{className:"bg-white rounded-xl shadow-card overflow-hidden",children:p.jsxs("table",{className:"w-full",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-light-grey",children:[p.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-mid-grey uppercase tracking-wide",children:"User"}),p.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-mid-grey uppercase tracking-wide hidden sm:table-cell",children:"Username"}),p.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-mid-grey uppercase tracking-wide",children:"Role"}),p.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-mid-grey uppercase tracking-wide hidden md:table-cell",children:"Added"}),p.jsx("th",{className:"text-left py-3 px-5 text-xs font-medium text-mid-grey uppercase tracking-wide",children:"Status"}),p.jsx("th",{className:"py-3 px-5"})]})}),p.jsx("tbody",{children:r.map(I=>p.jsxs("tr",{className:`border-t border-border-grey ${I.is_active?"":"opacity-50"}`,children:[p.jsxs("td",{className:"py-4 px-5",children:[p.jsx("div",{className:"text-sm font-semibold text-navy",children:I.name}),I.email&&p.jsx("div",{className:"text-xs text-mid-grey",children:I.email})]}),p.jsx("td",{className:"py-4 px-5 hidden sm:table-cell text-sm text-charcoal",children:I.username}),p.jsx("td",{className:"py-4 px-5",children:p.jsx("span",{className:`text-xs font-semibold px-2 py-0.5 rounded-full ${fe[I.role]??"bg-light-grey text-mid-grey"}`,children:I.role.replace("_"," ")})}),p.jsx("td",{className:"py-4 px-5 hidden md:table-cell text-sm text-mid-grey",children:Rt(I.created_at,"date-only")}),p.jsx("td",{className:"py-4 px-5",children:p.jsx("span",{className:`text-xs font-medium ${I.is_active?"text-success":"text-mid-grey"}`,children:I.is_active?"Active":"Inactive"})}),p.jsx("td",{className:"py-4 px-5",children:p.jsxs("div",{className:"flex gap-3",children:[p.jsx("button",{onClick:()=>W(I),className:"text-xs text-primark-blue hover:underline",children:"Edit"}),p.jsx("button",{onClick:()=>L(I),className:`text-xs ${I.is_active?"text-danger":"text-success"} hover:underline`,children:I.is_active?"Deactivate":"Activate"})]})})]},I.id))})]})}),E&&p.jsx(Hn,{title:E.is_active?"Deactivate user?":"Activate user?",message:E.is_active?`${E.name} will no longer be able to log in. Historical records are preserved.`:`${E.name} will be able to log in again.`,confirmLabel:E.is_active?"Deactivate":"Activate",variant:E.is_active?"danger":"default",onConfirm:()=>ae(E),onCancel:()=>L(null)})]})}function yr({label:t,error:n,children:a}){return p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs font-medium text-mid-grey uppercase tracking-wide mb-1.5",children:t}),a,n&&p.jsx("p",{className:"text-xs text-danger mt-1",children:n})]})}function fC(){const{user:t,activeEvacuation:n}=pt(),a=On();return t?p.jsxs("div",{className:"min-h-screen bg-light-grey flex flex-col",children:[p.jsx(gE,{}),n&&p.jsx(bE,{event:n}),p.jsx("main",{className:"flex-1 overflow-auto",children:p.jsx(Xw,{})}),p.jsx(xE,{})]}):p.jsx(Go,{to:"/login",state:{from:a},replace:!0})}function Ds({minRole:t,children:n}){const{user:a}=pt();return!a||!$o(a.role,t)?p.jsx(Go,{to:"/",replace:!0}):p.jsx(p.Fragment,{children:n})}function hC(){const{user:t}=pt();return p.jsxs(Jw,{children:[p.jsx(Ct,{path:"/login",element:t?p.jsx(Go,{to:"/",replace:!0}):p.jsx(wE,{})}),p.jsx(Ct,{path:"/self-service/:token",element:p.jsx(rC,{})}),p.jsxs(Ct,{element:p.jsx(fC,{}),children:[p.jsx(Ct,{path:"/",element:p.jsx(CE,{})}),p.jsx(Ct,{path:"/visitors",element:p.jsx(TE,{})}),p.jsx(Ct,{path:"/visitors/new",element:p.jsx(DE,{})}),p.jsx(Ct,{path:"/visitors/:id",element:p.jsx(RE,{})}),p.jsx(Ct,{path:"/schedule",element:p.jsx(LE,{})}),p.jsx(Ct,{path:"/checkin/:visitId",element:p.jsx(Ds,{minRole:"reception",children:p.jsx(nC,{})})}),p.jsx(Ct,{path:"/inbox",element:p.jsx(aC,{})}),p.jsx(Ct,{path:"/pre-approvals",element:p.jsx(sC,{})}),p.jsx(Ct,{path:"/deny-list",element:p.jsx(Ds,{minRole:"site_admin",children:p.jsx(lC,{})})}),p.jsx(Ct,{path:"/site-config",element:p.jsx(Ds,{minRole:"site_admin",children:p.jsx(oC,{})})}),p.jsx(Ct,{path:"/evacuation",element:p.jsx(Ds,{minRole:"site_admin",children:p.jsx(cC,{})})}),p.jsx(Ct,{path:"/admin",element:p.jsx(Ds,{minRole:"site_admin",children:p.jsx(dC,{})})})]}),p.jsx(Ct,{path:"*",element:p.jsx(Go,{to:"/",replace:!0})})]})}function mC(){return p.jsx(__,{children:p.jsxs(hE,{children:[p.jsx(hC,{}),p.jsx(xS,{position:"top-right",toastOptions:{style:{fontFamily:"Inter, Segoe UI, system-ui, sans-serif",fontSize:"14px"}}})]})})}const Nb=document.getElementById("root");if(!Nb)throw new Error("Root element not found");J1.createRoot(Nb).render(p.jsx(S.StrictMode,{children:p.jsx(mC,{})}));
